import{d as _,M as $,C as R,aA as h,aB as B,r as C,i as O,a9 as v,j as A,_ as J,O as d,o as t,c as p,k as g,w as c,a as j,t as f,B as m,b,e as k,ao as q,N as D,L as s,ar as u}from"./index-bb739e40.js";import{a as w}from"./his_date-cdf9b1f5.js";const E=_({name:"NumberInput",props:{modelValue:{type:Object,default:()=>({})},form:{type:Object,default:()=>({})},min:{type:Number,default:null},max:{type:Number,default:null},allowUnknown:{type:Boolean,default:!1}},components:{IonLabel:$,IonInput:R,IonNote:h,IonCheckbox:B},emits:["update:modelValue"],setup(e,{emit:a}){const o=C(!1),n=O({get:()=>e.modelValue,set:l=>a("update:modelValue",l)}),r=async()=>{if(n.value.required&&!n.value.value)return n.value.error="This field is required";if(!e.allowUnknown&&n.value.value==="Unknown"||n.value.value==="N/A")return n.value.error="Unknown is not allowed";if(n.value.validation){const l=await n.value.validation({label:n.value.value,value:n.value.value},e.form);if(l&&l.length)return n.value.error+=l.toString()}return n.value.error=""};return v(o,l=>{l?(n.value.value="Unknown",n.value.error="",n.value.disabled=!0):(n.value.value="",n.value.disabled=!1)}),v(e.modelValue,l=>{l.value==="Unknown"?o.value||(o.value=!0):o.value=!1}),A(()=>{n.value.value==="Unknown"&&!o.value&&(o.value=!0)}),{validate:r,model:n,isUnknown:o}}}),M={key:0,class:"text-danger"},S={key:1,class:"ion-float-right ion-margin-end checkbox-label"};function F(e,a,o,n,r,l){const V=d("ion-checkbox"),y=d("ion-label"),N=d("ion-input"),I=d("ion-note");return t(),p(D,null,[e.model.label?(t(),g(y,{key:0,class:"ion-padding-bottom bold"},{default:c(()=>[j("span",null,f(e.model.label),1),e.model.required?(t(),p("span",M," *")):m("",!0),e.allowUnknown?(t(),p("span",S,[a[3]||(a[3]=b(" Unknown? ",-1)),k(V,{modelValue:e.isUnknown,"onUpdate:modelValue":a[0]||(a[0]=i=>e.isUnknown=i)},null,8,["modelValue"])])):m("",!0)]),_:1})):m("",!0),k(N,{type:"number",class:q(["ion-margin-top",e.model.error?"box-input-error":"box-input"]),modelValue:e.model.value,"onUpdate:modelValue":a[1]||(a[1]=i=>e.model.value=i),placeholder:e.isUnknown?"Unknown":e.model.placeholder,disabled:e.model.disabled||e.isUnknown,onIonFocus:a[2]||(a[2]=i=>e.model.error=""),onIonBlur:e.validate,min:e.min,max:e.max},null,8,["class","modelValue","placeholder","disabled","onIonBlur","min","max"]),e.model.error?(t(),g(I,{key:1,color:"danger"},{default:c(()=>[b(f(e.model.error),1)]),_:1})):m("",!0)],64)}const T=J(E,[["render",F]]),U={label:"Unkown",value:"Unkown",other:[{drug_id:1046,drug_name:"Unknown ARV",am:1,pm:0,units:"",frequency:"Daily (QOD)"}]};class z{static getAllArvRegimens(){return s.getJson("programs/".concat(u,"/all_arv_regimens"))}static async getRegimens(a,o=!1,n=w()){const r=await s.getJson("programs/".concat(u,"/regimens"),{weight:a,tb_dosage:o,date:n});return r.ok&&r.data?Object.keys(r.data).map(l=>({label:l,value:l,other:r.data[l]})).concat(U):[U]}static getCustomIngridients(){return s.getJson("programs/".concat(u,"/custom_regimen_ingredients"))}static getCurrentRegimen(a,o=w()){return s.getJson("programs/".concat(u,"/").concat(a),{date:o})}static getRegimenExtras(a,o){return s.getJson("programs/".concat(u,"/regimen_extras"),{name:a,weight:o})}}export{T as N,z as R};
