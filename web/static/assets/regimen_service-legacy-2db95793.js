System.register(["./index-legacy-5fd00317.js","./_plugin-vue_export-helper-legacy-762b7923.js","./index-legacy-aa705205.js","./his_date-legacy-f511c580.js"],(function(e,n){"use strict";var a,t,l,o,r,s,u,i,d,m,g,c,v,p,b,w,k,f,y,U,h,x,_,I,V;return{setters:[e=>{a=e.d,t=e.k,l=e.aK,o=e.d2,r=e.ak,s=e.S,u=e.g,i=e.Z,d=e.T,m=e.r,g=e.c,c=e.h,v=e.w,p=e.j,b=e.a,w=e.aa,k=e.F,f=e.o,y=e.f,U=e.t,h=e.b,x=e.l},e=>{_=e._},e=>{I=e.P},e=>{V=e.a}],execute:function(){const n=a({name:"NumberInput",props:{modelValue:{type:Object,default:()=>({})},form:{type:Object,default:()=>({})},min:{type:Number,default:null},max:{type:Number,default:null},allowUnknown:{type:Boolean,default:!1}},components:{IonLabel:t,IonInput:l,IonNote:o,IonCheckbox:r},emits:["update:modelValue"],setup(e,{emit:n}){const a=s(!1),t=u({get:()=>e.modelValue,set:e=>n("update:modelValue",e)});return i(a,(e=>{e?(t.value.value="Unknown",t.value.error="",t.value.disabled=!0):(t.value.value="",t.value.disabled=!1)})),i(e.modelValue,(e=>{"Unknown"===e.value?a.value||(a.value=!0):a.value=!1})),d((()=>{"Unknown"!==t.value.value||a.value||(a.value=!0)})),{validate:async()=>{if(t.value.required&&!t.value.value)return t.value.error="This field is required";if(!e.allowUnknown&&"Unknown"===t.value.value||"N/A"===t.value.value)return t.value.error="Unknown is not allowed";if(t.value.validation){const n=await t.value.validation({label:t.value.value,value:t.value.value},e.form);if(n&&n.length)return t.value.error+=n.toString()}return t.value.error=""},model:t,isUnknown:a}}}),j={key:0,class:"text-danger"},J={key:1,class:"ion-float-right ion-margin-end checkbox-label"};e("N",_(n,[["render",function(e,n,a,t,l,o){const r=m("ion-checkbox"),s=m("ion-label"),u=m("ion-input"),i=m("ion-note");return f(),g(k,null,[e.model.label?(f(),c(s,{key:0,class:"ion-padding-bottom bold"},{default:v((()=>[y("span",null,U(e.model.label),1),e.model.required?(f(),g("span",j," *")):p("",!0),e.allowUnknown?(f(),g("span",J,[h(" Unknown? "),b(r,{modelValue:e.isUnknown,"onUpdate:modelValue":n[0]||(n[0]=n=>e.isUnknown=n)},null,8,["modelValue"])])):p("",!0)])),_:1})):p("",!0),b(u,{type:"number",class:w(["ion-margin-top",e.model.error?"box-input-error":"box-input"]),modelValue:e.model.value,"onUpdate:modelValue":n[1]||(n[1]=n=>e.model.value=n),placeholder:e.isUnknown?"Unknown":e.model.placeholder,disabled:e.model.disabled||e.isUnknown,onIonFocus:n[2]||(n[2]=n=>e.model.error=""),onIonBlur:e.validate,min:e.min,max:e.max},null,8,["class","modelValue","placeholder","disabled","onIonBlur","min","max"]),e.model.error?(f(),c(i,{key:1,color:"danger"},{default:v((()=>[h(U(e.model.error),1)])),_:1})):p("",!0)],64)}]])),e("R",class{static getAllArvRegimens(){return x.getJson(`programs/${I}/all_arv_regimens`)}static getRegimens(e){return x.getJson(`programs/${I}/regimens`,{patient_id:e})}static getRegimensByWeight(e,n=!1){return x.getJson(`programs/${I}/regimens`,{weight:e,tb_dosage:n})}static getCustomIngridients(){return x.getJson(`programs/${I}/custom_regimen_ingredients`)}static getCurrentRegimen(e,n=V()){return x.getJson(`programs/${I}/${e}`,{date:n})}static getRegimenExtras(e,n){return x.getJson(`programs/${I}/regimen_extras`,{name:e,weight:n})}static async setSessionDate(e){const n=await this.getApiDate();if(n)return sessionStorage.setItem("apiDate",n),void sessionStorage.setItem("sessionDate",e);throw"Unable to set api date"}static async getApiDate(){const e=await(await x.getJson("current_time")).data;if(e)return e.date}})}}}));
