import{d as V,r as C,h as b,aj as ye,a8 as R,i as Ce,ax as n,m as $,n as y,l as G,bv as Ne,y as z,I as U,L as O,B as D,x as M,bw as qe,bx as be,ap as We,by as Ge,bz as Me,bA as Ve,bB as He,bC as Je,av as _e,ai as Ke,bD as Xe,W as Ye,aB as Ze,aF as Qe,bE as et,Q as tt,aA as nt,bF as at}from"./index-cea95aa1.js";function we(e,s){if(e==null)return;const l=s.replace(/\[(\w+)\]/g,".$1").split(".");let i=e;for(const u of l){if(i==null)return;i=i[u]}return i}function p(e){return e==null?!0:typeof e=="string"||Array.isArray(e)?e.length===0:typeof e=="object"?Object.keys(e).length===0:!1}async function lt(e,s=!1,l){let i=e;return typeof l=="function"&&(i=await l()),s?i.map((u,d)=>({...u,index:d+1})):i}function it(e,s,l){return Array.isArray(e)?e.length<=1?[...e]:[...e].sort((i,u)=>{for(let d=0;d<s.length;d++){const f=s[d],F=l[d],k=f(i),v=f(u);if(k!==v)return F==="asc"?k<v?-1:1:k>v?-1:1}return 0}):[]}function st(e,s){if(p(s))return e;const l=s.map(({order:u})=>u),i=s.map(({column:u})=>d=>{let f=we(d,u.path);return p(f)?"":(typeof u.preSort=="function"&&(f=u.preSort(f)),typeof f=="number"||u.sortCaseSensitive?f:f.toString().toLowerCase())});return it(e.slice(),i,l)}function ot(e,s){const{page:l,pageSize:i,totalPages:u}=e,d=l*i-(i-1),f=l===u?s:l*i;return s?"Showing ".concat(d," to ").concat(f," of ").concat(s," entries"):"No data available"}function rt(e,s,l){return e.totalPages=Math.ceil(s/e.pageSize),e.totalPages<=e.visibleBtns?(e.start=1,e.end=e.totalPages,e):((l.includes(e.page-1)||e.page===1)&&(l.includes(e.page+1)||e.page===e.totalPages)||(e.start=e.page===1?1:e.page-1,e.end=e.start+e.visibleBtns-5,e.start<=3&&(e.end+=3-e.start,e.start=1),e.end>=e.totalPages-2&&(e.start-=e.end-(e.totalPages-2),e.end=e.totalPages),e.start=Math.max(e.start,1)),e)}function ut(e,s){if(p(e))return e;const{page:l,pageSize:i}=s,u=(l-1)*i;return e.slice(u,u+i)}function ct(e){return e.reduce((s,l)=>(l.initialSort&&s.push({column:l,order:l.initialSortOrder||"asc"}),s),[])}function dt(e,s){const l=e.findIndex(i=>i.column.path===s.path);return l>=0?e[l].order=e[l].order==="asc"?"desc":"asc":e=[{column:s,order:"asc"}],e}function ft(e,s){return!s||p(e)?e:e.slice().filter(l=>Object.values(l).some(i=>i&&JSON.stringify(i).toLowerCase().includes(s.toLowerCase())))}function vt(e,s,l){return typeof e.drillable=="function"?e.drillable(s,l):!!e.drillable&&!p(s)}function me(e,s){const l=[];for(let i=e;i<s;i++)l.push(i);return l}const gt=V({name:"SelectInput",props:{value:{type:Object,default:()=>({})},label:{type:String,default:""},placeholder:{type:String,default:"Select Option"},options:{type:Array,default:()=>[]},asyncOptions:{type:Function,required:!1},disabled:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},required:{type:Boolean,default:!1},validate:{type:Function,required:!1}},emits:["select"],setup(e,{emit:s}){const l=C(),i=C(!1),u=C(""),d=C([]),f=C(""),F=b(()=>f.value?"box-input-error":""),k=b(()=>e.label?"ion-margin-top":""),v=b(()=>e.multiple?d.value.filter(({isChecked:o})=>o):l.value?[l.value]:[]),c=b(()=>!u.value&&p(v.value)&&!i.value),h=b({get:()=>e.value,set:o=>s("select",o)}),P=()=>{l.value=void 0,!p(h.value)&&(Array.isArray(h.value)&&e.multiple&&h.value.forEach(o=>{const m=d.value.findIndex(({value:x})=>x===o.value);m===-1?d.value.push({...o,isChecked:!0}):d.value[m].isChecked=!0}),l.value=d.value.find(o=>Array.isArray(h.value)?o.value===h.value[0].value:o.value===h.value.value),p(l.value)&&(l.value=Array.isArray(h.value)?h.value[0]:h.value))},I=async()=>{const o=typeof e.asyncOptions=="function"?await e.asyncOptions(u.value):e.options.filter(({label:m})=>m.toLowerCase().includes(u.value.toLowerCase()));v.value.forEach(m=>{const x=o.findIndex(W=>W.value===m.value);x===-1?o.push(m):o[x].isChecked=!0}),d.value=o},L=async()=>{if(e.required&&p(h.value))return f.value="This field is required";if(typeof e.validate=="function"){const o=await e.validate(h.value);o&&o.length&&(f.value=o.join(", "))}return f.value=""},w=()=>{i.value=!1,h.value=e.multiple?v.value:p(v.value)?{}:v.value[0],u.value="",L()},j=()=>{e.disabled||(i.value=!0,f.value="")},E=o=>{if(!e.multiple)return l.value=o,w();h.value=e.multiple?v.value:p(v.value)?{}:v.value[0],u.value=""},N=o=>e.multiple?o.isChecked=!1:l.value=void 0,q=()=>{u.value="",l.value=void 0,d.value.forEach(o=>o.isChecked=!1)};return R(()=>e.value,()=>P()),R([u,()=>e.options,()=>e.asyncOptions],async()=>{await I(),P()}),Ce(async()=>{await I(),P(),addEventListener("click",o=>{!o.target.closest(".inner-input-box")&&i.value&&w()})}),_e(()=>removeEventListener("click",o=>console.log(o))),()=>[e.label&&n(O,{class:"ion-padding-bottom bold"},e.label),n("div",{class:"outer-input-box box-input ".concat(F.value," ").concat(k.value)},n("div",{class:"inner-input-box"},[n("div",{style:{display:"flex",flexWrap:"wrap",width:"100%"},onClick:j},[...v.value.map(o=>n(Ke,[n(O,o.label),n(z,{icon:Xe,color:"danger",onClick:()=>N(o),style:{zIndex:90}})])),n(D,{disabled:e.disabled,placeholder:c.value?e.placeholder:"",class:"search-input",value:u.value,onIonInput:o=>u.value=o.target.value})]),i.value&&n("div",{class:"input-options"},n(Ye,d.value.map((o,m)=>n(M,{lines:m+1===d.value.length?"none":void 0,onClick:()=>E(o)},[e.multiple&&n(Ze,{class:"input-option-checkbox",slot:"start",value:o.isChecked,onIonInput:x=>o.isChecked=x.target.checked}),n(O,o.label)])))),n("div",{class:"input-icon"},[(u.value||v.value.length)&&n(z,{icon:Qe,onClick:q}),n(z,{icon:i.value?et:tt,onClick:i.value?w:j})].filter(Boolean))])),f.value&&n(nt,{color:"danger"},f.value)]}}),ht=V({props:{range:{type:Object,default:()=>({startDate:"",endDate:""})}},emits:["rangeChange"],setup(e,{emit:s}){const l=C(e.range.startDate),i=C(e.range.endDate),u=b(()=>({startDate:l.value,endDate:i.value}));return R(u,d=>s("rangeChange",d)),()=>n(G,{class:"ion-no-padding ion-no-margin"},()=>n($,[n(y,{size:"6"},()=>n(D,{type:"date",class:"box-input",value:l.value,onIonInput:d=>l.value=d.target.value,style:{width:"100%"}})),n(y,{size:"1",style:{display:"flex",justifyContent:"center "}},()=>n(z,{icon:at,style:{fontSize:"24px",padding:".5rem"}})),n(y,{size:"5"},()=>n(D,{type:"date",class:"box-input",value:i.value,onIonInput:d=>i.value=d.target.value,style:{width:"100%"}}))]))}}),yt=V({name:"DataTable",props:{rows:{type:Array,default:()=>[]},asyncRows:{type:Function,required:!1},columns:{type:Array,default:()=>[]},actionsButtons:{type:Array,default:()=>[]},rowActionsButtons:{type:Array,default:()=>[]},customFilters:{type:Array,default:()=>[]},color:{type:String},config:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1}},emits:["customFilter","queryChange","drilldown"],setup(e,{emit:s,slots:l}){var J,_,K,X,Y,Z,Q,ee,te,ne,ae,le,ie,se,oe,re,ue,ce,de,fe,ve,ge,he,pe;const i=C(!1),u=C([]),d=C([]),f=b(()=>d.value.length),F=b(()=>p(e.rowActionsButtons)?v.value.length:v.value.length+1),k=b(()=>c.pagination.enabled?me(c.pagination.start,c.pagination.end+1):[]),v=b(()=>e.config.showIndices?[{path:"index",label:"#",initialSort:!0,initialSortOrder:"asc"},...e.columns]:e.columns),c=ye({search:"",sort:[],pagination:{enabled:(K=(_=(J=e.config)==null?void 0:J.pagination)==null?void 0:_.enabled)!=null?K:!0,page:(Z=(Y=(X=e.config)==null?void 0:X.pagination)==null?void 0:Y.page)!=null?Z:1,pageSize:(te=(ee=(Q=e.config)==null?void 0:Q.pagination)==null?void 0:ee.pageSize)!=null?te:10,start:(le=(ae=(ne=e.config)==null?void 0:ne.pagination)==null?void 0:ae.start)!=null?le:1,end:(oe=(se=(ie=e.config)==null?void 0:ie.pagination)==null?void 0:se.end)!=null?oe:1,totalPages:(ce=(ue=(re=e.config)==null?void 0:re.pagination)==null?void 0:ue.totalPages)!=null?ce:1,visibleBtns:(ve=(fe=(de=e.config)==null?void 0:de.pagination)==null?void 0:fe.visibleBtns)!=null?ve:7,pageSizeOptions:(pe=(he=(ge=e.config)==null?void 0:ge.pagination)==null?void 0:he.pageSizeOptions)!=null?pe:[5,10,20,50,100]}}),h=C([]),P=b(()=>e.config.showSearchField!==!1||e.customFilters.length>0||e.actionsButtons.length>0),I=ye(e.customFilters.reduce((t,a)=>(t[a.id]=a.value,t),{})),L=async()=>{i.value=!0,u.value=await lt(e.rows,e.config.showIndices||!1,e.asyncRows),c.sort=ct(v.value),w(c.pagination),i.value=!1},w=(t,a,r)=>{c.search=a!=null?a:"",r&&(c.sort=dt(c.sort,r));const g=ft(u.value,c.search);d.value=st(g,c.sort),c.pagination.enabled?(c.pagination=rt(t,f.value,k.value),h.value=ut(d.value,c.pagination)):h.value=d.value};R(I,()=>{e.config.showSubmitButton===!1&&s("customFilter",I)},{immediate:!0,deep:!0}),R(()=>e.rows,()=>L(),{deep:!0,immediate:!0}),Ce(()=>L());const j=()=>e.config.showSearchField!==!1?n(y,{size:"4"},()=>[n(We,{placeholder:"search here...",class:"box ion-no-padding",value:c.search,onIonInput:t=>w({...c.pagination,page:1},t.target.value)})]):null,E=t=>n(y,{size:"".concat(t.gridSize)||"3"},()=>n(gt,{options:t.options,placeholder:t.label||t.placeholder||"Select Item",value:t.value,multiple:t.multiple,onSelect:a=>{typeof t.onUpdate=="function"&&t.onUpdate(a),I[t.id]=a}})),N=t=>n(y,{size:"".concat(t.gridSize)||"6"},()=>n(ht,{range:b(()=>t.value||{startDate:"",endDate:""}).value,onRangeChange:async a=>{typeof t.onUpdate=="function"&&t.onUpdate(a),I[t.id]=a}})),q=t=>n(y,{size:"4"},()=>n(D,{class:"box",type:t.type,placeholder:t.placeholder,value:b(()=>t.value||"").value,onIonInput:async a=>{const r=a.target.value;typeof t.onUpdate=="function"&&t.onUpdate(r),I[t.id]=r}})),o=()=>e.customFilters.map(t=>{if(t.slotName&&l[t.slotName]){const a=l[t.slotName];return n(y,{size:"".concat(t.gridSize||"3")},()=>a&&a({filter:t}))}return t.type==="dateRange"?N(t):t.type==="select"?E(t):q(t)}),m=()=>e.customFilters.length>0&&e.config.showSubmitButton!==!1?n(y,{size:"2"},()=>[n(U,{color:"primary",class:"ion-no-margin",onClick:()=>s("customFilter",I)},"Submit")]):null,x=()=>e.actionsButtons.map(t=>{var a;return n(U,{class:"ion-float-right",color:t.color||"primary",size:(a=t.size)!=null?a:"default",onClick:()=>t.action(h.value,u.value,c,v.value)},t.icon?n(z,{icon:t.icon}):t.label)}),W=()=>P.value&&n(G,{style:{width:"100%",fontWeight:500}},()=>n($,[n(y,{size:"7"},()=>n($,[j(),...o(),m()])),n(y,{size:"5",class:"ion-padding-end"},()=>x())])),Se=()=>c.pagination.enabled&&c.pagination.totalPages>1&&n(G,{style:{width:"100%",textAlign:"left",color:"black"},class:"ion-padding"},()=>n($,[n(y,{size:"4"},()=>Ie()),n(y,{size:"5",class:"text-center"},()=>[ke(),xe()]),n(y,{size:"3"},()=>ze())])),Ie=()=>{const{page:t,start:a,end:r,totalPages:g}=c.pagination,S=T=>w({...c.pagination,page:T}),A=[B({icon:Ge,disabled:t===a,onClick:()=>S(t-1)})];return a>3&&(A.push(B({label:"1",onClick:()=>S(1)})),A.push(B({label:"...",disabled:!0}))),k.value.forEach(T=>{A.push(B({label:T,onClick:()=>S(T)}))}),r<g-2&&(A.push(B({label:"...",disabled:!0})),A.push(B({label:g,onClick:()=>S(g)}))),A.push(B({icon:Ne,disabled:t===r||p(d.value),onClick:()=>S(t+1)})),A},B=({disabled:t,label:a,icon:r,onClick:g})=>n(U,{onClick:g,disabled:t,size:"small",color:c.pagination.page===a?"primary":"light"},r?n(z,{icon:r}):a||"Button"),ke=()=>n(M,{class:"box go-to-input ion-hide-xl-down",lines:"none"},[n(O,{class:"ion-margin-end"},"Go to page"),n(D,{type:"number",min:1,max:c.pagination.totalPages,value:c.pagination.page,style:{paddingRight:"15px"},debounce:500,onIonChange:t=>{const a=t.target.value;a>0&&a<=c.pagination.totalPages&&w({...c.pagination,page:a})}})]),xe=()=>n(M,{class:"box per-page-input",lines:"none"},[n(O,"Items per page"),n(qe,{value:c.pagination.pageSize,onIonChange:t=>w({...c.pagination,pageSize:t.target.value,page:1})},[...c.pagination.pageSizeOptions.map(t=>n(be,{value:t,key:t},t)),n(be,{value:f.value},"All")])]),ze=()=>n(y,{size:"4",class:"pagination-info"},b(()=>ot(c.pagination,f.value)).value),Be=()=>n("thead",{class:e.color||""},n("tr",[...v.value.map(t=>Fe(t)),!p(e.rowActionsButtons)&&n("th","Actions")])),Ae=t=>{const a={marginRight:"5px",float:"right",cursor:"pointer"},r=b(()=>{const g=c.sort.find(S=>S.column.path===t.path);return g?g.order=="asc"?He:Je:Ve});return n(z,{icon:r.value,style:a})},Fe=t=>{var g;const a={minWidth:/index/i.test(t.path)?"80px":"190px",...t.thStyles},r=()=>w(c.pagination,c.search,t);return n("th",{key:t.label,style:a,class:(g=t.thClasses)==null?void 0:g.join(" "),onClick:r},[n("span",t.label),t.sortable!==!1&&Ae(t)])},Pe=()=>n("tbody",{class:"table-body"},i.value||e.loading?Oe():p(d.value)?Re():Le()),Oe=()=>me(0,9).map(t=>n("tr",{key:t},n("td",{colspan:F.value},n(Me,{animated:!0,style:{width:"100%"}})))),Re=()=>n("tr",n("td",{colspan:F.value},n("div",{class:"no-data-table"},"No data available"))),De=async(t,a)=>{const r=e.rowActionsButtons.find(g=>g.default);r&&await r.action(t,a)},Le=()=>h.value.map((t,a)=>n("tr",{key:t,onClick:()=>De(t,a)},[...je(t),Ue(t,a)])),je=t=>v.value.map((a,r)=>{var S;const g=["data-cell",...(S=a.tdClasses)!=null?S:[]].join(" ");return n("td",{key:r,class:g,style:a.tdStyles},Te(t,a))}),Te=(t,a)=>{let r=we(t,a.path);return typeof a.formatter=="function"&&r&&(r=a.formatter(r,t)),vt(a,r,t)?n("a",{onClick:()=>s("drilldown",{column:a,row:t})},H(r)):H(r)},H=t=>Array.isArray(t)?t.length:t,Ue=(t,a)=>p(e.rowActionsButtons)?null:n("td",e.rowActionsButtons.map(r=>(typeof r.condition=="function"?r.condition(t):!0)?$e(t,a,r):null)),$e=(t,a,r)=>{var g;return n(U,{key:r.icon,size:(g=r.size)!=null?g:"small",color:r.color||"primary",onClick:()=>r.action(t,a)},r.icon?n(z,{icon:r.icon}):r.label||"Button")},Ee=()=>n("div",{class:"responsive-table ion-padding-horizontal"},n("table",{class:"table bordered-table striped-table"},[Be(),Pe()]));return()=>[W(),Ee(),Se()]}});export{yt as D,st as s};
