System.register(["./index-legacy-5f56363a.js","./common-legacy-e8d6ba88.js"],function(e,o){"use strict";var l,a,t,n,i,u,d,r,s,c,p,v,m,f,h,b,w,g,y,x,k,C,O,I,V,D,S,B,_,A,E,U,j;return{setters:[e=>{l=e.d,a=e.M,t=e.C,n=e.aA,i=e.z,u=e.aB,d=e.X,r=e.aj,s=e.y,c=e.r,p=e.i,v=e.a9,m=e.j,f=e.av,h=e.R,b=e.bB,w=e.aF,g=e.bA,y=e._,x=e.O,k=e.c,C=e.k,O=e.w,I=e.B,V=e.ao,D=e.a,S=e.N,B=e.Q,_=e.e,A=e.o,E=e.t,U=e.b},e=>{j=e.i}],execute:function(){var o=document.createElement("style");o.textContent=".outer-input-box[data-v-330c6b2f]{width:100%;height:fit-content;background-color:#fff}.inner-input-box[data-v-330c6b2f]{position:relative;width:100%}.search-input[data-v-330c6b2f]{height:2.5rem;width:100%;display:inline-block}.input-options[data-v-330c6b2f]{position:absolute;width:100%;max-height:25rem;overflow-y:auto;background-color:#fff;z-index:100;border-radius:.25rem;box-shadow:0 8px 16px rgba(0,0,0,.2)}.dropdown-down[data-v-330c6b2f]{top:100%;margin-top:2px;border-top-left-radius:0;border-top-right-radius:0;box-shadow:0 8px 16px rgba(0,0,0,.2)}.dropdown-up[data-v-330c6b2f]{bottom:100%;margin-bottom:2px;border-bottom-left-radius:0;border-bottom-right-radius:0;box-shadow:0 -8px 16px rgba(0,0,0,.2)}.input-icon[data-v-330c6b2f]{font-size:12px!important;position:absolute;top:0;right:0;height:2.5rem;width:2rem;color:#8a8a8a;padding-right:.5rem;display:flex;align-items:center;justify-content:flex-end;z-index:90}.input-option-checkbox[data-v-330c6b2f]{--size: 18px !important}.input-placeholder[data-v-330c6b2f]{color:#a0a0a0;margin:.5rem}\n",document.head.appendChild(o);const z=l({name:"SelectInput",props:{modelValue:{type:Object,default:()=>({})},form:{type:Object,default:()=>({})},options:{type:Array,default:()=>[]},asyncOptions:{type:Function,required:!1},allowCustom:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},infiniteScrolling:{type:Boolean,default:!1},dropDirection:{type:String,default:"auto",validator:e=>["auto","up","top","down","bottom"].includes(e)}},components:{IonLabel:a,IonInput:t,IonNote:n,IonIcon:i,IonCheckbox:u,IonList:d,IonChip:r,IonItem:s},emits:["update:modelValue"],setup(e,{emit:o}){const l=c(!1),a=c(""),t=c(),n=c(!1),i=c(),u=c(""),d=c([]),r=c(1),s=c("down"),y=c(),x=p(()=>e.multiple?d.value.filter(({isChecked:e})=>e):t.value?[t.value]:[]),k=p(()=>!u.value&&j(x.value)&&!n.value),C=p({get:()=>e.modelValue,set:e=>o("update:modelValue",e)}),O=()=>{u.value="",t.value=void 0,d.value.forEach(e=>e.isChecked=!1)},I=()=>{if(O(),j(C.value.value))return;if(Array.isArray(C.value.value)&&e.multiple)return C.value.value.forEach(e=>{const o=d.value.findIndex(({value:o})=>o===e.value);-1===o?d.value.push({...e,isChecked:!0}):d.value[o].isChecked=!0});const o=d.value.find(e=>e.value===C.value.value);t.value=o||{label:C.value.value,value:C.value.value}},V=async()=>{const o="function"==typeof e.asyncOptions?await e.asyncOptions(u.value):e.options.filter(({label:e})=>e.toLowerCase().includes(u.value.toLowerCase()));x.value.forEach(e=>{const l=o.findIndex(o=>o.value===e.value);-1===l?o.push(e):o[l].isChecked=!0}),d.value=o.filter(({label:e})=>!!e)},D=async()=>{if(C.value.required&&j(C.value.value))return C.value.error="This field is required";if(C.value.validation){const o=await C.value.validation({label:C.value.value,value:C.value.value},e.form);if(o&&o.length)return C.value.error+=o.toString()}return C.value.error=""},S=()=>{n.value=!1,C.value.value=e.multiple?x.value:j(x.value)?void 0:x.value[0],u.value="",D()},B=o=>{e.multiple||(t.value=o,S()),C.value.value=e.multiple?x.value:j(x.value)?void 0:x.value[0],u.value=""};return v(u,async()=>{r.value++,await V()}),v([()=>e.options,()=>e.asyncOptions],async()=>V()),v(()=>e.modelValue.value,e=>j(e)&&I(),{deep:!0,immediate:!0}),v(n,e=>e&&(i.value=t.value||d.value[0])),m(async()=>{await V(),I(),addEventListener("click",e=>{!e.target.closest(".inner-input-box")&&n.value&&S()})}),f(()=>removeEventListener("click",e=>console.log(e))),{validate:D,onSelect:B,resetHandler:O,onShowOptions:()=>{C.value.disabled||(n.value=!0,C.value.error="",(()=>{if("up"!==e.dropDirection&&"top"!==e.dropDirection)if("down"!==e.dropDirection&&"bottom"!==e.dropDirection){if(y.value){const e=y.value.getBoundingClientRect(),o=window.innerHeight,l=e.top,a=o-e.bottom,t=Math.min(44*d.value.length,300);s.value=a<t&&l>a?"up":"down"}}else s.value="down";else s.value="up"})(),console.log("Dropdown direction:",e.dropDirection,"â†’",s.value))},onCloseOptions:S,diselect:o=>e.multiple?o.isChecked=!1:t.value=void 0,onCustomValue:()=>{C.value.value={label:a.value,value:a.value}},handleKeyDown:e=>{switch(n.value||(n.value=!0),e.key){case"ArrowDown":(e=>{e.preventDefault();const o=d.value.indexOf(i.value)+1;i.value=d.value[o]||d.value[0]})(e);break;case"ArrowUp":(e=>{e.preventDefault();const o=d.value.indexOf(i.value)-1;i.value=d.value[o]||d.value[d.value.length-1]})(e);break;case"Enter":B(i.value);break;case"Escape":S()}},model:C,customOption:a,isCustom:l,chevronDown:h,chevronUp:b,close:w,closeCircle:g,selectedOption:t,showOptions:n,focusedOption:i,showPlaceholder:k,filteredOptions:d,filter:u,tags:x,dropdownDirection:s,inputRef:y}}}),L={key:0,class:"text-danger"},q={key:1,class:"ion-float-right ion-margin-end checkbox-label"},R={class:"inner-input-box",ref:"inputRef"},F={class:"input-icon"};e("S",y(z,[["render",function(e,o,l,a,t,n){const i=x("ion-checkbox"),u=x("ion-label"),d=x("ion-input"),r=x("ion-icon"),s=x("ion-chip"),c=x("ion-item"),p=x("ion-list"),v=x("ion-note");return A(),k(S,null,[e.model.label?(A(),C(u,{key:0,class:"ion-padding-bottom bold"},{default:O(()=>[D("span",null,E(e.model.label),1),e.model.required?(A(),k("span",L," *")):I("",!0),e.allowCustom?(A(),k("span",q,[U(" Add Custom "+E(e.model.label)+"? ",1),_(i,{modelValue:e.isCustom,"onUpdate:modelValue":o[0]||(o[0]=o=>e.isCustom=o),onIonChange:o[1]||(o[1]=o=>e.model.value="")},null,8,["modelValue"])])):I("",!0)]),_:1})):I("",!0),e.isCustom?(A(),C(d,{key:1,class:V(["box-input",{"box-input-error":e.model.error,"ion-margin-top":e.model.label}]),modelValue:e.customOption,"onUpdate:modelValue":o[2]||(o[2]=o=>e.customOption=o),placeholder:e.model.placeholder||e.model.label,disabled:e.model.disabled,onIonFocus:o[3]||(o[3]=()=>e.model.error=""),onIonBlur:e.validate,onIonInput:e.onCustomValue},null,8,["class","modelValue","placeholder","disabled","onIonBlur","onIonInput"])):(A(),k("div",{key:2,class:V(["outer-input-box box-input",{"box-input-error":e.model.error,"ion-margin-top":e.model.label}])},[D("div",R,[D("div",{style:{display:"flex","flex-wrap":"wrap",width:"100%"},onClick:o[6]||(o[6]=(...o)=>e.onShowOptions&&e.onShowOptions(...o))},[(A(!0),k(S,null,B(e.tags,(o,l)=>(A(),C(s,{key:l},{default:O(()=>[_(u,null,{default:O(()=>[U(E(o.label),1)]),_:2},1024),_(r,{icon:e.closeCircle,color:"danger",onClick:l=>e.diselect(o),style:{"z-index":"20"}},null,8,["icon","onClick"])]),_:2},1024))),128)),_(d,{disabled:e.model.disabled,placeholder:e.showPlaceholder?e.model.placeholder||"select option":"",modelValue:e.filter,"onUpdate:modelValue":o[4]||(o[4]=o=>e.filter=o),class:"search-input",ref:"searchInput",onKeydown:o[5]||(o[5]=o=>e.handleKeyDown(o))},null,8,["disabled","placeholder","modelValue"])]),e.showOptions?(A(),k("div",{key:0,class:V(["input-options",{"dropdown-up":"up"===e.dropdownDirection,"dropdown-down":"down"===e.dropdownDirection}])},[_(p,null,{default:O(()=>[(A(!0),k(S,null,B(e.filteredOptions,(o,l)=>{var a;return A(),C(c,{key:l,lines:l+1===e.filteredOptions.length?"none":void 0,color:o.value===(null===(a=e.focusedOption)||void 0===a?void 0:a.value)?"light":"",onClick:l=>e.onSelect(o)},{default:O(()=>[e.multiple?(A(),C(i,{key:0,class:"input-option-checkbox",slot:"start",modelValue:o.isChecked,"onUpdate:modelValue":e=>o.isChecked=e},null,8,["modelValue","onUpdate:modelValue"])):I("",!0),_(u,null,{default:O(()=>[U(E(o.label),1)]),_:2},1024)]),_:2},1032,["lines","color","onClick"])}),128))]),_:1})],2)):I("",!0),D("div",F,[e.filter||e.tags.length>0?(A(),C(r,{key:0,icon:e.close,onClick:e.resetHandler},null,8,["icon","onClick"])):I("",!0),_(r,{icon:e.showOptions?e.chevronUp:e.chevronDown,onClick:o[7]||(o[7]=o=>e.showOptions?e.onCloseOptions():e.onShowOptions())},null,8,["icon"])])],512)],2)),e.model.error?(A(),C(v,{key:3,color:"danger"},{default:O(()=>[U(E(e.model.error),1)]),_:1})):I("",!0)],64)}],["__scopeId","data-v-330c6b2f"]]))}}});
