System.register(["./loader-legacy-41f05d42.js","./index-legacy-27718e38.js","./ReportTable.vue_vue_type_style_index_0_lang-legacy-a1e25436.js","./data_cleaning_report_service-legacy-5da694fd.js","./Strs-legacy-b5721578.js","./common-legacy-e8d6ba88.js","./his_date-legacy-88679395.js","./exports-legacy-a86bd3b6.js","./index-legacy-d17d54e7.js","./vue-datepicker-legacy-b4d8c74f.js","./toasts-legacy-9b206dea.js","./DrilldownTable-legacy-11cfc702.js","./arrays-legacy-86abe4a8.js","./report_service-legacy-a6a2ab1a.js","./url-legacy-3a6801d5.js"],function(t,e){"use strict";var a,l,r,i,o,n,s,u,c,d,p,m,b,h,g,_;return{setters:[t=>{a=t.l},t=>{l=t.d,r=t.r,i=t.aj,o=t.h,n=t.ak,s=t._,u=t.N,c=t.j,d=t.o},t=>{p=t._},t=>{m=t.C,b=t.D},t=>{h=t.t},t=>{g=t.p},t=>{_=t.t},null,null,null,null,null,null,null,null],execute:function(){const e=l({name:"DataCleaning",components:{BaseReportTable:p},setup(){const t=r([]),e=i({}),l=o(()=>`Data Cleaning Tools ${(null==e?void 0:e.value)||""}`),s=r("-"),u=[{path:"arv_number",label:"ARV Number",preSort:g,initialSort:!0},{path:"given_name",label:"First Name"},{path:"family_name",label:"Last Name"}],c=[{path:"arv_number",label:"ARV Number",preSort:g,initialSort:!0},{path:"filling_number",label:"Filling Number"},{path:"outcome",label:"Outcome"},{path:"outcome_date",label:"Outcome Date",formatter:_},{path:"dispensation_visit_date",label:"Last Dispensation Date",formatter:_}],d=o(()=>{switch(e.value){case m.ActiveClientsWithAdverseOutcomes:return c;case m.MalesWithFemaleObs:return[...u,{path:"gender",label:"Gender",formatter:h},{path:"birthdate",label:"Date of Birth",formatter:_},{path:"visit_date",label:"Visit Date",formatter:t=>{const e=t.split(",");return e.length>1?`${e.length} visits dates`:_(t)},drillable:t=>/visits/i.test(t)}];case m.StartDateLessThanDob:return[...u,{path:"gender",label:"Gender",formatter:h},{path:"birthdate",label:"Date of Birth",formatter:_},{path:"art_start_date",label:"Start Date",formatter:_}];case m.ClientsOnArtWithoutHivProgram:return[{path:"arv_number",label:"ARV Number",preSort:g,initialSort:!0},{path:"birthdate",label:"Date of Birth",formatter:_},{path:"art_start_date",label:"Start Date",formatter:_},{path:"last_art_dispensation",label:"Last Dispensation Date",formatter:_}];default:return[...u,{path:"gender",label:"Gender",formatter:h},{path:"birthdate",label:"Date of Birth",formatter:_}]}}),p=[...u,{path:"visit_date",label:"Visit Date",formatter:_}],v=[{label:"Show",action:t=>{n.push(`/patient/${t.patient_id}`)}}],f=o(()=>[{id:"tool",label:"Select Cleaning Tool",type:"select",value:e,gridSize:5,options:Object.values(m).map(t=>({label:t.toLowerCase(),value:t}))}]);return{period:s,title:l,rows:t,columns:d,rowActionBtns:v,filters:f,drillColumns:p,fetchData:async l=>{var r;await a.show();const i=new b;i.setStartDate(l.dateRange.startDate),i.setEndDate(l.dateRange.endDate),Object.assign(e,l.tool),s.value=i.getDateIntervalPeriod(),t.value=null!==(r=await i.getCleaningToolReport(e.value))&&void 0!==r?r:[],await a.hide()},getDrilldownTitle:t=>t.column.path,onDrillRowParser:async t=>t.row.visit_date.split(",").map(e=>({...t.row,person_id:t.row.patient_id,visit_date:e}))}}});t("default",s(e,[["render",function(t,e,a,l,r,i){const o=u("base-report-table");return d(),c(o,{title:t.title,"report-icon":"clean.jpg",period:t.period,columns:t.columns,rows:t.rows,rowActionButtons:t.rowActionBtns,"custom-filters":t.filters,useDateRangeFilter:"","drill-title":t.getDrilldownTitle,"drill-row-parser":t.onDrillRowParser,"custom-drill-columns":t.drillColumns,onGenerate:t.fetchData},null,8,["title","period","columns","rows","rowActionButtons","custom-filters","drill-title","drill-row-parser","custom-drill-columns","onGenerate"])}]]))}}});
