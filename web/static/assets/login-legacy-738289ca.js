System.register(["./index-legacy-5e2e9988.js","./image-legacy-0b5f9ca9.js","./toasts-legacy-3ebefc85.js","./PasswordUpdate-legacy-e149c4ba.js","./TextInput-legacy-10d21864.js","./his_date-legacy-68b7a348.js","./form-legacy-6faf6d5a.js","./Strs-legacy-09248991.js","./common-legacy-0d7df615.js","./loader-legacy-3c24c91b.js"],(function(e,a){"use strict";var l,t,n,o,r,s,i,d,u,c,g,m,p,f,v,h,y,_,x,b,w,P,j,k,C,z,A,V,E,I,F,R,M,T,U,q,S,D,K;return{setters:[e=>{l=e.d,t=e.r,n=e.f,o=e.g,r=e.h,s=e.i,i=e.j,d=e.w,u=e.u,c=e.o,g=e.e,m=e.k,p=e.l,f=e.m,v=e.n,h=e.b,y=e.p,_=e.t,x=e.a,b=e.q,w=e.s,P=e.v,j=e.I,k=e.x,C=e.y,z=e.c,A=e.z,V=e.A,E=e.B,I=e.C,F=e.D,R=e.E,M=e.F,T=e.G,U=e.H,q=e._},e=>{S=e.r},e=>{D=e.t},e=>{K=e.u},null,null,null,null,null,null],execute:function(){var a=document.createElement("style");a.textContent=".title[data-v-aa0738be]{text-align:center;font-size:68px;font-weight:700;margin:8vh 1px 0}.sub-title[data-v-aa0738be]{text-align:center!important;font-size:24px;margin-bottom:20px}.hero-image[data-v-aa0738be]{display:block;width:55%;margin:5px auto}.footer-section[data-v-aa0738be]{position:absolute;width:100%;bottom:0;left:0;padding-right:1rem;padding-left:1rem}.avatar[data-v-aa0738be]{font-size:8vw;margin:10vh 1px 0}.form-section[data-v-aa0738be]{background:#2839ad;color:#fff;text-align:center;height:100vh;padding:38px 18px}.brand-logo-pepfar[data-v-aa0738be]{width:80px}.brand-logo-moh[data-v-aa0738be]{width:90px}\n",document.head.appendChild(a);const B=["src"],G=["src"],H=["src"],L={key:0};e("default",q(l({__name:"login",setup(e){const a=t(""),l=t(""),q=n(),N=K(),{fullVersion:J}=M(),{facility:O,loadFacilityCode:Q}=T(),{initiateIdleTimer:W,stopIdleTimer:X}=o(),Y=r((()=>q.currentRoute.value.redirectedFrom));s(X);const Z=async()=>{try{if(!a.value||!l.value)return D("Invalid login details");const t=await U.login(a.value,l.value);var e;t.ok?(N.setCurrentPassword(l.value),await N.canChangePassword()&&await N.changePasswaord(),Q(),W(),q.push(null!==(e=Y.value)&&void 0!==e?e:"/")):D(t.errorMessage)}catch(t){D("An error occurred while logging in"),console.error(t)}};return(e,t)=>(c(),i(u(R),null,{default:d((()=>[g(u(F),null,{default:d((()=>[g(u(m),{style:{margin:"0",padding:"0"}},{default:d((()=>[g(u(p),null,{default:d((()=>[g(u(f),{size:"8"},{default:d((()=>[g(u(v),{class:"title"},{default:d((()=>t[2]||(t[2]=[h("E-MASTERCARD APP")]))),_:1}),g(u(y),{class:"sub-title"},{default:d((()=>[h(_(u(J)),1)])),_:1}),x("img",{src:u(S)("report.png"),class:"hero-image"},null,8,B),g(u(b),{class:"footer-section"},{default:d((()=>[g(u(w),null,{default:d((()=>[x("span",null,[x("img",{id:"coat",src:u(S)("login-logos/Malawi-Coat_of_arms_of_arms.png"),alt:"Malawi Coat of Arms logo",class:"brand-logo-moh"},null,8,G),x("img",{id:"pepfar",src:u(S)("login-logos/PEPFAR.png"),alt:"PEPFAR logo",class:"brand-logo-pepfar"},null,8,H)]),g(u(P),{class:"his-sm-text",slot:"end",lines:"none"},{default:d((()=>[g(u(j),{color:"dark",fill:"outline",size:"large",slot:"end","router-link":"/settings/network"},{default:d((()=>t[3]||(t[3]=[h(" Network ")]))),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),g(u(f),{size:"4",class:"form-section"},{default:d((()=>[g(u(k),{icon:u(C),class:"avatar"},null,8,["icon"]),u(O).name?(c(),z("h3",L,_(u(O).name)+" ("+_(u(O).district)+")",1)):A("",!0),t[5]||(t[5]=x("h4",null,"Please, log into your account",-1)),g(u(P),{style:{margin:"2rem 3.5rem"}},{default:d((()=>[g(u(V),{type:"text",placeholder:"Username",modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=e=>a.value=e),onKeyup:E(Z,["enter"]),min:5,required:""},null,8,["modelValue"])])),_:1}),g(u(P),{style:{margin:"2rem 3.5rem"}},{default:d((()=>[g(u(V),{type:"password",modelValue:l.value,"onUpdate:modelValue":t[1]||(t[1]=e=>l.value=e),placeholder:"Password",onKeyup:E(Z,["enter"]),max:100,min:5,required:""},null,8,["modelValue"])])),_:1}),g(u(j),{expand:"full",size:"large",style:{margin:"2rem 3.5rem","text-transform":"none"},onClick:I(Z,["prevent"])},{default:d((()=>t[4]||(t[4]=[h(" Login ")]))),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}))}}),[["__scopeId","data-v-aa0738be"]]))}}}));
