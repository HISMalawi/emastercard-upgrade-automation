System.register(["./index-legacy-79e582e4.js"],function(e,a){"use strict";var t,l,n,i,o,s,u,r,c,d,p,v,g,f,y,h,b,m,w,C,S,k,x,z,A,B,I,O,F,P,j,D,$,L;return{setters:[e=>{t=e.d,l=e.r,n=e.h,i=e.aj,o=e.a8,s=e.i,u=e.ax,r=e.m,c=e.n,d=e.l,p=e.bv,v=e.y,g=e.I,f=e.L,y=e.B,h=e.x,b=e.bw,m=e.bx,w=e.ap,C=e.by,S=e.bz,k=e.bA,x=e.bB,z=e.bC,A=e.av,B=e.ai,I=e.bD,O=e.W,F=e.aB,P=e.aF,j=e.bE,D=e.Q,$=e.aA,L=e.bF}],execute:function(){function a(e,a){if(null==e)return;const t=a.replace(/\[(\w+)\]/g,".$1").split(".");let l=e;for(const n of t){if(null==l)return;l=l[n]}return l}function q(e){return null==e||("string"==typeof e||Array.isArray(e)?0===e.length:"object"==typeof e&&0===Object.keys(e).length)}function E(e,t){if(q(t))return e;const l=t.map(({order:e})=>e),n=t.map(({column:e})=>t=>{let l=a(t,e.path);return q(l)?"":("function"==typeof e.preSort&&(l=e.preSort(l)),"number"==typeof l||e.sortCaseSensitive?l:l.toString().toLowerCase())});return function(e,a,t){return Array.isArray(e)?e.length<=1?[...e]:[...e].sort((e,l)=>{for(let n=0;n<a.length;n++){const i=a[n],o=t[n],s=i(e),u=i(l);if(s!==u)return"asc"===o?s<u?-1:1:s>u?-1:1}return 0}):[]}(e.slice(),n,l)}function N(e,a){const t=[];for(let l=e;l<a;l++)t.push(l);return t}e("s",E);const R=t({name:"SelectInput",props:{value:{type:Object,default:()=>({})},label:{type:String,default:""},placeholder:{type:String,default:"Select Option"},options:{type:Array,default:()=>[]},asyncOptions:{type:Function,required:!1},disabled:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},required:{type:Boolean,default:!1},validate:{type:Function,required:!1}},emits:["select"],setup(e,{emit:a}){const t=l(),i=l(!1),r=l(""),c=l([]),d=l(""),p=n(()=>d.value?"box-input-error":""),g=n(()=>e.label?"ion-margin-top":""),b=n(()=>e.multiple?c.value.filter(({isChecked:e})=>e):t.value?[t.value]:[]),m=n(()=>!r.value&&q(b.value)&&!i.value),w=n({get:()=>e.value,set:e=>a("select",e)}),C=()=>{t.value=void 0,q(w.value)||(Array.isArray(w.value)&&e.multiple&&w.value.forEach(e=>{const a=c.value.findIndex(({value:a})=>a===e.value);-1===a?c.value.push({...e,isChecked:!0}):c.value[a].isChecked=!0}),t.value=c.value.find(e=>Array.isArray(w.value)?e.value===w.value[0].value:e.value===w.value.value),q(t.value)&&(t.value=Array.isArray(w.value)?w.value[0]:w.value))},S=async()=>{const a="function"==typeof e.asyncOptions?await e.asyncOptions(r.value):e.options.filter(({label:e})=>e.toLowerCase().includes(r.value.toLowerCase()));b.value.forEach(e=>{const t=a.findIndex(a=>a.value===e.value);-1===t?a.push(e):a[t].isChecked=!0}),c.value=a},k=()=>{i.value=!1,w.value=e.multiple?b.value:q(b.value)?{}:b.value[0],r.value="",(async()=>{if(e.required&&q(w.value))return d.value="This field is required";if("function"==typeof e.validate){const a=await e.validate(w.value);a&&a.length&&(d.value=a.join(", "))}d.value=""})()},x=()=>{e.disabled||(i.value=!0,d.value="")},z=()=>{r.value="",t.value=void 0,c.value.forEach(e=>e.isChecked=!1)};return o(()=>e.value,()=>C()),o([r,()=>e.options,()=>e.asyncOptions],async()=>{await S(),C()}),s(async()=>{await S(),C(),addEventListener("click",e=>{!e.target.closest(".inner-input-box")&&i.value&&k()})}),A(()=>removeEventListener("click",e=>console.log(e))),()=>[e.label&&u(f,{class:"ion-padding-bottom bold"},e.label),u("div",{class:`outer-input-box box-input ${p.value} ${g.value}`},u("div",{class:"inner-input-box"},[u("div",{style:{display:"flex",flexWrap:"wrap",width:"100%"},onClick:x},[...b.value.map(a=>u(B,[u(f,a.label),u(v,{icon:I,color:"danger",onClick:()=>(a=>e.multiple?a.isChecked=!1:t.value=void 0)(a),style:{zIndex:90}})])),u(y,{disabled:e.disabled,placeholder:m.value?e.placeholder:"",class:"search-input",value:r.value,onIonInput:e=>r.value=e.target.value})]),i.value&&u("div",{class:"input-options"},u(O,c.value.map((a,l)=>u(h,{lines:l+1===c.value.length?"none":void 0,onClick:()=>(a=>{if(!e.multiple)return t.value=a,k();w.value=e.multiple?b.value:q(b.value)?{}:b.value[0],r.value=""})(a)},[e.multiple&&u(F,{class:"input-option-checkbox",slot:"start",value:a.isChecked,onIonInput:e=>a.isChecked=e.target.checked}),u(f,a.label)])))),u("div",{class:"input-icon"},[(r.value||b.value.length)&&u(v,{icon:P,onClick:z}),u(v,{icon:i.value?j:D,onClick:i.value?k:x})].filter(Boolean))])),d.value&&u($,{color:"danger"},d.value)]}}),U=t({props:{range:{type:Object,default:()=>({startDate:"",endDate:""})}},emits:["rangeChange"],setup(e,{emit:a}){const t=l(e.range.startDate),i=l(e.range.endDate),s=n(()=>({startDate:t.value,endDate:i.value}));return o(s,e=>a("rangeChange",e)),()=>u(d,{class:"ion-no-padding ion-no-margin"},()=>u(r,[u(c,{size:"6"},()=>u(y,{type:"date",class:"box-input",value:t.value,onIonInput:e=>t.value=e.target.value,style:{width:"100%"}})),u(c,{size:"1",style:{display:"flex",justifyContent:"center "}},()=>u(v,{icon:L,style:{fontSize:"24px",padding:".5rem"}})),u(c,{size:"5"},()=>u(y,{type:"date",class:"box-input",value:i.value,onIonInput:e=>i.value=e.target.value,style:{width:"100%"}}))]))}});e("D",t({name:"DataTable",props:{rows:{type:Array,default:()=>[]},asyncRows:{type:Function,required:!1},columns:{type:Array,default:()=>[]},actionsButtons:{type:Array,default:()=>[]},rowActionsButtons:{type:Array,default:()=>[]},customFilters:{type:Array,default:()=>[]},color:{type:String},config:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1}},emits:["customFilter","queryChange","drilldown"],setup(e,{emit:t,slots:A}){var B,I,O,F,P,j,D,$,L,W,M,T,G,J,Q,H;const K=l(!1),V=l([]),X=l([]),Y=n(()=>X.value.length),Z=n(()=>q(e.rowActionsButtons)?ee.value.length:ee.value.length+1),_=n(()=>ae.pagination.enabled?N(ae.pagination.start,ae.pagination.end+1):[]),ee=n(()=>e.config.showIndices?[{path:"index",label:"#",initialSort:!0,initialSortOrder:"asc"},...e.columns]:e.columns),ae=i({search:"",sort:[],pagination:{enabled:null===(B=null===(I=e.config)||void 0===I||null===(I=I.pagination)||void 0===I?void 0:I.enabled)||void 0===B||B,page:null!==(O=null===(F=e.config)||void 0===F||null===(F=F.pagination)||void 0===F?void 0:F.page)&&void 0!==O?O:1,pageSize:null!==(P=null===(j=e.config)||void 0===j||null===(j=j.pagination)||void 0===j?void 0:j.pageSize)&&void 0!==P?P:10,start:null!==(D=null===($=e.config)||void 0===$||null===($=$.pagination)||void 0===$?void 0:$.start)&&void 0!==D?D:1,end:null!==(L=null===(W=e.config)||void 0===W||null===(W=W.pagination)||void 0===W?void 0:W.end)&&void 0!==L?L:1,totalPages:null!==(M=null===(T=e.config)||void 0===T||null===(T=T.pagination)||void 0===T?void 0:T.totalPages)&&void 0!==M?M:1,visibleBtns:null!==(G=null===(J=e.config)||void 0===J||null===(J=J.pagination)||void 0===J?void 0:J.visibleBtns)&&void 0!==G?G:7,pageSizeOptions:null!==(Q=null===(H=e.config)||void 0===H||null===(H=H.pagination)||void 0===H?void 0:H.pageSizeOptions)&&void 0!==Q?Q:[5,10,20,50,100]}}),te=l([]),le=n(()=>!1!==e.config.showSearchField||e.customFilters.length>0||e.actionsButtons.length>0),ne=i(e.customFilters.reduce((e,a)=>(e[a.id]=a.value,e),{})),ie=async()=>{K.value=!0,V.value=await async function(e,a=!1,t){let l=e;return"function"==typeof t&&(l=await t()),a?l.map((e,a)=>({...e,index:a+1})):l}(e.rows,e.config.showIndices||!1,e.asyncRows),ae.sort=ee.value.reduce((e,a)=>(a.initialSort&&e.push({column:a,order:a.initialSortOrder||"asc"}),e),[]),oe(ae.pagination),K.value=!1},oe=(e,a,t)=>{ae.search=null!=a?a:"",t&&(ae.sort=function(e,a){const t=e.findIndex(e=>e.column.path===a.path);return t>=0?e[t].order="asc"===e[t].order?"desc":"asc":e=[{column:a,order:"asc"}],e}(ae.sort,t));const l=(n=V.value,!(i=ae.search)||q(n)?n:n.slice().filter(e=>Object.values(e).some(e=>e&&JSON.stringify(e).toLowerCase().includes(i.toLowerCase()))));var n,i;X.value=E(l,ae.sort),ae.pagination.enabled?(ae.pagination=function(e,a,t){return e.totalPages=Math.ceil(a/e.pageSize),e.totalPages<=e.visibleBtns?(e.start=1,e.end=e.totalPages,e):!t.includes(e.page-1)&&1!==e.page||!t.includes(e.page+1)&&e.page!==e.totalPages?(e.start=1===e.page?1:e.page-1,e.end=e.start+e.visibleBtns-5,e.start<=3&&(e.end+=3-e.start,e.start=1),e.end>=e.totalPages-2&&(e.start-=e.end-(e.totalPages-2),e.end=e.totalPages),e.start=Math.max(e.start,1),e):e}(e,Y.value,_.value),te.value=function(e,a){if(q(e))return e;const{page:t,pageSize:l}=a,n=(t-1)*l;return e.slice(n,n+l)}(X.value,ae.pagination)):te.value=X.value};o(ne,()=>{!1===e.config.showSubmitButton&&t("customFilter",ne)},{immediate:!0,deep:!0}),o(()=>e.rows,()=>ie(),{deep:!0,immediate:!0}),s(()=>ie());const se=()=>e.customFilters.map(e=>{if(e.slotName&&A[e.slotName]){const a=A[e.slotName];return u(c,{size:`${e.gridSize||"3"}`},()=>a&&a({filter:e}))}return"dateRange"===e.type?(e=>u(c,{size:`${e.gridSize}`||"6"},()=>u(U,{range:n(()=>e.value||{startDate:"",endDate:""}).value,onRangeChange:async a=>{"function"==typeof e.onUpdate&&e.onUpdate(a),ne[e.id]=a}})))(e):"select"===e.type?(e=>u(c,{size:`${e.gridSize}`||"3"},()=>u(R,{options:e.options,placeholder:e.label||e.placeholder||"Select Item",value:e.value,multiple:e.multiple,onSelect:a=>{"function"==typeof e.onUpdate&&e.onUpdate(a),ne[e.id]=a}})))(e):(e=>u(c,{size:"4"},()=>u(y,{class:"box",type:e.type,placeholder:e.placeholder,value:n(()=>e.value||"").value,onIonInput:async a=>{const t=a.target.value;"function"==typeof e.onUpdate&&e.onUpdate(t),ne[e.id]=t}})))(e)}),ue=()=>le.value&&u(d,{style:{width:"100%",fontWeight:500}},()=>u(r,[u(c,{size:"7"},()=>u(r,[!1!==e.config.showSearchField?u(c,{size:"4"},()=>[u(w,{placeholder:"search here...",class:"box ion-no-padding",value:ae.search,onIonInput:e=>oe({...ae.pagination,page:1},e.target.value)})]):null,...se(),e.customFilters.length>0&&!1!==e.config.showSubmitButton?u(c,{size:"2"},()=>[u(g,{color:"primary",class:"ion-no-margin",onClick:()=>t("customFilter",ne)},"Submit")]):null])),u(c,{size:"5",class:"ion-padding-end"},()=>e.actionsButtons.map(e=>{var a;return u(g,{class:"ion-float-right",color:e.color||"primary",size:null!==(a=e.size)&&void 0!==a?a:"default",onClick:()=>e.action(te.value,V.value,ae,ee.value)},e.icon?u(v,{icon:e.icon}):e.label)}))])),re=()=>{const{page:e,start:a,end:t,totalPages:l}=ae.pagination,n=e=>oe({...ae.pagination,page:e}),i=[ce({icon:C,disabled:e===a,onClick:()=>n(e-1)})];return a>3&&(i.push(ce({label:"1",onClick:()=>n(1)})),i.push(ce({label:"...",disabled:!0}))),_.value.forEach(e=>{i.push(ce({label:e,onClick:()=>n(e)}))}),t<l-2&&(i.push(ce({label:"...",disabled:!0})),i.push(ce({label:l,onClick:()=>n(l)}))),i.push(ce({icon:p,disabled:e===t||q(X.value),onClick:()=>n(e+1)})),i},ce=({disabled:e,label:a,icon:t,onClick:l})=>u(g,{onClick:l,disabled:e,size:"small",color:ae.pagination.page===a?"primary":"light"},t?u(v,{icon:t}):a||"Button"),de=()=>u(h,{class:"box go-to-input ion-hide-xl-down",lines:"none"},[u(f,{class:"ion-margin-end"},"Go to page"),u(y,{type:"number",min:1,max:ae.pagination.totalPages,value:ae.pagination.page,style:{paddingRight:"15px"},debounce:500,onIonChange:e=>{const a=e.target.value;a>0&&a<=ae.pagination.totalPages&&oe({...ae.pagination,page:a})}})]),pe=()=>u(h,{class:"box per-page-input",lines:"none"},[u(f,"Items per page"),u(b,{value:ae.pagination.pageSize,onIonChange:e=>oe({...ae.pagination,pageSize:e.target.value,page:1})},[...ae.pagination.pageSizeOptions.map(e=>u(m,{value:e,key:e},e)),u(m,{value:Y.value},"All")])]),ve=()=>u(c,{size:"4",class:"pagination-info"},n(()=>function(e,a){const{page:t,pageSize:l,totalPages:n}=e;return a?`Showing ${t*l-(l-1)} to ${t===n?a:t*l} of ${a} entries`:"No data available"}(ae.pagination,Y.value)).value),ge=e=>{const a=n(()=>{const a=ae.sort.find(a=>a.column.path===e.path);return a?"asc"==a.order?x:z:k});return u(v,{icon:a.value,style:{marginRight:"5px",float:"right",cursor:"pointer"}})},fe=e=>{var a;const t={minWidth:/index/i.test(e.path)?"80px":"190px",...e.thStyles};return u("th",{key:e.label,style:t,class:null===(a=e.thClasses)||void 0===a?void 0:a.join(" "),onClick:()=>oe(ae.pagination,ae.search,e)},[u("span",e.label),!1!==e.sortable&&ge(e)])},ye=()=>N(0,9).map(e=>u("tr",{key:e},u("td",{colspan:Z.value},u(S,{animated:!0,style:{width:"100%"}})))),he=()=>u("tr",u("td",{colspan:Z.value},u("div",{class:"no-data-table"},"No data available"))),be=()=>te.value.map((a,t)=>u("tr",{key:a,onClick:()=>(async(a,t)=>{const l=e.rowActionsButtons.find(e=>e.default);l&&await l.action(a,t)})(a,t)},[...me(a),Se(a,t)])),me=e=>ee.value.map((a,t)=>{var l;const n=["data-cell",...null!==(l=a.tdClasses)&&void 0!==l?l:[]].join(" ");return u("td",{key:t,class:n,style:a.tdStyles},we(e,a))}),we=(e,l)=>{let n=a(e,l.path);return"function"==typeof l.formatter&&n&&(n=l.formatter(n,e)),function(e,a,t){return"function"==typeof e.drillable?e.drillable(a,t):!!e.drillable&&!q(a)}(l,n,e)?u("a",{onClick:()=>t("drilldown",{column:l,row:e})},Ce(n)):Ce(n)},Ce=e=>Array.isArray(e)?e.length:e,Se=(a,t)=>q(e.rowActionsButtons)?null:u("td",e.rowActionsButtons.map(e=>"function"!=typeof e.condition||e.condition(a)?ke(a,t,e):null)),ke=(e,a,t)=>{var l;return u(g,{key:t.icon,size:null!==(l=t.size)&&void 0!==l?l:"small",color:t.color||"primary",onClick:()=>t.action(e,a)},t.icon?u(v,{icon:t.icon}):t.label||"Button")};return()=>[ue(),u("div",{class:"responsive-table ion-padding-horizontal"},u("table",{class:"table bordered-table striped-table"},[u("thead",{class:e.color||""},u("tr",[...ee.value.map(e=>fe(e)),!q(e.rowActionsButtons)&&u("th","Actions")])),u("tbody",{class:"table-body"},K.value||e.loading?ye():q(X.value)?he():be())])),ae.pagination.enabled&&ae.pagination.totalPages>1&&u(d,{style:{width:"100%",textAlign:"left",color:"black"},class:"ion-padding"},()=>u(r,[u(c,{size:"4"},()=>re()),u(c,{size:"5",class:"text-center"},()=>[de(),pe()]),u(c,{size:"3"},()=>ve())]))]}}))}}});
