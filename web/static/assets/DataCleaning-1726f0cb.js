import{l as b}from"./loader-7aea5113.js";import{d as S,r as h,aj as R,h as m,ak as B,_ as A,N as $,j as N,o as O}from"./index-f1e5fa33.js";import{_ as T}from"./ReportTable.vue_vue_type_style_index_0_lang-f0432123.js";import{C as n,D as G}from"./data_cleaning_report_service-8ebc77b8.js";import{t as p}from"./Strs-0c962638.js";import{p as f}from"./common-abc2f84d.js";import{t as o}from"./his_date-4bcc965c.js";import"./exports-b20d243f.js";import"./index-df3a20fe.js";import"./vue-datepicker-46e39df1.js";import"./toasts-d1d3b45b.js";import"./DrilldownTable-83ed38cd.js";import"./arrays-1b521787.js";import"./report_service-70b27c4c.js";import"./url-ffe761c9.js";const j=S({name:"DataCleaning",components:{BaseReportTable:T},setup(){const e=h([]),r=R({}),c=m(()=>"Data Cleaning Tools ".concat((r==null?void 0:r.value)||"")),s=h("-"),u=t=>t.column.path,l=[{path:"arv_number",label:"ARV Number",preSort:f,initialSort:!0},{path:"given_name",label:"First Name"},{path:"family_name",label:"Last Name"}],i=[{path:"arv_number",label:"ARV Number",preSort:f,initialSort:!0},{path:"filling_number",label:"Filling Number"},{path:"outcome",label:"Outcome"},{path:"outcome_date",label:"Outcome Date",formatter:o},{path:"dispensation_visit_date",label:"Last Dispensation Date",formatter:o}],D=m(()=>{switch(r.value){case n.ActiveClientsWithAdverseOutcomes:return i;case n.MalesWithFemaleObs:return[...l,{path:"gender",label:"Gender",formatter:p},{path:"birthdate",label:"Date of Birth",formatter:o},{path:"visit_date",label:"Visit Date",formatter:t=>{const a=t.split(",");return a.length>1?"".concat(a.length," visits dates"):o(t)},drillable:t=>/visits/i.test(t)}];case n.StartDateLessThanDob:return[...l,{path:"gender",label:"Gender",formatter:p},{path:"birthdate",label:"Date of Birth",formatter:o},{path:"art_start_date",label:"Start Date",formatter:o}];default:return[...l,{path:"gender",label:"Gender",formatter:p},{path:"birthdate",label:"Date of Birth",formatter:o}]}}),g=[...l,{path:"visit_date",label:"Visit Date",formatter:o}],w=async t=>t.row.visit_date.split(",").map(a=>({...t.row,person_id:t.row.patient_id,visit_date:a})),v=async t=>{var d;await b.show();const a=new G;a.setStartDate(t.dateRange.startDate),a.setEndDate(t.dateRange.endDate),Object.assign(r,t.tool),s.value=a.getDateIntervalPeriod(),e.value=(d=await a.getCleaningToolReport(r.value))!=null?d:[],await b.hide()},_=[{label:"Show",action:t=>{B.push("/patient/".concat(t.patient_id))}}],C=m(()=>[{id:"tool",label:"Select Cleaning Tool",type:"select",value:r,gridSize:5,options:Object.values(n).map(t=>({label:t.toLowerCase(),value:t}))}]);return{period:s,title:c,rows:e,columns:D,rowActionBtns:_,filters:C,drillColumns:g,fetchData:v,getDrilldownTitle:u,onDrillRowParser:w}}});function y(e,r,c,s,u,l){const i=$("base-report-table");return O(),N(i,{title:e.title,"report-icon":"clean.jpg",period:e.period,columns:e.columns,rows:e.rows,rowActionButtons:e.rowActionBtns,"custom-filters":e.filters,useDateRangeFilter:"","drill-title":e.getDrilldownTitle,"drill-row-parser":e.onDrillRowParser,"custom-drill-columns":e.drillColumns,onGenerate:e.fetchData},null,8,["title","period","columns","rows","rowActionButtons","custom-filters","drill-title","drill-row-parser","custom-drill-columns","onGenerate"])}const U=A(j,[["render",y]]);export{U as default};
