System.register(["./loader-legacy-0c2d8630.js","./ReportTable.vue_vue_type_style_index_0_lang-legacy-57e2aac3.js","./toasts-legacy-37d9fa20.js","./patient_identifier_service-legacy-9ce364f9.js","./index-legacy-6e0b53b7.js","./DrilldownTable-legacy-cea9530a.js","./patient_service-legacy-598d7063.js","./Strs-legacy-b5721578.js","./his_date-legacy-536d995b.js","./dde-legacy-ae24a906.js","./exports-legacy-a1d0418b.js","./index-legacy-b04b5597.js","./vue-datepicker-legacy-d058c146.js","./common-legacy-e8d6ba88.js","./arrays-legacy-86abe4a8.js","./datatable-legacy-af1e89d6.js","./Date-legacy-8c51619c.js"],function(e,t){"use strict";var a,l,i,n,s,r,o,c,u,d,p,y,v,g,f,h,_,m,j;return{setters:[e=>{a=e.l},e=>{l=e._},e=>{i=e.t,n=e.a},e=>{s=e.P},e=>{r=e.d,o=e.g,c=e.i,u=e.j,d=e.k,p=e.J,y=e.al,v=e.am,g=e.o},e=>{f=e.D},e=>{h=e.P},e=>{_=e.t},e=>{m=e.t},e=>{j=e.d},null,null,null,null,null,null,null],execute:function(){e("default",r({__name:"ViewDuplicates",setup(e){const t=p([]),r=o(),w=p(),b=new s,D=p([]),I=[{path:"identifier",label:"Identifier"},{path:"count",label:"Count"}],x=c(()=>[{id:"identifier",label:"Select Identifier type",type:"select",gridSize:5,options:D.value}]),F=[{label:"View Patients",action:e=>{var t,l,s,o;const c=p([]),u=`Patients with ${null===(t=w.value)||void 0===t?void 0:t.label}: ${e.identifier}`,d=[{path:"person.names[0].given_name",label:"First Name"},{path:"person.names[0].family_name",label:"Last Name"},{path:"person.gender",label:"Gender",formatter:_},{path:"person.birthdate",label:"Date of Birth",formatter:m}],g=[{label:"View",action:e=>r.push(`/patients/${e.patient_id}`)}];return(null===(l=w.value)||void 0===l?void 0:l.value)===y&&j.value&&g.push({label:"Re-assign",action:async e=>{try{return await b.reassignNPID(e.patient_id),n("Identifier re-assigned successfully"),r.push(`/patients/${e.patient_id}`)}catch(t){console.error(t),i("Failed to re-assign identifier")}}}),a.show(),h.findByOtherID(null!==(s=null===(o=w.value)||void 0===o?void 0:o.value)&&void 0!==s?s:-1,e.identifier).then(e=>{var t;a.hide(),c.value.push(...null!==(t=e.data)&&void 0!==t?t:[])}).catch(e=>{i("Failed to load patients"),console.error(e)}),v.show(f,{title:u,columns:d,rows:c.value,rowActionButtons:g})}}];async function P({identifier:e}){try{var l;a.show(),w.value=e,t.value=null!==(l=await b.getDuplicateIndentifiers(e.value))&&void 0!==l?l:[]}catch(n){i("Failed to load report data"),console.error(n)}finally{a.hide()}}return u(async()=>{try{const e=await b.getIdentifierTypes();D.value=e.map(e=>({label:e.name,value:e.patient_identifier_type_id,other:e}))}catch(e){console.error(e),i("Failed to load identifier types")}}),(e,a)=>(g(),d(l,{title:"Duplicates Identifiers",columns:I,rows:t.value,"custom-filters":x.value,"row-action-buttons":F,onGenerate:P},null,8,["rows","custom-filters"]))}}))}}});
