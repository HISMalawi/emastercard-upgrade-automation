System.register(["./arrays-legacy-681d874a.js","./report_service-legacy-47f517b9.js","./age_groups-legacy-5143fd58.js","./toasts-legacy-4bd31a3d.js"],(function(e,t){"use strict";var r,a,s,n;return{setters:[e=>{r=e.s},e=>{a=e.R},e=>{s=e.A},e=>{n=e.i}],execute:function(){e("a",{"3HP_new":"3H (Started New on ART)","6H_new":"6H (Started New on ART)","3HP_prev":"3H (Started Previously on ART)","6H_prev":"6H (Started Previously on ART)"});const t=e("b",{started_tpt_new:"Started TPT (New on ART)",started_tpt_prev:"Started TPT (Previous on ART)",completed_tpt_new:"Completed TPT(New on ART)",completed_tpt_prev:"Completed TPT(Previous on ART)",not_completed_tpt:"Not completed TPT",died:"Died",defaulted:"Defaulted",stopped:"Stopped ART",transfer_out:"Transfered Out",confirmed_tb:"Confirmed TB",pregnant:"Pregnant",breast_feeding:"Breastfeeding",skin_rash:"Skin rash",peripheral_neuropathy:"Peripheral neuropathy",yellow_eyes:"Yellow eyes",nausea:"Nausea",dizziness:"Dizziness"});e("T",class extends a{constructor(){super()}async getTtpOutcomes(){var e;const t=null!==(e=await this.getReport(`programs/${this.programId}/reports/tpt_outcome`))&&void 0!==e?e:[],a=this.aggregateTptOutcomes(t),s=this.getTotalTptOutcomeFemales(a.females);return[...r(this.tptOutcomesBuilder(t),"tpt_type"),{age_group:"All",tpt_type:"M",...a.males},...s]}async getCohort(){const e=await this.getReport("moh_tpt");return r(null!=e?e:[],"gender")}async getTptNewInitiations(){return this.tptInitiationBuilder(await this.getReport(`programs/${this.programId}/reports/tpt_newly_initiated`))}tptOutcomesBuilder(e){return e.map((e=>Object.entries(e).reduce(((e,[t,r])=>(e[t]="string"==typeof r?r:r.map((({patient_id:e})=>e)),e)),{})))}getTotalTptOutcomeFemales(e){return["FP","FNP","FBf"].map((r=>{const a={age_group:"All",tpt_type:r};for(const s in t)a[s]=e[s].filter((t=>"FP"===r?e.pregnant.includes(t):"FBf"===r?e.breast_feeding.includes(t):![...e.pregnant,e.breast_feeding].includes(t)));return a}))}aggregateTptOutcomes(e){return e.reduce(((e,r)=>{for(const a in t)a in e.males||(e.males[a]=[]),a in e.females||(e.females[a]=[]),n(r[a])||r[a].forEach((t=>{"F"===t.gender?e.females[a].push(t.patient_id):e.males[a].push(t.patient_id)}));return e}),{males:{},females:{}})}aggregateTptInitiationData(e,t,r,a){var s;a[e].aggregate[t]=[...null!==(s=a[e].aggregate[t])&&void 0!==s?s:[],...r]}tptInitiationBuilder(e={}){return s.reduce(((t,r)=>{const a=Object.entries(e[r]).reduce(((e,[r,a])=>(this.aggregateTptInitiationData("M",r,a.M,t),this.aggregateTptInitiationData("F",r,a.F,t),e.M[r]=a.M,e.F[r]=a.F,e)),{M:{gender:"M",location:e.Location,ageGroup:r},F:{gender:"F",location:e.Location,ageGroup:r}});return t.F.rows.push(a.F),t.M.rows.push(a.M),t}),{M:{rows:[],aggregate:{}},F:{rows:[],aggregate:{}}})}})}}}));
