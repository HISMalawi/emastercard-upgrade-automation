System.register(["./index-legacy-91295254.js","./image-legacy-0b5f9ca9.js","./toasts-legacy-ec8222ac.js","./PasswordUpdate-legacy-2a26ec6c.js","./TextInput-legacy-b45439a0.js","./his_date-legacy-87db423b.js","./form-legacy-0888a85c.js","./Strs-legacy-09248991.js","./loader-legacy-c82f4ab6.js"],(function(e,a){"use strict";var l,t,n,o,r,s,i,d,u,c,g,m,f,p,v,h,y,_,x,b,w,P,j,k,C,z,A,V,E,F,I,R,M,U,q,S,T;return{setters:[e=>{l=e.d,t=e.f,n=e.r,o=e.g,r=e.h,s=e.w,i=e.u,d=e.o,u=e.e,c=e.i,g=e.j,m=e.k,f=e.l,p=e.b,v=e.m,h=e.t,y=e.a,_=e.n,x=e.p,b=e.q,w=e.I,P=e.s,j=e.v,k=e.c,C=e.x,z=e.y,A=e.z,V=e.A,E=e.B,F=e.C,I=e.D,R=e.E,M=e.F,U=e._},e=>{q=e.r},e=>{S=e.t},e=>{T=e.u},null,null,null,null,null],execute:function(){var a=document.createElement("style");a.textContent=".title[data-v-fc1b88ee]{text-align:center;font-size:68px;font-weight:700;margin:8vh 1px 0}.sub-title[data-v-fc1b88ee]{text-align:center!important;font-size:24px;margin-bottom:20px}.hero-image[data-v-fc1b88ee]{display:block;width:55%;margin:5px auto}.footer-section[data-v-fc1b88ee]{position:absolute;width:100%;bottom:0;left:0;padding-right:1rem;padding-left:1rem}.avatar[data-v-fc1b88ee]{font-size:8vw;margin:10vh 1px 0}.form-section[data-v-fc1b88ee]{background:#2839ad;color:#fff;text-align:center;height:100vh;padding:38px 18px}.brand-logo-pepfar[data-v-fc1b88ee]{width:80px}.brand-logo-moh[data-v-fc1b88ee]{width:90px}\n",document.head.appendChild(a);const D=["src"],K=["src"],B=["src"],L={key:0};e("default",U(l({__name:"login",setup(e){const{fullVersion:a}=I(),{facility:l,loadFacilityCode:U}=R(),N=t(),Y=N.currentRoute.value.redirectedFrom,Z=n(""),$=n(""),G=T();o().resetIdleTimer();const H=async()=>{try{if(!Z.value||!$.value)return S("Invalid login details");const e=await M.login(Z.value,$.value);e.ok?(G.setCurrentPassword($.value),await G.canChangePassword()&&await G.changePasswaord(),U(),N.push(null!=Y?Y:"/")):S(e.errorMessage)}catch(e){S("An error occurred while logging in"),console.error(e)}};return(e,t)=>(d(),r(i(F),null,{default:s((()=>[u(i(E),null,{default:s((()=>[u(i(c),{style:{margin:"0",padding:"0"}},{default:s((()=>[u(i(g),null,{default:s((()=>[u(i(m),{size:"8"},{default:s((()=>[u(i(f),{class:"title"},{default:s((()=>t[2]||(t[2]=[p("E-MASTERCARD APP")]))),_:1}),u(i(v),{class:"sub-title"},{default:s((()=>[p(h(i(a)),1)])),_:1}),y("img",{src:i(q)("report.png"),class:"hero-image"},null,8,D),u(i(_),{class:"footer-section"},{default:s((()=>[u(i(x),null,{default:s((()=>[y("span",null,[y("img",{id:"coat",src:i(q)("login-logos/Malawi-Coat_of_arms_of_arms.png"),alt:"Malawi Coat of Arms logo",class:"brand-logo-moh"},null,8,K),y("img",{id:"pepfar",src:i(q)("login-logos/PEPFAR.png"),alt:"PEPFAR logo",class:"brand-logo-pepfar"},null,8,B)]),u(i(b),{class:"his-sm-text",slot:"end",lines:"none"},{default:s((()=>[u(i(w),{color:"dark",fill:"outline",size:"large",slot:"end","router-link":"/settings/network"},{default:s((()=>t[3]||(t[3]=[p(" Network ")]))),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),u(i(m),{size:"4",class:"form-section"},{default:s((()=>[u(i(P),{icon:i(j),class:"avatar"},null,8,["icon"]),i(l).name?(d(),k("h3",L,h(i(l).name)+" ("+h(i(l).district)+")",1)):C("",!0),t[5]||(t[5]=y("h4",null,"Please, log into your account",-1)),u(i(b),{style:{margin:"2rem 3.5rem"}},{default:s((()=>[u(i(z),{type:"text",placeholder:"Username",modelValue:Z.value,"onUpdate:modelValue":t[0]||(t[0]=e=>Z.value=e),onKeyup:A(H,["enter"]),min:5,required:""},null,8,["modelValue"])])),_:1}),u(i(b),{style:{margin:"2rem 3.5rem"}},{default:s((()=>[u(i(z),{type:"password",modelValue:$.value,"onUpdate:modelValue":t[1]||(t[1]=e=>$.value=e),placeholder:"Password",onKeyup:A(H,["enter"]),max:100,min:5,required:""},null,8,["modelValue"])])),_:1}),u(i(w),{expand:"full",size:"large",style:{margin:"2rem 3.5rem","text-transform":"none"},onClick:V(H,["prevent"])},{default:s((()=>t[4]||(t[4]=[p(" Login ")]))),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}))}}),[["__scopeId","data-v-fc1b88ee"]]))}}}));
