import{d as P,ac as T,o as g,g as _,w as o,e,u as t,j as i,I as b,b as d,i as I,f as A,E as p,a as v,Z as k,h as w,n as y,Q as N,A as z,B}from"./index-b34da4cb.js";import{l as c}from"./loader-d835876b.js";import{S as C}from"./SelectInput-3966d61d.js";import{T as V}from"./TextInput-6d943a31.js";import{i as H,r as x}from"./form-4b6e0e9a.js";import{i as E}from"./validations-b9fbcec4.js";import{t as U}from"./toasts-5a6b8805.js";import"./common-abc2f84d.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Strs-7ee8a435.js";const S=P({__name:"NetworkForm",emits:["submit"],setup($,{emit:m}){const f=m,u=[{label:"HTTP",value:"http"},{label:"HTTPS",value:"https"}],l=T({protocol:{value:"",label:"Select Protocol",required:!0},ipAddress:{value:"",label:"IP Address",placeholder:"Enter IP Address e.g. 127.0.0.1",required:!0,validation:async r=>E(r)},port:{value:"",label:"Port",placeholder:"Enter Port e.g. 3000",required:!0}}),s=async()=>{await H(l)&&f("submit",x(l).formData)};return(r,a)=>(g(),_(t(I),null,{default:o(()=>[e(t(i),{size:"12",class:"ion-margin-vertical"},{default:o(()=>[e(C,{modelValue:l.protocol,"onUpdate:modelValue":a[0]||(a[0]=n=>l.protocol=n),options:u},null,8,["modelValue"])]),_:1}),e(t(i),{size:"12",class:"ion-margin-vertical"},{default:o(()=>[e(V,{modelValue:l.ipAddress,"onUpdate:modelValue":a[1]||(a[1]=n=>l.ipAddress=n)},null,8,["modelValue"])]),_:1}),e(t(i),{size:"12",class:"ion-margin-vertical"},{default:o(()=>[e(V,{modelValue:l.port,"onUpdate:modelValue":a[2]||(a[2]=n=>l.port=n)},null,8,["modelValue"])]),_:1}),e(t(i),{size:"12",class:"ion-margin-vertical"},{default:o(()=>[e(t(b),{class:"ion-margin-top ion-float-right",color:"success",onClick:s},{default:o(()=>a[4]||(a[4]=[d("Submit")])),_:1}),e(t(b),{class:"ion-margin-top ion-float-right",onClick:a[3]||(a[3]=n=>r.$router.back())},{default:o(()=>a[5]||(a[5]=[d("Back")])),_:1})]),_:1})]),_:1}))}}),h={class:"his-card"},q={class:"his-card"},J=P({__name:"NetworkSettings",setup($){const m=A(),f=p.isLoggedIn(),u=async({protocol:l,ipAddress:s,port:r})=>{try{if(c.show(),p.setHost("".concat(l.value,"://").concat(s,":").concat(r)),!await p.apiOk())throw new Error("Unable to connect to: ".concat(l.value,"://").concat(s,":").concat(r));await c.hide(),m.back()}catch(a){await c.hide(),console.log(a),U("".concat(a)),localStorage.clear()}};return(l,s)=>t(f)?(g(),_(t(w),{key:0},{default:o(()=>[e(t(I),null,{default:o(()=>[e(t(i),{size:"10",offset:"1",class:"ion-padding"},{default:o(()=>[v("div",h,[e(t(k),{style:{"padding-left":"0"}},{default:o(()=>s[0]||(s[0]=[d("Network Settings / API Host configuration")])),_:1}),e(S,{onSubmit:u})])]),_:1})]),_:1})]),_:1})):(g(),_(t(B),{key:1},{default:o(()=>[e(t(N),null,{default:o(()=>[e(t(y),null,{default:o(()=>[e(t(k),null,{default:o(()=>s[1]||(s[1]=[d("Network Settings / API Host configuration")])),_:1})]),_:1})]),_:1}),e(t(z),null,{default:o(()=>[e(t(w),null,{default:o(()=>[e(t(I),null,{default:o(()=>[e(t(i),{size:"10",offset:"1",class:"ion-padding"},{default:o(()=>[v("div",q,[e(S,{onSubmit:u})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}});export{J as default};
