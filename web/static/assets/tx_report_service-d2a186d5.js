var R=Object.defineProperty;var _=(a,s,e)=>s in a?R(a,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[s]=e;var n=(a,s,e)=>(_(a,typeof s!="symbol"?s+"":s,e),e);import{g as T}from"./common-94ac9539.js";import{R as l}from"./report_service-1011140c.js";import{A as m}from"./age_groups-8203d13f.js";const h=["Died","IIT <3 mo","IIT 3-5 mo","IIT 6+ mo","Transferred out","Refused (Stopped)"],I={tx_curr:"TX_CURR",symptom_screen_alone:"Symptom Screen (alone)",cxr_screen:"CXR Screen",mwrd_screen:"mWRD Screen",sceen_pos_new:"New on ART/Screen Positive",sceen_neg_new:"New on ART/Screen Negative",sceen_pos_prev:"Already on ART/Screen Positive",sceen_neg_prev:"Already on ART/Screen Negative",started_tb_new:"Started TB RX_New on ART",started_tb_prev:"Started TB RX_Prev on ART"};class S extends l{constructor(){super();n(this,"reportType");n(this,"initialize");this.reportType="pepfar",this.initialize=!0}setReportType(e){this.reportType=e}setInitialize(e){this.initialize=e}getTxCurrMMDReport(e,t){return this.getReport("arv_refill_periods",{org:this.reportType,min_age:"".concat(e),max_age:"".concat(t),initialize_tables:"".concat(this.initialize)})}async getTxMlReport(e){const t=await this.getReport("tx_ml",{rebuild:e}),r=this.txMlReportBuilder(t),o=await this.buildMaternityAgreggateRows(r.F.aggregate);return[...r.F.rows,...r.M.rows,{ageGroup:"All",gender:"M",...r.M.aggregate},...o]}getTxRttReport(e){return this.getReport("tx_rtt",{rebuild:e})}getClinicTxRtt(e){return this.getReport("programs/".concat(this.programId,"/reports/clinic_tx_rtt"),{rebuild:e})}async getTxTbReport(e){return this.getReport("programs/".concat(this.programId,"/reports/tx_tb"),{rebuild_outcome:e})}getTxNewReport(e){return this.getReport("programs/".concat(this.programId,"/reports/tx_new"),{rebuild:e})}mapTxMlIndcators(e){return h.reduce((t,r,o)=>{var i;return t[r]=(i=e[o])!=null?i:[],t},{})}txMlReportBuilder(e){const t={M:{rows:[],aggregate:{}},F:{rows:[],aggregate:{}}};return m.forEach(r=>{["F","M"].forEach(o=>{const i=this.mapTxMlIndcators(T(e,"".concat(r,".").concat(o),[]));t[o].rows.push({ageGroup:r,gender:o,...i}),Object.entries(i).forEach(([p,c])=>{var g;t[o].aggregate[p]=[...(g=t[o].aggregate[p])!=null?g:[],...c]})})}),t}}export{S as T,h as a,I as b};
