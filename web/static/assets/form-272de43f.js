import{a as u}from"./Strs-7ee8a435.js";import{i as l}from"./common-abc2f84d.js";import{t as f}from"./toasts-505fc814.js";import{l as c}from"./loader-4f58724a.js";function w(e){return e.map(r=>({value:r,label:r}))}async function d(e){for(const r in e){const{required:o,value:a,validation:t}=e[r];if(o&&l(a)){e[r].error="This field is required";continue}if(typeof t=="function"){const n=await t(typeof a=="object"?a:{label:a,value:a},e);e[r].error=l(n)?"":n.join()}else e[r].error=""}return Object.values(e).every(({error:r})=>!r)}function y(e,r=!1){const o={},a={};for(const t in e){const{value:s,computedValue:n}=e[t];if(s){const i=r?u(t):t;o[i]=s,typeof n=="function"&&(a[i]=n(e[t].value,e))}}return{formData:o,computedFormData:a}}function h(e,r=""){const o=Object.values(e).filter(a=>a&&(a.tag===r||r==="")).reduce((a,t)=>{const s=t.obs?t.obs:t;return Array.isArray(s)?a=a.concat(s):a.push(s),a},[]);return Promise.all(o)}async function E(e,r,o){var t;if(!await d(e))return;const a=(t=o==null?void 0:o.showloader)!=null?t:!0;try{a&&await c.show();const{formData:s,computedFormData:n}=y(e,o==null?void 0:o.underscoreKeys);await r(s,n)}catch(s){f("".concat(s)),console.error("WELL HERE IS THE FAILURE",s)}finally{a&&await c.hide()}}export{h as a,d as i,y as r,E as s,w as t};
