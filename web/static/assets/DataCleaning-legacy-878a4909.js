System.register(["./loader-legacy-bf687919.js","./index-legacy-11525bd0.js","./ReportTable.vue_vue_type_style_index_0_lang-legacy-79fd4a0a.js","./data_cleaning_report_service-legacy-cc20583e.js","./Strs-legacy-b5721578.js","./common-legacy-e8d6ba88.js","./his_date-legacy-55fa139e.js","./exports-legacy-faa6a17d.js","./index-legacy-f4cad238.js","./vue-datepicker-legacy-bbe1f770.js","./toasts-legacy-7149d510.js","./DrilldownTable-legacy-a8ae302c.js","./arrays-legacy-86abe4a8.js","./report_service-legacy-f1e6c342.js","./url-legacy-3a6801d5.js"],function(e,t){"use strict";var a,l,r,i,o,s,n,c,u,d,p,m,g,b,h,v;return{setters:[e=>{a=e.l},e=>{l=e.d,r=e.r,i=e.aj,o=e.h,s=e.ak,n=e._,c=e.N,u=e.j,d=e.o},e=>{p=e._},e=>{m=e.C,g=e.D},e=>{b=e.t},e=>{h=e.p},e=>{v=e.t},null,null,null,null,null,null,null,null],execute:function(){const t=l({name:"DataCleaning",components:{BaseReportTable:p},setup(){const e=r([]),t=i({}),l=o(()=>`Data Cleaning Tools ${(null==t?void 0:t.value)||""}`),n=r("-"),c=[{path:"arv_number",label:"ARV Number",preSort:h,initialSort:!0},{path:"given_name",label:"First Name"},{path:"family_name",label:"Last Name"}],u=[{path:"arv_number",label:"ARV Number",preSort:h,initialSort:!0},{path:"filling_number",label:"Filling Number"},{path:"outcome",label:"Outcome"},{path:"outcome_date",label:"Outcome Date",formatter:v},{path:"dispensation_visit_date",label:"Last Dispensation Date",formatter:v}],d=o(()=>{switch(t.value){case m.ActiveClientsWithAdverseOutcomes:return u;case m.MalesWithFemaleObs:return[...c,{path:"gender",label:"Gender",formatter:b},{path:"birthdate",label:"Date of Birth",formatter:v},{path:"visit_date",label:"Visit Date",formatter:e=>{const t=e.split(",");return t.length>1?`${t.length} visits dates`:v(e)},drillable:e=>/visits/i.test(e)}];case m.StartDateLessThanDob:return[...c,{path:"gender",label:"Gender",formatter:b},{path:"birthdate",label:"Date of Birth",formatter:v},{path:"art_start_date",label:"Start Date",formatter:v}];default:return[...c,{path:"gender",label:"Gender",formatter:b},{path:"birthdate",label:"Date of Birth",formatter:v}]}}),p=[...c,{path:"visit_date",label:"Visit Date",formatter:v}],_=[{label:"Show",action:e=>{s.push(`/patient/${e.patient_id}`)}}],f=o(()=>[{id:"tool",label:"Select Cleaning Tool",type:"select",value:t,gridSize:5,options:Object.values(m).map(e=>({label:e.toLowerCase(),value:e}))}]);return{period:n,title:l,rows:e,columns:d,rowActionBtns:_,filters:f,drillColumns:p,fetchData:async l=>{var r;await a.show();const i=new g;i.setStartDate(l.dateRange.startDate),i.setEndDate(l.dateRange.endDate),Object.assign(t,l.tool),n.value=i.getDateIntervalPeriod(),e.value=null!==(r=await i.getCleaningToolReport(t.value))&&void 0!==r?r:[],await a.hide()},getDrilldownTitle:e=>e.column.path,onDrillRowParser:async e=>e.row.visit_date.split(",").map(t=>({...e.row,person_id:e.row.patient_id,visit_date:t}))}}});e("default",n(t,[["render",function(e,t,a,l,r,i){const o=c("base-report-table");return d(),u(o,{title:e.title,"report-icon":"clean.jpg",period:e.period,columns:e.columns,rows:e.rows,rowActionButtons:e.rowActionBtns,"custom-filters":e.filters,useDateRangeFilter:"","drill-title":e.getDrilldownTitle,"drill-row-parser":e.onDrillRowParser,"custom-drill-columns":e.drillColumns,onGenerate:e.fetchData},null,8,["title","period","columns","rows","rowActionButtons","custom-filters","drill-title","drill-row-parser","custom-drill-columns","onGenerate"])}]]))}}});
