System.register(["./index-legacy-27718e38.js"],function(e,t){"use strict";var a,n,l,o,i,s,r,u,c,d,p,v,g,f,y,h,m,b,w,C,S,k,z,x,A,B,I,P,O,F,j,E,L,D;return{setters:[e=>{a=e.d,n=e.r,l=e.h,o=e.aj,i=e.a8,s=e.i,r=e.ax,u=e.m,c=e.n,d=e.l,p=e.br,v=e.y,g=e.I,f=e.L,y=e.B,h=e.x,m=e.bs,b=e.bt,w=e.ap,C=e.bu,S=e.bv,k=e.bw,z=e.bx,x=e.by,A=e.av,B=e.ai,I=e.bz,P=e.W,O=e.aB,F=e.aF,j=e.bA,E=e.Q,L=e.aA,D=e.bB}],execute:function(){function t(e,t){if(null==e)return;const a=t.replace(/\[(\w+)\]/g,".$1").split(".");let n=e;for(const l of a){if(null==n)return;n=n[l]}return n}function q(e){return null==e||("string"==typeof e||Array.isArray(e)?0===e.length:"object"==typeof e&&0===Object.keys(e).length)}function N(e,a){if(q(a))return e;const n=a.map(({order:e})=>e),l=a.map(({column:e})=>a=>{let n=t(a,e.path);return q(n)?"":("function"==typeof e.preSort&&(n=e.preSort(n)),"number"==typeof n||e.sortCaseSensitive?n:n.toString().toLowerCase())});return function(e,t,a){return Array.isArray(e)?e.length<=1?[...e]:[...e].sort((e,n)=>{for(let l=0;l<t.length;l++){const o=t[l],i=a[l],s=o(e),r=o(n);if(s!==r)return"asc"===i?s<r?-1:1:s>r?-1:1}return 0}):[]}(e.slice(),l,n)}function $(e,t){const a=[];for(let n=e;n<t;n++)a.push(n);return a}e("s",N);const R=a({name:"SelectInput",props:{value:{type:Object,default:()=>({})},label:{type:String,default:""},placeholder:{type:String,default:"Select Option"},options:{type:Array,default:()=>[]},asyncOptions:{type:Function,required:!1},disabled:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},required:{type:Boolean,default:!1},validate:{type:Function,required:!1}},emits:["select"],setup(e,{emit:t}){const a=n(),o=n(!1),u=n(""),c=n([]),d=n(""),p=l(()=>d.value?"box-input-error":""),g=l(()=>e.label?"ion-margin-top":""),m=l(()=>e.multiple?c.value.filter(({isChecked:e})=>e):a.value?[a.value]:[]),b=l(()=>!u.value&&q(m.value)&&!o.value),w=l({get:()=>e.value,set:e=>t("select",e)}),C=()=>{a.value=void 0,q(w.value)||(Array.isArray(w.value)&&e.multiple&&w.value.forEach(e=>{const t=c.value.findIndex(({value:t})=>t===e.value);-1===t?c.value.push({...e,isChecked:!0}):c.value[t].isChecked=!0}),a.value=c.value.find(e=>Array.isArray(w.value)?e.value===w.value[0].value:e.value===w.value.value),q(a.value)&&(a.value=Array.isArray(w.value)?w.value[0]:w.value))},S=async()=>{const t="function"==typeof e.asyncOptions?await e.asyncOptions(u.value):e.options.filter(({label:e})=>e.toLowerCase().includes(u.value.toLowerCase()));m.value.forEach(e=>{const a=t.findIndex(t=>t.value===e.value);-1===a?t.push(e):t[a].isChecked=!0}),c.value=t},k=()=>{o.value=!1,w.value=e.multiple?m.value:q(m.value)?{}:m.value[0],u.value="",(async()=>{if(e.required&&q(w.value))return d.value="This field is required";if("function"==typeof e.validate){const t=await e.validate(w.value);t&&t.length&&(d.value=t.join(", "))}d.value=""})()},z=()=>{e.disabled||(o.value=!0,d.value="")},x=()=>{u.value="",a.value=void 0,c.value.forEach(e=>e.isChecked=!1)};return i(()=>e.value,()=>C()),i([u,()=>e.options,()=>e.asyncOptions],async()=>{await S(),C()}),s(async()=>{await S(),C(),addEventListener("click",e=>{!e.target.closest(".inner-input-box")&&o.value&&k()})}),A(()=>removeEventListener("click",e=>console.log(e))),()=>[e.label&&r(f,{class:"ion-padding-bottom bold"},e.label),r("div",{class:`outer-input-box box-input ${p.value} ${g.value}`},r("div",{class:"inner-input-box"},[r("div",{style:{display:"flex",flexWrap:"wrap",width:"100%"},onClick:z},[...m.value.map(t=>r(B,[r(f,t.label),r(v,{icon:I,color:"danger",onClick:()=>(t=>e.multiple?t.isChecked=!1:a.value=void 0)(t),style:{zIndex:90}})])),r(y,{disabled:e.disabled,placeholder:b.value?e.placeholder:"",class:"search-input",value:u.value,onIonInput:e=>u.value=e.target.value})]),o.value&&r("div",{class:"input-options"},r(P,c.value.map((t,n)=>r(h,{lines:n+1===c.value.length?"none":void 0,onClick:()=>(t=>{if(!e.multiple)return a.value=t,k();w.value=e.multiple?m.value:q(m.value)?{}:m.value[0],u.value=""})(t)},[e.multiple&&r(O,{class:"input-option-checkbox",slot:"start",value:t.isChecked,onIonInput:e=>t.isChecked=e.target.checked}),r(f,t.label)])))),r("div",{class:"input-icon"},[(u.value||m.value.length)&&r(v,{icon:F,onClick:x}),r(v,{icon:o.value?j:E,onClick:o.value?k:z})].filter(Boolean))])),d.value&&r(L,{color:"danger"},d.value)]}}),U=a({props:{range:{type:Object,default:()=>({startDate:"",endDate:""})}},emits:["rangeChange"],setup(e,{emit:t}){const a=n(e.range.startDate),o=n(e.range.endDate),s=l(()=>({startDate:a.value,endDate:o.value}));return i(s,e=>t("rangeChange",e)),()=>r(d,{class:"ion-no-padding ion-no-margin"},()=>r(u,[r(c,{size:"6"},()=>r(y,{type:"date",class:"box-input",value:a.value,onIonInput:e=>a.value=e.target.value,style:{width:"100%"}})),r(c,{size:"1",style:{display:"flex",justifyContent:"center "}},()=>r(v,{icon:D,style:{fontSize:"24px",padding:".5rem"}})),r(c,{size:"5"},()=>r(y,{type:"date",class:"box-input",value:o.value,onIonInput:e=>o.value=e.target.value,style:{width:"100%"}}))]))}});e("D",a({name:"DataTable",props:{rows:{type:Array,default:()=>[]},asyncRows:{type:Function,required:!1},columns:{type:Array,default:()=>[]},actionsButtons:{type:Array,default:()=>[]},rowActionsButtons:{type:Array,default:()=>[]},customFilters:{type:Array,default:()=>[]},color:{type:String},config:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1}},emits:["customFilter","queryChange","drilldown"],setup(e,{emit:a,slots:A}){var B,I,P,O,F,j,E,L,D,M,T,W,H,G,J,Q;const K=n(!1),V=n([]),X=n([]),Y=l(()=>X.value.length),Z=l(()=>q(e.rowActionsButtons)?ee.value.length:ee.value.length+1),_=l(()=>te.pagination.enabled?$(te.pagination.start,te.pagination.end+1):[]),ee=l(()=>e.config.showIndices?[{path:"index",label:"#",initialSort:!0,initialSortOrder:"asc"},...e.columns]:e.columns),te=o({search:"",sort:[],pagination:{enabled:null===(B=null===(I=e.config)||void 0===I||null===(I=I.pagination)||void 0===I?void 0:I.enabled)||void 0===B||B,page:null!==(P=null===(O=e.config)||void 0===O||null===(O=O.pagination)||void 0===O?void 0:O.page)&&void 0!==P?P:1,pageSize:null!==(F=null===(j=e.config)||void 0===j||null===(j=j.pagination)||void 0===j?void 0:j.pageSize)&&void 0!==F?F:10,start:null!==(E=null===(L=e.config)||void 0===L||null===(L=L.pagination)||void 0===L?void 0:L.start)&&void 0!==E?E:1,end:null!==(D=null===(M=e.config)||void 0===M||null===(M=M.pagination)||void 0===M?void 0:M.end)&&void 0!==D?D:1,totalPages:null!==(T=null===(W=e.config)||void 0===W||null===(W=W.pagination)||void 0===W?void 0:W.totalPages)&&void 0!==T?T:1,visibleBtns:null!==(H=null===(G=e.config)||void 0===G||null===(G=G.pagination)||void 0===G?void 0:G.visibleBtns)&&void 0!==H?H:7,pageSizeOptions:null!==(J=null===(Q=e.config)||void 0===Q||null===(Q=Q.pagination)||void 0===Q?void 0:Q.pageSizeOptions)&&void 0!==J?J:[5,10,20,50,100]}}),ae=n([]),ne=l(()=>!1!==e.config.showSearchField||e.customFilters.length>0||e.actionsButtons.length>0),le=o(e.customFilters.reduce((e,t)=>(e[t.id]=t.value,e),{})),oe=async()=>{K.value=!0,V.value=await async function(e,t=!1,a){let n=e;return"function"==typeof a&&(n=await a()),t?n.map((e,t)=>({...e,index:t+1})):n}(e.rows,e.config.showIndices||!1,e.asyncRows),te.sort=ee.value.reduce((e,t)=>(t.initialSort&&e.push({column:t,order:t.initialSortOrder||"asc"}),e),[]),ie(te.pagination),K.value=!1},ie=(e,t,a)=>{te.search=null!=t?t:"",a&&(te.sort=function(e,t){const a=e.findIndex(e=>e.column.path===t.path);return a>=0?e[a].order="asc"===e[a].order?"desc":"asc":e=[{column:t,order:"asc"}],e}(te.sort,a));const n=(l=V.value,!(o=te.search)||q(l)?l:l.slice().filter(e=>Object.values(e).some(e=>e&&JSON.stringify(e).toLowerCase().includes(o.toLowerCase()))));var l,o;X.value=N(n,te.sort),te.pagination.enabled?(te.pagination=function(e,t,a){return e.totalPages=Math.ceil(t/e.pageSize),e.totalPages<=e.visibleBtns?(e.start=1,e.end=e.totalPages,e):!a.includes(e.page-1)&&1!==e.page||!a.includes(e.page+1)&&e.page!==e.totalPages?(e.start=1===e.page?1:e.page-1,e.end=e.start+e.visibleBtns-5,e.start<=3&&(e.end+=3-e.start,e.start=1),e.end>=e.totalPages-2&&(e.start-=e.end-(e.totalPages-2),e.end=e.totalPages),e.start=Math.max(e.start,1),e):e}(e,Y.value,_.value),ae.value=function(e,t){if(q(e))return e;const{page:a,pageSize:n}=t,l=(a-1)*n;return e.slice(l,l+n)}(X.value,te.pagination)):ae.value=X.value};i(le,()=>{!1===e.config.showSubmitButton&&a("customFilter",le)},{immediate:!0,deep:!0}),i(()=>e.rows,()=>oe(),{deep:!0,immediate:!0}),s(()=>oe());const se=()=>e.customFilters.map(e=>{if(e.slotName&&A[e.slotName]){const t=A[e.slotName];return r(c,{size:`${e.gridSize||"3"}`},()=>t&&t({filter:e}))}return"dateRange"===e.type?(e=>r(c,{size:`${e.gridSize}`||"6"},()=>r(U,{range:l(()=>e.value||{startDate:"",endDate:""}).value,onRangeChange:async t=>{"function"==typeof e.onUpdate&&e.onUpdate(t),le[e.id]=t}})))(e):"select"===e.type?(e=>r(c,{size:`${e.gridSize}`||"3"},()=>r(R,{options:e.options,placeholder:e.label||e.placeholder||"Select Item",value:e.value,multiple:e.multiple,onSelect:t=>{"function"==typeof e.onUpdate&&e.onUpdate(t),le[e.id]=t}})))(e):(e=>r(c,{size:"4"},()=>r(y,{class:"box",type:e.type,placeholder:e.placeholder,value:l(()=>e.value||"").value,onIonInput:async t=>{const a=t.target.value;"function"==typeof e.onUpdate&&e.onUpdate(a),le[e.id]=a}})))(e)}),re=()=>ne.value&&r(d,{style:{width:"100%",fontWeight:500}},()=>r(u,()=>[r(c,{size:"7"},()=>r(u,()=>[!1!==e.config.showSearchField?r(c,{size:"4"},()=>[r(w,{placeholder:"search here...",class:"box ion-no-padding",value:te.search,onIonInput:e=>ie({...te.pagination,page:1},e.target.value)})]):null,...se(),e.customFilters.length>0&&!1!==e.config.showSubmitButton?r(c,{size:"2"},()=>[r(g,{color:"primary",class:"ion-no-margin",onClick:()=>a("customFilter",le)},"Submit")]):null])),r(c,{size:"5",class:"ion-padding-end"},()=>e.actionsButtons.map(e=>{var t;return r(g,{class:"ion-float-right",color:e.color||"primary",size:null!==(t=e.size)&&void 0!==t?t:"default",onClick:()=>e.action(ae.value,V.value,te,ee.value)},e.icon?r(v,{icon:e.icon}):e.label)}))])),ue=()=>{const{page:e,start:t,end:a,totalPages:n}=te.pagination,l=e=>ie({...te.pagination,page:e}),o=[ce({icon:C,disabled:e===t,onClick:()=>l(e-1)})];return t>3&&(o.push(ce({label:"1",onClick:()=>l(1)})),o.push(ce({label:"...",disabled:!0}))),_.value.forEach(e=>{o.push(ce({label:e,onClick:()=>l(e)}))}),a<n-2&&(o.push(ce({label:"...",disabled:!0})),o.push(ce({label:n,onClick:()=>l(n)}))),o.push(ce({icon:p,disabled:e===a||q(X.value),onClick:()=>l(e+1)})),o},ce=({disabled:e,label:t,icon:a,onClick:n})=>r(g,{onClick:n,disabled:e,size:"small",color:te.pagination.page===t?"primary":"light"},a?r(v,{icon:a}):t||"Button"),de=()=>r(h,{class:"box go-to-input ion-hide-xl-down",lines:"none"},[r(f,{class:"ion-margin-end"},"Go to page"),r(y,{type:"number",min:1,max:te.pagination.totalPages,value:te.pagination.page,style:{paddingRight:"15px"},debounce:500,onIonChange:e=>{const t=e.target.value;t>0&&t<=te.pagination.totalPages&&ie({...te.pagination,page:t})}})]),pe=()=>r(h,{class:"box per-page-input",lines:"none"},[r(f,"Items per page"),r(m,{value:te.pagination.pageSize,interface:"popover",onIonChange:e=>ie({...te.pagination,pageSize:e.target.value,page:1})},[...te.pagination.pageSizeOptions.map(e=>r(b,{value:e,key:e},e)),r(b,{value:Y.value},"All")])]),ve=()=>r(c,{size:"4",class:"pagination-info"},l(()=>function(e,t){const{page:a,pageSize:n,totalPages:l}=e;return t?`Showing ${a*n-(n-1)} to ${a===l?t:a*n} of ${t} entries`:"No data available"}(te.pagination,Y.value)).value),ge=e=>{const t=l(()=>{const t=te.sort.find(t=>t.column.path===e.path);return t?"asc"==t.order?z:x:k});return r(v,{icon:t.value,style:{marginRight:"5px",float:"right",cursor:"pointer"}})},fe=e=>{var t;const a={minWidth:/index/i.test(e.path)?"80px":"190px",...e.thStyles};return r("th",{key:e.label,style:a,class:null===(t=e.thClasses)||void 0===t?void 0:t.join(" "),onClick:()=>ie(te.pagination,te.search,e)},[r("span",e.label),!1!==e.sortable&&ge(e)])},ye=()=>$(0,9).map(e=>r("tr",{key:e},r("td",{colspan:Z.value},r(S,{animated:!0,style:{width:"100%"}})))),he=()=>r("tr",r("td",{colspan:Z.value},r("div",{class:"no-data-table"},"No data available"))),me=()=>ae.value.map((t,a)=>r("tr",{key:t,onClick:()=>(async(t,a)=>{const n=e.rowActionsButtons.find(e=>e.default);n&&await n.action(t,a)})(t,a)},[...be(t),ke(t,a)])),be=e=>ee.value.map((a,n)=>{var l;const o=["data-cell",..."function"==typeof a.tdClasses?a.tdClasses(t(e,a.path),e):null!==(l=a.tdClasses)&&void 0!==l?l:[]].join(" "),i="function"==typeof a.tdStyles?a.tdStyles(t(e,a.path),e):a.tdStyles;return r("td",{key:n,class:o,style:i},we(e,a))}),we=(e,n)=>{let l=t(e,n.path);if(n.slotName&&A[n.slotName]){const t=A[n.slotName];return t&&t({value:l,row:e,column:n})}if("function"==typeof n.customRenderer)return n.customRenderer(l,e,n);if(n.component){const t="function"==typeof n.componentProps?n.componentProps(l,e):{value:l,row:e,column:n};return r(n.component,t)}if("function"==typeof n.formatter&&null!=l&&(l=n.formatter(l,e)),function(e,t,a){return"function"==typeof e.drillable?e.drillable(t,a):!!e.drillable&&!q(t)}(n,l,e)){const t=Ce(l);return r("a",{onClick:t=>{t.preventDefault(),t.stopPropagation(),a("drilldown",{column:n,row:e})}},t)}return Ce(l)},Ce=e=>{if("string"==typeof(t=e)&&/<\/?[a-z][\s\S]*>/i.test(t)&&"string"==typeof e){const t=function(e){const t=document.createElement("div");t.innerHTML=e;const a=["onload","onerror","onclick","onmouseover","onfocus","onblur"];return["script","iframe","object","embed","form"].forEach(e=>{t.querySelectorAll(e).forEach(e=>e.remove())}),t.querySelectorAll("*").forEach(e=>{a.forEach(t=>{e.hasAttribute(t)&&e.removeAttribute(t)}),Array.from(e.attributes).forEach(t=>{t.name.toLowerCase().startsWith("on")&&e.removeAttribute(t.name)})}),t.innerHTML}(e);return r("span",{innerHTML:t})}var t;return Se(e)},Se=e=>Array.isArray(e)?e.length:e,ke=(t,a)=>q(e.rowActionsButtons)?null:r("td",e.rowActionsButtons.map(e=>"function"!=typeof e.condition||e.condition(t)?ze(t,a,e):null)),ze=(e,t,a)=>{var n;return r(g,{key:a.icon,size:null!==(n=a.size)&&void 0!==n?n:"small",color:a.color||"primary",onClick:()=>a.action(e,t)},a.icon?()=>r(v,{icon:a.icon}):a.label||"Button")};return()=>[re(),r("div",{class:"responsive-table ion-padding-horizontal"},r("table",{class:"table bordered-table striped-table"},[r("thead",{class:e.color||""},r("tr",[...ee.value.map(e=>fe(e)),!q(e.rowActionsButtons)&&r("th","Actions")])),r("tbody",{class:"table-body"},K.value||e.loading?ye():q(X.value)?he():me())])),te.pagination.enabled&&te.pagination.totalPages>1&&r(d,{style:{width:"100%",textAlign:"left",color:"black"},class:"ion-padding"},()=>r(u,[r(c,{size:"4"},()=>ue()),r(c,{size:"5",class:"text-center"},()=>[de(),pe()]),r(c,{size:"3"},()=>ve())]))]}}))}}});
