var u=Object.defineProperty;var l=(r,e,t)=>e in r?u(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var i=(r,e,t)=>(l(r,typeof e!="symbol"?e+"":e,t),t);import{H as s,ap as d,aN as h}from"./index-b1f72056.js";class p{constructor(e){i(this,"person");this.person=e}create(){return s.postJson("/people",this.person)}update(e){return s.putJson("people/".concat(e),{...this.person,program_id:d})}static searchFamilyName(e){return s.getJson("/search/family_name",{search_string:e})}static searchGivenName(e){return s.getJson("/search/given_name",{search_string:e})}static async getPersonFullName(e){var a,n,c;const t=await s.getJson("/people/".concat(e,"/names"));return(a=t.data)!=null&&a.names.length?((n=t.data)==null?void 0:n.names[0].given_name)+" "+((c=t.data)==null?void 0:c.names[0].family_name):""}}class g{static create(e){return s.postJson("/person_attributes",e)}}class _{constructor(){i(this,"personId");this.personId=0}getPersonID(){return this.personId}setPersonID(e){this.personId=e}async registerPatient(e,t){return await this.createPerson(e),await this.createPersonAttributes(t),await this.createPatient()}async registerGuardian(e){return this.createPerson(e)}updatePerson(e){return new p(e).update(this.personId)}async createPerson(e){const t=await(await new p(e).create()).data;return this.personId=t.person_id,t}createPatient(){return h.create(this.personId,d)}async createPersonAttributes(e){for(const t in e)await g.create({...e[t],person_id:this.personId})}}class o{constructor(){}static voidRelation(e,t,a){return s.void("people/".concat(e,"/relationships/").concat(t),{reason:a})}static async amendRelation(e,t,a,n){return await o.voidRelation(e,a,"Updating guardian relationship"),o.createRelation(e,t,n)}static getRelations(){return s.getJson("types/relationships")}static createRelation(e,t,a){return s.postJson("people/".concat(e,"/relationships"),{relationship_type_id:a,relation_id:t})}}export{_ as P,o as R};
