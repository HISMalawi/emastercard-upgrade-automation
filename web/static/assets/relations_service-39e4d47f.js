var u=Object.defineProperty;var l=(s,e,t)=>e in s?u(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var i=(s,e,t)=>(l(s,typeof e!="symbol"?e+"":e,t),t);import{K as r,ar as d,aQ as h}from"./index-f1e5fa33.js";class p{constructor(e){i(this,"person");this.person=e}create(){return r.postJson("/people",this.person)}update(e){return r.putJson("people/".concat(e),{...this.person,program_id:d})}static searchFamilyName(e){return r.getJson("/search/family_name",{search_string:e})}static searchGivenName(e){return r.getJson("/search/given_name",{search_string:e})}static async getPersonFullName(e){var a,n,c;const t=await r.getJson("/people/".concat(e,"/names"));return(a=t.data)!=null&&a.names.length?((n=t.data)==null?void 0:n.names[0].given_name)+" "+((c=t.data)==null?void 0:c.names[0].family_name):""}}class g{static create(e){return r.postJson("/person_attributes",e)}}class _{constructor(){i(this,"personId");this.personId=0}getPersonID(){return this.personId}setPersonID(e){this.personId=e}async registerPatient(e,t){return await this.createPerson(e),await this.createPersonAttributes(t),await this.createPatient()}async registerGuardian(e){return this.createPerson(e)}updatePerson(e){return new p(e).update(this.personId)}async createPerson(e){const t=await(await new p(e).create()).data;return this.personId=t.person_id,t}createPatient(){return h.create(this.personId,d)}async createPersonAttributes(e){for(const t in e)await g.create({...e[t],person_id:this.personId})}}class o{constructor(){}static voidRelation(e,t,a){return r.void("people/".concat(e,"/relationships/").concat(t),{reason:a})}static async amendRelation(e,t,a,n){return await o.voidRelation(e,a,"Updating guardian relationship"),o.createRelation(e,t,n)}static getRelations(){return r.getJson("types/relationships")}static createRelation(e,t,a){return r.postJson("people/".concat(e,"/relationships"),{relationship_type_id:a,relation_id:t})}}export{_ as P,o as R};
