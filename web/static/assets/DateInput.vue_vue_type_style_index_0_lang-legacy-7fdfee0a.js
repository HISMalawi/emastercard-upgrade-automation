System.register(["./index-legacy-11525bd0.js","./his_date-legacy-55fa139e.js","./validations-legacy-9fbb99d9.js","./emc_event-legacy-0252f26c.js","./vue-datepicker-legacy-bbe1f770.js","./common-legacy-e8d6ba88.js"],function(e,a){"use strict";var l,u,t,o,n,r,i,d,v,s,m,p,c,y,f,b,g,V,D,h,x,I,j,k,w,_,E,q,F,$,A,B,M,S,U,L;return{setters:[e=>{l=e.d,u=e.r,t=e.h,o=e.a8,n=e.i,r=e.c,i=e.j,d=e.w,v=e.u,s=e.A,m=e.ao,p=e.a,c=e.e,y=e.M,f=e.o,b=e.t,g=e.b,V=e.aB,D=e.L,h=e.B,x=e.I,I=e.y,j=e.aa,k=e.P,w=e.by,_=e.bx,E=e.aA},e=>{q=e.d,F=e.e,$=e.l,A=e.t},e=>{B=e.f},e=>{M=e.E,S=e.a},e=>{U=e.K},e=>{L=e.i}],execute:function(){var a=document.createElement("style");a.textContent=".vc-popover-content-wrapper{z-index:1000!important}\n",document.head.appendChild(a);const O={key:0},Y={key:1},C={key:2,class:"text-danger"},J={key:3,class:"ion-float-right ion-margin-end checkbox-label"},z={key:2,style:{display:"flex","justify-content":"flex-start","justify-items":"center"}},N={style:{"margin-top":"0.7rem","flex-grow":"1"}};e("_",l({__name:"DateInput",props:{modelValue:{type:Object,default:()=>({})},form:{type:Object,default:()=>({})},minDate:{type:[String,Function],required:!1},maxDate:{type:[String,Function],required:!1},allowEstimation:{type:Boolean,default:!1},estimationLabel:{type:String,default:"Estimate"}},emits:["update:modelValue","isEstimated"],setup(e,{emit:a}){const l=e,K=a,P=u(!1),R=u(),T=u(l.modelValue.value?q(l.modelValue.value).date():void 0),G=u(l.modelValue.value?q(l.modelValue.value).month()+1:0),H=u(l.modelValue.value?q(l.modelValue.value).year():void 0),Q=u(l.modelValue.value),W=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],X=t(()=>{const e="function"==typeof l.minDate?l.minDate():l.minDate;return L(e)?"":F(e)}),Z=t(()=>{const e="function"==typeof l.maxDate?l.maxDate():l.maxDate;return L(e)?"":F(e)}),ee=t({get:()=>l.modelValue?l.modelValue:{},set:e=>K("update:modelValue",e)}),ae=e=>{var a;ee.value.error=null===(a=B({value:e.target.value}))||void 0===a?void 0:a.join(),ee.value.error||(R.value=parseInt(e.target.value)),le()},le=async()=>{let e="";if(P.value&&R.value)e=$(R.value);else if(T.value||G.value||H.value){const a=`${H.value}-${G.value}-${T.value}`;if(!a.match(/^\d{4}-(0?[1-9]|1[012])-(0?[1-9]|[12][0-9]|3[01])$/))return ee.value.error="Invalid date";e=F(a)}if(ee.value.required&&!e)return ee.value.error="This field is required";if(X.value&&new Date(e)<new Date(X.value))return ee.value.error=P.value?`Estimated period must be less than or equal to ${q().diff(X.value,"years")} years`:`Date must be after ${A(X.value)}`;if(Z.value&&new Date(e)>new Date(Z.value))return ee.value.error=P.value?"Estimated period must be more than or equal to 0 years":`Date must be before ${A(Z.value)}`;if(ee.value.validation){const a=await ee.value.validation({label:e,value:e},l.form);if(a&&a.length)return ee.value.error+=a.toString()}ee.value.error="",ee.value.value=e};o(Q,e=>{ee.value.error="",T.value=q(e).date(),G.value=q(e).month()+1,H.value=q(e).year(),le()});const ue=()=>{R.value=void 0,T.value=void 0,G.value=0,H.value=void 0,ee.value.error="",Q.value=""};return o(()=>l.modelValue.value,e=>{T.value=e?q(e).date():void 0,G.value=e?q(e).month()+1:0,H.value=e?q(e).year():void 0,Q.value=e}),o(P,e=>{ue(),K("isEstimated",e)}),n(()=>M.on(S.ON_CLEAR,ue)),(a,l)=>(f(),r(y,null,[ee.value.label?(f(),i(v(D),{key:0,class:"ion-padding-bottom bold"},{default:d(()=>[P.value?(f(),r("span",O,b(e.estimationLabel),1)):(f(),r("span",Y,b(ee.value.label),1)),ee.value.required?(f(),r("span",C," *")):s("",!0),e.allowEstimation?(f(),r("span",J,[g(" Estimate "+b(ee.value.label)+" ",1),c(v(V),{modelValue:P.value,"onUpdate:modelValue":l[0]||(l[0]=e=>P.value=e)},null,8,["modelValue"])])):s("",!0)]),_:1})):s("",!0),P.value?(f(),i(v(h),{key:1,type:"number",class:m(["ion-margin-top",ee.value.error?"box-input-error":"box-input"]),modelValue:R.value,"onUpdate:modelValue":l[1]||(l[1]=e=>R.value=e),placeholder:e.estimationLabel,disabled:ee.value.disabled,min:1,onIonInput:ae,onIonFocus:l[2]||(l[2]=()=>ee.value.error="")},null,8,["class","modelValue","placeholder","disabled"])):(f(),r("div",z,[p("div",N,[c(v(U),{"auto-apply":"",modelValue:Q.value,"onUpdate:modelValue":l[3]||(l[3]=e=>Q.value=e),teleport:!0,"enable-time-picker":!1,maxDate:Z.value,minDate:X.value},{trigger:d(()=>[c(v(x),null,{default:d(()=>[c(v(I),{icon:v(j)},null,8,["icon"])]),_:1})]),_:1},8,["modelValue","maxDate","minDate"])]),c(v(h),{modelValue:T.value,"onUpdate:modelValue":l[4]||(l[4]=e=>T.value=e),min:1,max:31,class:"ion-margin-top",fill:"outline",style:{"flex-grow":"2"},type:"number",placeholder:"DD",disabled:ee.value.disabled,onIonFocus:l[5]||(l[5]=()=>ee.value.error=""),onIonInput:le,onIonBlur:le},null,8,["modelValue","disabled"]),c(v(_),{modelValue:G.value,"onUpdate:modelValue":l[6]||(l[6]=e=>G.value=e),"aria-label":"Months",interface:"popover",placeholder:"MM",class:"ion-margin-top ion-margin-horizontal",fill:"outline",justify:"end",disabled:ee.value.disabled,onIonFocus:l[7]||(l[7]=()=>ee.value.error=""),onIonInput:le,onIonBlur:le},{default:d(()=>[(f(),r(y,null,k(W,(e,a)=>c(v(w),{value:a+1,key:a},{default:d(()=>[g(b(e),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue","disabled"]),c(v(h),{modelValue:H.value,"onUpdate:modelValue":l[8]||(l[8]=e=>H.value=e),min:1900,class:"ion-margin-top",fill:"outline",style:{"flex-grow":"2"},type:"number",placeholder:"YYYY",disabled:ee.value.disabled,onIonFocus:l[9]||(l[9]=()=>ee.value.error=""),onIonInput:le,onIonBlur:le},null,8,["modelValue","disabled"])])),ee.value.error?(f(),i(v(E),{key:3,color:"danger"},{default:d(()=>[g(b(ee.value.error),1)]),_:1})):s("",!0)],64))}}))}}});
