import{d as y,H as k,o as s,c as V,h as v,w as l,f as x,t as C,y as c,u as o,J as D,a as r,ag as I,ap as w,b as u,aq as B,K as N,g as T,ae as q,k as m,$ as E,j as _,I as f,i as $,ai as z}from"./index-67d679d3.js";import{s as S}from"./form-2046e8e5.js";import{D as F}from"./data_cleaning_report_service-395c580d.js";import{T as R}from"./TextInput-d5ff46db.js";import{_ as U}from"./DateInput.vue_vue_type_style_index_0_lang-7eb637ee.js";import{E as j,a as A}from"./emc_event-4721851b.js";import{a as L}from"./his_date-1f6a8082.js";import{t as O}from"./toasts-2ce27f65.js";import"./Strs-7ee8a435.js";import"./common-abc2f84d.js";import"./loader-13c76502.js";import"./report_service-06dc39e3.js";import"./index-95d3a767.js";import"./arrays-31d2d38b.js";import"./url-ffe761c9.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./validations-b9fbcec4.js";import"./vue-datepicker-2b343ada.js";const h={key:0,class:"text-danger"},K=y({__name:"TextAreaInput",props:{modelValue:{type:Object,default:()=>({})},maxLength:{type:Number,default:2e3},form:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(g,{emit:d}){const t=g,p=d,e=k({get:()=>t.modelValue,set:a=>p("update:modelValue",a)}),i=async()=>{if(e.value.required&&!e.value.value)return e.value.error="This field is required";if(e.value.validation){const a=await e.value.validation({label:e.value.value,value:e.value.value},t.form);if(a&&a.length)return e.value.error+=a.toString()}return e.value.error=""};return(a,n)=>(s(),V(N,null,[e.value.label?(s(),v(o(D),{key:0,class:"ion-padding-bottom bold"},{default:l(()=>[x("span",null,C(e.value.label),1),e.value.required?(s(),V("span",h," *")):c("",!0)]),_:1})):c("",!0),r(o(w),{class:I(["ion-no-margin ion-no-padding",e.value.error?"box-input-error":"box-input"]),modelValue:e.value.value,"onUpdate:modelValue":n[0]||(n[0]=b=>e.value.value=b),"auto-grow":"",placeholder:e.value.placeholder,disabled:e.value.disabled,onIonFocus:n[1]||(n[1]=b=>e.value.error=""),onIonBlur:i},null,8,["class","modelValue","placeholder","disabled"]),e.value.error?(s(),v(o(B),{key:1,color:"danger"},{default:l(()=>[u(C(e.value.error),1)]),_:1})):c("",!0)],64))}}),se=y({__name:"DataVerification",setup(g){const d=T(),t=q({dataCleaningDatetime:{value:"",label:"Date of Cleaning",required:!0},supervisors:{value:"",label:"Verified By",required:!0},comments:{value:"",label:"Comments"}});function p(){return S(t,async i=>{(await new F().saveDataCleaningVerification(i)).ok?d.back():O("Failed to save cleaning verification data")},{showloader:!0,underscoreKeys:!0})}const e=async()=>{if(await z("Are you sure you want to clear all fields?")){for(const i in t)t[i].value="";j.emit(A.ON_CLEAR)}};return(i,a)=>(s(),v(o($),{class:"ion-margin-vertical"},{default:l(()=>[r(o(_),null,{default:l(()=>[r(o(m),{class:"his-card ion-padding",size:"10",offset:"1"},{default:l(()=>[r(o(E),{class:"ion-text-center ion-margin-vertical ion-padding-bottom bold"},{default:l(()=>[u(" Data Cleaning Verification ")]),_:1}),r(o(_),{class:"ion-margin-top ion-margin-bottom"},{default:l(()=>[r(o(m),{size:"12",class:"ion-margin-top ion-margin-bottom"},{default:l(()=>[r(U,{modelValue:t.dataCleaningDatetime,"onUpdate:modelValue":a[0]||(a[0]=n=>t.dataCleaningDatetime=n),minDate:"1920-01-01",maxDate:o(L)},null,8,["modelValue","maxDate"])]),_:1}),r(o(m),{size:"12",class:"ion-margin-top ion-margin-bottom"},{default:l(()=>[r(R,{modelValue:t.supervisors,"onUpdate:modelValue":a[1]||(a[1]=n=>t.supervisors=n),form:t},null,8,["modelValue","form"])]),_:1}),r(o(m),{size:"12",class:"ion-margin-top ion-margin-bottom"},{default:l(()=>[r(K,{modelValue:t.comments,"onUpdate:modelValue":a[2]||(a[2]=n=>t.comments=n),form:t},null,8,["modelValue","form"])]),_:1})]),_:1}),r(o(f),{class:"ion-margin-top",onClick:p,color:"success"},{default:l(()=>[u(" Submit ")]),_:1}),r(o(f),{class:"ion-margin-top",onClick:e,color:"warning"},{default:l(()=>[u(" Clear ")]),_:1}),r(o(f),{class:"ion-margin-top",onClick:a[3]||(a[3]=n=>i.$router.back()),color:"light"},{default:l(()=>[u(" Back ")]),_:1})]),_:1})]),_:1})]),_:1}))}});export{se as default};
