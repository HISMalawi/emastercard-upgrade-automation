import{d as y,ak as $,o as g,k as _,w as o,e as t,u as e,p as n,I as b,b as d,n as I,g as T,L as c,a as v,a3 as V,m as k,x as C,V as A,H,J as N,l as x}from"./index-95a528fa.js";import{l as p}from"./loader-053b81cd.js";import{S as z}from"./SelectInput-3cfd0ea9.js";import{T as w}from"./TextInput-a0428fce.js";import{i as F,r as B}from"./form-76c875c3.js";import{i as U}from"./validations-5098ffac.js";import{t as q}from"./toasts-be8db332.js";import"./common-abc2f84d.js";import"./Strs-0c962638.js";import"./his_date-34d66586.js";const S=y({__name:"NetworkForm",emits:["submit"],setup(P,{emit:m}){const f=m,u=[{label:"HTTP",value:"http"},{label:"HTTPS",value:"https"}],l=$({protocol:{value:"",label:"Select Protocol",required:!0},ipAddress:{value:"",label:"IP Address",placeholder:"Enter IP Address e.g. 127.0.0.1",required:!0,validation:async r=>U(r)},port:{value:"",label:"Port",placeholder:"Enter Port e.g. 3000",required:!0}}),s=async()=>{await F(l)&&f("submit",B(l).formData)};return(r,a)=>(g(),_(e(I),null,{default:o(()=>[t(e(n),{size:"12",class:"ion-margin-vertical"},{default:o(()=>[t(z,{modelValue:l.protocol,"onUpdate:modelValue":a[0]||(a[0]=i=>l.protocol=i),options:u},null,8,["modelValue"])]),_:1}),t(e(n),{size:"12",class:"ion-margin-vertical"},{default:o(()=>[t(w,{modelValue:l.ipAddress,"onUpdate:modelValue":a[1]||(a[1]=i=>l.ipAddress=i)},null,8,["modelValue"])]),_:1}),t(e(n),{size:"12",class:"ion-margin-vertical"},{default:o(()=>[t(w,{modelValue:l.port,"onUpdate:modelValue":a[2]||(a[2]=i=>l.port=i)},null,8,["modelValue"])]),_:1}),t(e(n),{size:"12",class:"ion-margin-vertical"},{default:o(()=>[t(e(b),{class:"ion-margin-top ion-float-right",color:"success",onClick:s},{default:o(()=>[...a[4]||(a[4]=[d("Submit",-1)])]),_:1}),t(e(b),{class:"ion-margin-top ion-float-right",onClick:a[3]||(a[3]=i=>r.$router.back())},{default:o(()=>[...a[5]||(a[5]=[d("Back",-1)])]),_:1})]),_:1})]),_:1}))}}),E={class:"his-card"},L={class:"his-card"},Q=y({__name:"NetworkSettings",setup(P){const m=T(),f=c.isLoggedIn(),u=async({protocol:l,ipAddress:s,port:r})=>{try{if(p.show(),c.setHost("".concat(l.value,"://").concat(s,":").concat(r)),!await c.apiOk())throw new Error("Unable to connect to: ".concat(l.value,"://").concat(s,":").concat(r));const i=x();await i.loadCurrentFacility(!0),await i.loadFacilityCode(),await p.hide(),m.back()}catch(a){await p.hide(),console.error(a),q("".concat(a)),localStorage.clear()}};return(l,s)=>e(f)?(g(),_(e(k),{key:0},{default:o(()=>[t(e(I),null,{default:o(()=>[t(e(n),{size:"10",offset:"1",class:"ion-padding"},{default:o(()=>[v("div",E,[t(e(V),{style:{"padding-left":"0"}},{default:o(()=>[...s[0]||(s[0]=[d("Network Settings / API Host configuration",-1)])]),_:1}),t(S,{onSubmit:u})])]),_:1})]),_:1})]),_:1})):(g(),_(e(N),{key:1},{default:o(()=>[t(e(A),null,{default:o(()=>[t(e(C),null,{default:o(()=>[t(e(V),null,{default:o(()=>[...s[1]||(s[1]=[d("Network Settings / API Host configuration",-1)])]),_:1})]),_:1})]),_:1}),t(e(H),null,{default:o(()=>[t(e(k),null,{default:o(()=>[t(e(I),null,{default:o(()=>[t(e(n),{size:"10",offset:"1",class:"ion-padding"},{default:o(()=>[v("div",L,[t(S,{onSubmit:u})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}});export{Q as default};
