import{d as z,ac as p,a0 as N,g as k,w as i,u as t,D as B,o as D,e as a,j as l,a as r,i as v,I as f,b as c,h as P}from"./index-b34da4cb.js";import{T as x}from"./TextInput-6d943a31.js";import{S as q}from"./SelectInput-3966d61d.js";import{s as y}from"./form-4b6e0e9a.js";import{a as g,t as S}from"./toasts-5a6b8805.js";import{g as T}from"./location_options-964b1669.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./common-abc2f84d.js";import"./Strs-7ee8a435.js";import"./loader-d835876b.js";const _={class:"his-card"},L=z({__name:"SiteSettings",setup(O){const{facility:o,loadCurrentFacility:b,updateFacilityCode:U,updateFacilityUuid:V,updateFacilityName:F}=B(),u=p({name:{value:o.name,label:"Site Name",required:!0}}),d=p({prefix:{value:o.code,label:"Site Prefix",required:!0}}),m=p({uuid:{value:o.uuid,label:"Site UUID",required:!0}});N(()=>{b(!0).then(()=>{u.name.value=o.name,d.prefix.value=o.code,m.uuid.value=o.uuid})});const I=()=>y(u,async({name:s})=>{try{await F(s.value),g("Site name updated successfully")}catch(e){S("Unable to update facility name"),console.error(e)}}),C=async()=>y(d,async({prefix:s})=>{try{await U(s),g("Site Prefix updated successfully")}catch(e){console.error(e),S("Unable to update site prefix")}}),w=async()=>y(m,async({uuid:s})=>{try{await V(s),await g("Site Prefix updated successfully")}catch(e){S("Unable to update site UUID"),console.error(e)}});return(s,e)=>(D(),k(t(P),null,{default:i(()=>[a(t(v),null,{default:i(()=>[a(t(l),{size:"10",offset:"1",class:"ion-padding"},{default:i(()=>[r("div",_,[e[9]||(e[9]=r("h2",null,"Site Settings",-1)),a(t(v),null,{default:i(()=>[a(t(l),{size:"11",class:"ion-margin-vertical"},{default:i(()=>[a(q,{modelValue:u.name,"onUpdate:modelValue":e[0]||(e[0]=n=>u.name=n),asyncOptions:t(T)},null,8,["modelValue","asyncOptions"])]),_:1}),a(t(l),{size:"1",class:"ion-margin-vertical"},{default:i(()=>[e[4]||(e[4]=r("br",null,null,-1)),a(t(f),{class:"ion-margin-top ion-float-right",onClick:I},{default:i(()=>e[3]||(e[3]=[c("Submit")])),_:1})]),_:1}),a(t(l),{size:"11",class:"ion-margin-vertical"},{default:i(()=>[a(x,{modelValue:d.prefix,"onUpdate:modelValue":e[1]||(e[1]=n=>d.prefix=n)},null,8,["modelValue"])]),_:1}),a(t(l),{size:"1",class:"ion-margin-vertical"},{default:i(()=>[e[6]||(e[6]=r("br",null,null,-1)),a(t(f),{class:"ion-margin-top ion-float-right",onClick:C},{default:i(()=>e[5]||(e[5]=[c("Submit")])),_:1})]),_:1}),a(t(l),{size:"11",class:"ion-margin-vertical"},{default:i(()=>[a(x,{modelValue:m.uuid,"onUpdate:modelValue":e[2]||(e[2]=n=>m.uuid=n)},null,8,["modelValue"])]),_:1}),a(t(l),{size:"1",class:"ion-margin-vertical"},{default:i(()=>[e[8]||(e[8]=r("br",null,null,-1)),a(t(f),{class:"ion-margin-top ion-float-right",onClick:w},{default:i(()=>e[7]||(e[7]=[c("Submit")])),_:1})]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1}))}});export{L as default};
