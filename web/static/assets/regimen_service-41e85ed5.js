import{d as I,G as $,x as N,ao as _,ap as R,r as h,F as B,a4 as g,a0 as C,J as i,o as s,c as d,g as v,w as f,a as J,t as c,v as m,b,e as k,ae as A,H as q,E as r}from"./index-b34da4cb.js";import{_ as E}from"./_plugin-vue_export-helper-c27b6911.js";import{P as t}from"./index-95d3a767.js";import{a as F}from"./his_date-3774cb27.js";const O=I({name:"NumberInput",props:{modelValue:{type:Object,default:()=>({})},form:{type:Object,default:()=>({})},min:{type:Number,default:null},max:{type:Number,default:null},allowUnknown:{type:Boolean,default:!1}},components:{IonLabel:$,IonInput:N,IonNote:_,IonCheckbox:R},emits:["update:modelValue"],setup(e,{emit:o}){const a=h(!1),n=B({get:()=>e.modelValue,set:l=>o("update:modelValue",l)}),p=async()=>{if(n.value.required&&!n.value.value)return n.value.error="This field is required";if(!e.allowUnknown&&n.value.value==="Unknown"||n.value.value==="N/A")return n.value.error="Unknown is not allowed";if(n.value.validation){const l=await n.value.validation({label:n.value.value,value:n.value.value},e.form);if(l&&l.length)return n.value.error+=l.toString()}return n.value.error=""};return g(a,l=>{l?(n.value.value="Unknown",n.value.error="",n.value.disabled=!0):(n.value.value="",n.value.disabled=!1)}),g(e.modelValue,l=>{l.value==="Unknown"?a.value||(a.value=!0):a.value=!1}),C(()=>{n.value.value==="Unknown"&&!a.value&&(a.value=!0)}),{validate:p,model:n,isUnknown:a}}}),S={key:0,class:"text-danger"},j={key:1,class:"ion-float-right ion-margin-end checkbox-label"};function D(e,o,a,n,p,l){const w=i("ion-checkbox"),U=i("ion-label"),V=i("ion-input"),y=i("ion-note");return s(),d(q,null,[e.model.label?(s(),v(U,{key:0,class:"ion-padding-bottom bold"},{default:f(()=>[J("span",null,c(e.model.label),1),e.model.required?(s(),d("span",S," *")):m("",!0),e.allowUnknown?(s(),d("span",j,[o[3]||(o[3]=b(" Unknown? ")),k(w,{modelValue:e.isUnknown,"onUpdate:modelValue":o[0]||(o[0]=u=>e.isUnknown=u)},null,8,["modelValue"])])):m("",!0)]),_:1})):m("",!0),k(V,{type:"number",class:A(["ion-margin-top",e.model.error?"box-input-error":"box-input"]),modelValue:e.model.value,"onUpdate:modelValue":o[1]||(o[1]=u=>e.model.value=u),placeholder:e.isUnknown?"Unknown":e.model.placeholder,disabled:e.model.disabled||e.isUnknown,onIonFocus:o[2]||(o[2]=u=>e.model.error=""),onIonBlur:e.validate,min:e.min,max:e.max},null,8,["class","modelValue","placeholder","disabled","onIonBlur","min","max"]),e.model.error?(s(),v(y,{key:1,color:"danger"},{default:f(()=>[b(c(e.model.error),1)]),_:1})):m("",!0)],64)}const z=E(O,[["render",D]]);class H{static getAllArvRegimens(){return r.getJson("programs/".concat(t,"/all_arv_regimens"))}static getRegimens(o){return r.getJson("programs/".concat(t,"/regimens"),{patient_id:o})}static getRegimensByWeight(o,a=!1){return r.getJson("programs/".concat(t,"/regimens"),{weight:o,tb_dosage:a})}static getCustomIngridients(){return r.getJson("programs/".concat(t,"/custom_regimen_ingredients"))}static getCurrentRegimen(o,a=F()){return r.getJson("programs/".concat(t,"/").concat(o),{date:a})}static getRegimenExtras(o,a){return r.getJson("programs/".concat(t,"/regimen_extras"),{name:o,weight:a})}}export{z as N,H as R};
