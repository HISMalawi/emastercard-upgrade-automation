!function(){function e(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}System.register(["./loader-legacy-4400cb30.js","./ReportTable.vue_vue_type_style_index_0_lang-legacy-f376b3ce.js","./toasts-legacy-35496286.js","./common-legacy-0d7df615.js","./report_service-legacy-e6b2f2d9.js","./index-legacy-99ff0f8f.js","./exports-legacy-dafdc5e4.js","./index-legacy-3dd5606b.js","./his_date-legacy-0b8c6185.js","./vue-datepicker-legacy-800d3dfa.js","./DrilldownTable-legacy-75aa8052.js","./arrays-legacy-4be31994.js","./url-legacy-2d97b2db.js"],(function(t,r){"use strict";var a,l,n,u,o,i,s,p,c,d,g;return{setters:[e=>{a=e.l},e=>{l=e._},e=>{n=e.t},e=>{u=e.i,o=e.g},e=>{i=e.R},e=>{s=e.d,p=e.r,c=e.h,d=e.o,g=e.j},null,null,null,null,null,null,null],execute:function(){var r=(e=>(e.GENERAL="General",e.CHILDREN="Children",e.WOMEN="Women",e))(r||{});class v extends i{constructor(){super(),e(this,"ageGroup",void 0),e(this,"quarter",void 0),e(this,"regenerate",void 0),this.quarter="",this.regenerate=!1,this.ageGroup="General"}setRegenerate(e){this.regenerate=e}getAgeGroup(){return this.ageGroup}setQuarter(e){this.quarter=e}setAgeGroup(e){this.ageGroup=e}async generateReport(){return this.reportBuilder(await this.getReport("cohort_survival_analysis",{quarter:this.quarter,regenerate:this.regenerate,age_group:this.ageGroup}))}getOutcomeInterval(e){const t=Object.values(e)[0];if(!t)return null;const r=Object.keys(t)[0];return parseInt(r,10)}reportBuilder(e){return Object.entries(null!=e?e:{}).reduce(((e,[t,r])=>{if(!u(r)){const a=this.getOutcomeInterval(r),l=o(r,`On antiretrovirals.${a}`,0),n=o(r,`Patient died.${a}`,0),u=o(r,`Defaulted.${a}`,0),i=o(r,`Treatment stopped.${a}`,0),s=o(r,`Patient transferred out.${a}`,0),p=o(r,`N/A.${a}`,0),c=l+n+u+i+s+p;e.push({totalConfirmed:"",subGroup:this.ageGroup,quarter:t,interval:a,alive:l,died:n,defaulted:u,stopped:i,transferred:s,unknown:p,total:c})}return e}),[])}}t("default",s({__name:"SurvivalAnalysis",setup(e){const t=p(),u=p(),o=p([]),i=p("MoH Survival Analysis Report"),s=[{path:"quarter",label:"Reg Cohort",initialSort:!0,initialSortOrder:"asc",preSort:e=>parseInt(e.split(" ")[1])},{path:"interval",label:"Interval (Months)"},{path:"subGroup",label:"Sub group"},{path:"total",label:"Total Reg (database)"},{path:"totalConfirmed",label:"Total Reg (Confirmed)"},{path:"alive",label:"Alive"},{path:"died",label:"Died"},{path:"defaulted",label:"Defaulted"},{path:"stopped",label:"Stopped"},{path:"transferred",label:"Transferred out"},{path:"unknown",label:"Unknown"}],h=c((()=>[{id:"ageGroup",type:"select",label:"Sub Group:",value:u.value,options:Object.values(r).map((e=>({label:e.match(/Women/i)?"Option B+":e,value:e})))}]));async function f({quarter:e,ageGroup:t},r=!1){await a.show();try{const a=new v;a.setRegenerate(r),a.setQuarter(e.value),a.setAgeGroup(t.value),o.value=await a.generateReport(),i.value=`MoH Survival Analysis (${t.value}) Report`}catch(l){n("Unable to load report data"),console.error(l)}await a.hide()}return(e,r)=>(d(),g(l,{title:"MoH Survival Analysis Report","report-type":"MoH",columns:s,rows:o.value,quarter:t.value,useQuarterFilter:"","use-secure-export":"","custom-filters":h.value,filename:i.value,onGenerate:f},null,8,["rows","quarter","custom-filters","filename"]))}}))}}}))}();
