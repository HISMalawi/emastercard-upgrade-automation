import{a as u}from"./Strs-7ee8a435.js";import{i as l,t as f}from"./toasts-eb3581bc.js";import{l as c}from"./loader-cc83f0a0.js";function h(e){return e.map(r=>({value:r,label:r}))}async function d(e){for(const r in e){const{required:s,value:a,validation:t}=e[r];if(s&&l(a)){e[r].error="This field is required";continue}if(typeof t=="function"){const n=await t(typeof a=="object"?a:{label:a,value:a},e);e[r].error=l(n)?"":n.join()}else e[r].error=""}return Object.values(e).every(({error:r})=>!r)}function y(e,r=!1){const s={},a={};for(const t in e){const{value:o,computedValue:n}=e[t];if(o){const i=r?u(t):t;s[i]=o,typeof n=="function"&&(a[i]=n(e[t].value,e))}}return{formData:s,computedFormData:a}}function m(e,r=""){const s=Object.values(e).filter(a=>a&&(a.tag===r||r==="")).reduce((a,t)=>{const o=t.obs?t.obs:t;return Array.isArray(o)?a=a.concat(o):a.push(o),a},[]);return Promise.all(s)}async function p(e,r,s){var t;if(!await d(e))return;const a=(t=s==null?void 0:s.showloader)!=null?t:!0;try{a&&await c.show();const{formData:o,computedFormData:n}=y(e,s==null?void 0:s.underscoreKeys);await r(o,n)}catch(o){f("".concat(o)),console.error("WELL HERE IS THE FAILURE",o)}finally{a&&await c.hide()}}export{m as a,d as i,y as r,p as s,h as t};
