import{_ as F,o as I,c as E,f as N,d as z,g as B,h as D,i as K,j as O,k as H,w as s,u as e,l as q,e as a,m as G,n as U,p as k,q as W,b as n,r as $,t as _,a as r,s as j,v as J,x as v,I as u,y as P,z as Q,A as X,B as x,C as h,D as Y,E as Z,F as ee,G as ae,H as oe,J as g,K as se,L as te}from"./index-229c1236.js";import{r as y}from"./image-cb93bc3e.js";import{t as w}from"./toasts-6e9d0182.js";import{u as le}from"./PasswordUpdate-e324e7d9.js";import"./TextInput-021dee31.js";import"./his_date-b0a0907c.js";import"./validations-60812f1e.js";import"./common-abc2f84d.js";import"./form-21d73841.js";import"./Strs-0c962638.js";import"./loader-8159f1a1.js";const ne={},re={class:"helpdesk-flyer"};function ie(V,t){return I(),E("div",re,[...t[0]||(t[0]=[N('<div class="main-content" data-v-a0d453f6><div class="title-section" data-v-a0d453f6><div class="title" data-v-a0d453f6>ELECTRONIC MEDICAL RECORDS HELP DESK</div><div class="subtitle" data-v-a0d453f6>We are here to assist you!</div></div><div class="contact-section" data-v-a0d453f6><div class="contact-label" data-v-a0d453f6>Toll-Free call or SMS</div><div class="toll-number" data-v-a0d453f6>2479</div></div></div><div class="email-section" data-v-a0d453f6><div data-v-a0d453f6>ðŸ“§ emrhelpdesk@pedaids.org</div></div>',2)])])}const de=F(ne,[["render",ie],["__scopeId","data-v-a0d453f6"]]),ue=["src"],ce=["src"],me=["src"],fe={key:0},pe=z({__name:"login",setup(V){const t=g(""),l=g(""),i=g(!1),C=B(),d=le(),{fullVersion:b}=se(),{facility:c,loadFacilityCode:A,loadCurrentFacility:R}=q(),{initiateIdleTimer:S,stopIdleTimer:M}=D(),T=K(()=>C.currentRoute.value.redirectedFrom);O(()=>{M(),R(!0)});const m=async()=>{var f;try{if(!t.value||!l.value)return w("Invalid login details");const o=await te.login(t.value,l.value);o.ok?(d.setCurrentPassword(l.value),await d.canChangePassword()&&await d.changePassword(),A(),S(),C.push((f=T.value)!=null?f:"/")):w(o.errorMessage)}catch(o){w("An error occurred while logging in"),console.error(o)}},L=()=>{i.value=!i.value};return(f,o)=>(I(),H(e(oe),null,{default:s(()=>[a(e(ae),null,{default:s(()=>[a(e(G),{style:{margin:"0",padding:"0"}},{default:s(()=>[a(e(U),null,{default:s(()=>[a(e(k),{size:"8"},{default:s(()=>[a(e(W),{class:"title"},{default:s(()=>[...o[2]||(o[2]=[n("E-MASTERCARD APP",-1)])]),_:1}),a(e($),{class:"sub-title"},{default:s(()=>[n(_(e(b)),1)]),_:1}),r("img",{src:e(y)("report.png"),class:"hero-image",alt:"LOGO"},null,8,ue),a(e(j),{class:"footer-section"},{default:s(()=>[a(e(J),null,{default:s(()=>[r("span",null,[r("img",{id:"coat",src:e(y)("login-logos/Malawi-Coat_of_arms_of_arms.png"),alt:"Malawi Coat of Arms logo",class:"brand-logo-moh"},null,8,ce),r("img",{id:"pepfar",src:e(y)("login-logos/PEPFAR.png"),alt:"PEPFAR logo",class:"brand-logo-pepfar"},null,8,me)]),a(e(v),{class:"his-sm-text",slot:"end",lines:"none"},{default:s(()=>[a(e(u),{color:"dark",fill:"outline",size:"large",slot:"end","router-link":"/settings/network"},{default:s(()=>[...o[3]||(o[3]=[n(" Network ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(e(k),{size:"4",class:"form-section"},{default:s(()=>[a(e(P),{icon:e(Q),class:"avatar"},null,8,["icon"]),e(c).name?(I(),E("h3",fe,_(e(c).name)+" ("+_(e(c).district)+")",1)):X("",!0),o[6]||(o[6]=r("h4",null,"Please, log into your account",-1)),a(e(v),{style:{margin:"2rem 3.5rem"}},{default:s(()=>[a(e(x),{type:"text",placeholder:"Username",modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=p=>t.value=p),onKeyup:h(m,["enter"]),min:5,required:""},null,8,["modelValue"])]),_:1}),a(e(v),{style:{margin:"2rem 3.5rem"}},{default:s(()=>[a(e(x),{type:i.value?"text":"password",modelValue:l.value,"onUpdate:modelValue":o[1]||(o[1]=p=>l.value=p),placeholder:"Password",onKeyup:h(m,["enter"]),max:100,min:5,required:""},{default:s(()=>[a(e(u),{slot:"end",fill:"clear",onClick:L},{default:s(()=>[a(e(P),{icon:i.value?e(Y):e(Z)},null,8,["icon"])]),_:1})]),_:1},8,["type","modelValue"])]),_:1}),a(e(u),{expand:"full",size:"large",style:{margin:"2rem 3.5rem","text-transform":"none"},onClick:ee(m,["prevent"])},{default:s(()=>[...o[4]||(o[4]=[n(" Login ",-1)])]),_:1}),a(e(u),{fill:"clear",size:"large",color:"light",class:"ion-text-lowercase",onClick:e(d).showForgetPasswordModal},{default:s(()=>[...o[5]||(o[5]=[n(" forget password? ",-1)])]),_:1},8,["onClick"]),a(de,{class:"ion-margin-top"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}});const Fe=F(pe,[["__scopeId","data-v-acc1b619"]]);export{Fe as default};
