!function(){function e(e,r,t){var i;return(r="symbol"==typeof(i=function(e,r){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(r,"string"))?i:i+"")in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}System.register(["./common-legacy-42ce034b.js","./report_service-legacy-df1b8872.js","./age_groups-legacy-5143fd58.js"],(function(r,t){"use strict";var i,o,n;return{setters:[e=>{i=e.g},e=>{o=e.R},e=>{n=e.A}],execute:function(){const t=r("a",["Died","IIT <3 mo","IIT 3-5 mo","IIT 6+ mo","Transferred out","Refused (Stopped)"]);r("b",{tx_curr:"TX_CURR",symptom_screen_alone:"Symptom Screen (alone)",cxr_screen:"CXR Screen",mwrd_screen:"mWRD Screen",sceen_pos_new:"New on ART/Screen Positive",sceen_neg_new:"New on ART/Screen Negative",sceen_pos_prev:"Already on ART/Screen Positive",sceen_neg_prev:"Already on ART/Screen Negative",started_tb_new:"Started TB RX_New on ART",started_tb_prev:"Started TB RX_Prev on ART"});r("T",class extends o{constructor(){super(),e(this,"reportType",void 0),e(this,"initialize",void 0),this.reportType="pepfar",this.initialize=!0}setReportType(e){this.reportType=e}setInitialize(e){this.initialize=e}getTxCurrMMDReport(e,r){return this.getReport("arv_refill_periods",{org:this.reportType,min_age:`${e}`,max_age:`${r}`,initialize_tables:`${this.initialize}`})}async getTxMlReport(e){const r=await this.getReport("tx_ml",{rebuild:e}),t=this.txMlReportBuilder(r),i=await this.buildMaternityAgreggateRows(t.F.aggregate);return[...t.F.rows,...t.M.rows,{ageGroup:"All",gender:"M",...t.M.aggregate},...i]}getTxRttReport(e){return this.getReport("tx_rtt",{rebuild:e})}getClinicTxRtt(e){return this.getReport(`programs/${this.programId}/reports/clinic_tx_rtt`,{rebuild:e})}async getTxTbReport(e){return this.getReport(`programs/${this.programId}/reports/tx_tb`,{rebuild_outcome:e})}getTxNewReport(e){return this.getReport(`programs/${this.programId}/reports/tx_new`,{rebuild:e})}mapTxMlIndcators(e){return t.reduce(((r,t,i)=>{var o;return r[t]=null!==(o=e[i])&&void 0!==o?o:[],r}),{})}txMlReportBuilder(e){const r={M:{rows:[],aggregate:{}},F:{rows:[],aggregate:{}}};return n.forEach((t=>{["F","M"].forEach((o=>{const n=this.mapTxMlIndcators(i(e,`${t}.${o}`,[]));r[o].rows.push({ageGroup:t,gender:o,...n}),Object.entries(n).forEach((([e,t])=>{var i;r[o].aggregate[e]=[...null!==(i=r[o].aggregate[e])&&void 0!==i?i:[],...t]}))}))})),r}})}}}))}();
