import{d as y,a5 as N,a4 as R,l as B,au as M,aB as L,L as a,o as p,h as I,w as s,a as r,b as _,t as h,f as T,aC as C,n as z,C as F,S as U,$ as H,q as x,I as E,k as G,j as W,c as P,K as b,N as j,ag as q,y as K,G as n,E as O}from"./index-9d5e84a5.js";import{_ as k}from"./_plugin-vue_export-helper-c27b6911.js";import{r as Q}from"./image-cb93bc3e.js";import{P as c}from"./index-95d3a767.js";const X=y({props:["name","details","programID","iconURL"],components:{IonCard:N,IonCardContent:R,IonCardTitle:B,IonCardHeader:M,IonImg:L}}),Y={class:"his-md-text"};function Z(o,e,t,i,m,J){const u=a("ion-img"),g=a("ion-card-title"),d=a("ion-card-header"),f=a("ion-card-content"),v=a("center"),$=a("ion-card");return p(),I($,{class:"his-card"},{default:s(()=>[r(v,null,{default:s(()=>[r(u,{src:o.iconURL},null,8,["src"]),r(d,null,{default:s(()=>[r(g,null,{default:s(()=>[_(h(o.name),1)]),_:1})]),_:1}),r(f,null,{default:s(()=>[T("b",Y,h(o.details),1)]),_:1})]),_:1})]),_:1})}const ee=k(X,[["render",Z],["__scopeId","data-v-6fed3ffb"]]);const te=y({name:"Modal",props:{title:{type:String,default:""},apps:{type:Array,default:()=>[]},appVersion:{type:String},canClose:{type:Boolean,default:()=>!1},isPocSite:{type:Boolean,default:!0}},computed:{noAppPriviledges(){return this.apps.every(o=>!o.hasPriviledge)}},methods:{closeModal(){this.noAppPriviledges?this.$router.push("/login"):C.dismiss()},resolveImage(o){return Q(o)},setApplication(o){o.hasPriviledge&&C.dismiss(o)}},components:{IonFooter:z,IonContent:F,IonHeader:U,IonTitle:H,IonToolbar:x,ApplicationCard:ee,IonButton:E,IonCol:G,IonRow:W}});function oe(o,e,t,i,m,J){const u=a("ion-title"),g=a("ion-label"),d=a("ion-toolbar"),f=a("ion-header"),v=a("application-card"),$=a("ion-col"),w=a("ion-row"),A=a("ion-content"),D=a("ion-button"),V=a("ion-footer");return p(),P(b,null,[r(f,null,{default:s(()=>[r(d,null,{default:s(()=>[r(u,null,{default:s(()=>[_("Select Module")]),_:1}),r(g,{style:{"font-weight":"bold",padding:"0.5em"},slot:"end"},{default:s(()=>[_(" Version: "+h(o.appVersion),1)]),_:1})]),_:1})]),_:1}),r(A,null,{default:s(()=>[r(w,null,{default:s(()=>[(p(!0),P(b,null,j(o.apps,(l,S)=>(p(),I($,{key:S,"size-md":"4","size-sm":"12"},{default:s(()=>[r(v,{class:q({inactive:!l.hasPriviledge,clickable:l.hasPriviledge}),onClick:ae=>o.setApplication(l),name:l.applicationName,version:l.version,releaseDate:l.versionReleaseDate,details:l.applicationDescription,programID:l.programID,iconURL:o.resolveImage(l.applicationIcon)},null,8,["class","onClick","name","version","releaseDate","details","programID","iconURL"])]),_:2},1024))),128))]),_:1})]),_:1}),r(V,null,{default:s(()=>[r(d,null,{default:s(()=>[o.noAppPriviledges||o.canClose?(p(),I(D,{key:0,color:"danger",size:"large",onClick:o.closeModal},{default:s(()=>[_(" Close ")]),_:1},8,["onClick"])):K("",!0)]),_:1})]),_:1})],64)}const ne=k(te,[["render",oe],["__scopeId","data-v-c72ba17e"]]);class ce{static getAllPrograms(){return n.getJson("programs",{page_size:1e3})}static getPatientPrograms(e){return n.getJson("patients/".concat(e,"/programs"))}static getPatientVLInfo(e,t){const i=c;return n.getJson("programs/".concat(i,"/patients/").concat(e,"/vl_info"),{date:t})}static getProgramWorkflows(e){return n.getJson("programs/".concat(e,"/workflows"))}static getPatientStates(e,t){return n.getJson("programs/".concat(t,"/patients/").concat(e,"/states"))}static voidProgram(e,t=""){return n.void("patient_programs/".concat(e,"/"),{reason:t})}static createState(e,t,i){return n.postJson("programs/".concat(t,"/patients/").concat(e,"/states"),i)}static voidState(e,t,i,m=""){return n.void("programs/".concat(t,"/patients/").concat(e,"/states/").concat(i),{reason:m})}static async getProgramInformation(e){try{return await n.getJson("/programs/".concat(c,"/patients/").concat(e))}catch(t){return{}}}static getCurrentProgramInformation(e,t){return n.getJson("/programs/".concat(c,"/patients/").concat(e,"/visit?date=").concat(t))}static getMastercardDrugInformation(e,t){return n.getJson("/programs/".concat(c,"/patients/").concat(e,"/mastercard_data?date=").concat(t))}static getNextTask(e,t){return n.getJson("/workflows/".concat(c,"/").concat(e),{date:t})}static async getNextSuggestedARVNumber(){var t;const e=await n.getJson("/programs/1/next_available_arv_number");if(e.ok)return(t=e.data)==null?void 0:t.arv_number.replace(/^\D+|\s/g,"")}static voidARVNumber(e){return n.postJson("/programs/1/void_arv_number/".concat(e),{})}static getFastTrackStatus(e,t){return n.getJson("/on_fast_track",{person_id:e,date:t})}static createPatient(e){return n.postJson("/patients/",{program_id:c,person_id:e})}static enrollPatient(e,t){return n.postJson("/patients/".concat(e,"/programs"),{program_id:c,date_enrolled:t})}static enrollProgram(e,t,i){return n.postJson("/patients/".concat(e,"/programs"),{program_id:t,date_enrolled:i})}static getWeightForHeightValues(){return n.getJson("/patient_weight_for_height_values")}static async selectApplication(){const e=await C.create({component:ne,cssClass:"my-custom-class",backdropDismiss:!1,componentProps:{appVersion:O().fullVersion}});return e.present(),e}}export{ce as P};
