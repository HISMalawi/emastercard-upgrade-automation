import{d as m,h as p,i as f,j as c,w as s,u,k as v,o as S,e as o,n as y,a as n,I as g,b as I,m as V,l as C}from"./index-b7f1c9c9.js";import{T as r}from"./TextInput-e99a41be.js";import{S as x}from"./SelectInput-243e2150.js";import{s as U}from"./form-1bf42a7b.js";import{a as _,t as b}from"./toasts-cc8134d8.js";import{g as w}from"./location_options-0dbfea88.js";import{Y as F}from"./YesNoInput-5430bdbf.js";import"./common-abc2f84d.js";import"./Strs-0c962638.js";import"./loader-d203cfd4.js";const D={class:"ion-margin-vertical"},N={class:"ion-margin-vertical"},k={class:"ion-margin-vertical"},q={class:"ion-margin-vertical ion-padding-top"},M=m({__name:"SiteSettings",setup(B){const e=v(),t=p(()=>({name:{value:e.facility.name,label:"Site Name",required:!0},prefix:{value:e.facility.code,label:"Site Prefix",required:!0},uuid:{value:e.facility.uuid,label:"Site UUID",required:!0},dicSite:{value:e.isDICSite.value,label:"Is the facility a Drop-In Center for Key Populations",required:!0}}));f(()=>{e.loadCurrentFacility(!0),e.refreshDICStatus()});function d(){return U(t.value,async a=>{try{a.name!==e.facility.name&&await e.updateFacilityName(a.name.value),a.prefix!==e.facility.code&&await e.updateFacilityCode(a.prefix),a.uuid!==e.facility.uuid&&await e.updateFacilityUuid(a.uuid),a.dicSite!==e.isDICSite.value&&await e.updateDICStatus(a.dicSite),_("Site settings updated successfully")}catch(i){b("Unable to update site settings"),console.error(i)}})}return(a,i)=>(S(),c(u(C),null,{default:s(()=>[o(u(V),null,{default:s(()=>[o(u(y),{size:"8",offset:"2",class:"his-card ion-padding ion-margin-top"},{default:s(()=>[i[5]||(i[5]=n("h2",null,"Site Settings",-1)),n("div",D,[o(x,{modelValue:t.value.name,"onUpdate:modelValue":i[0]||(i[0]=l=>t.value.name=l),asyncOptions:u(w)},null,8,["modelValue","asyncOptions"])]),n("div",N,[o(r,{modelValue:t.value.prefix,"onUpdate:modelValue":i[1]||(i[1]=l=>t.value.prefix=l)},null,8,["modelValue"])]),n("div",k,[o(r,{modelValue:t.value.uuid,"onUpdate:modelValue":i[2]||(i[2]=l=>t.value.uuid=l)},null,8,["modelValue"])]),n("div",q,[o(F,{modelValue:t.value.dicSite,"onUpdate:modelValue":i[3]||(i[3]=l=>t.value.dicSite=l),inline:""},null,8,["modelValue"])]),o(u(g),{class:"ion-margin-top ion-float-right",onClick:d},{default:s(()=>i[4]||(i[4]=[I("Save Changes")])),_:1})]),_:1})]),_:1})]),_:1}))}});export{M as default};
