import{l as h}from"./loader-850d1075.js";import{d as S,r as f,aj as R,h as m,ak as A,_ as B,N,j as O,o as $}from"./index-6ba03bc9.js";import{_ as T}from"./ReportTable.vue_vue_type_style_index_0_lang-d3c1ecc2.js";import{C as n,D as G}from"./data_cleaning_report_service-9b8b48cc.js";import{t as p}from"./Strs-0c962638.js";import{p as u}from"./common-abc2f84d.js";import{t as a}from"./his_date-53781c44.js";import"./exports-ceec156e.js";import"./index-f78ab263.js";import"./vue-datepicker-6a86b8d6.js";import"./toasts-50e973ce.js";import"./DrilldownTable-eaad2fcb.js";import"./arrays-1b521787.js";import"./report_service-73a1c693.js";import"./url-ffe761c9.js";const V=S({name:"DataCleaning",components:{BaseReportTable:T},setup(){const e=f([]),o=R({}),c=m(()=>"Data Cleaning Tools ".concat((o==null?void 0:o.value)||"")),i=f("-"),d=t=>t.column.path,l=[{path:"arv_number",label:"ARV Number",preSort:u,initialSort:!0},{path:"given_name",label:"First Name"},{path:"family_name",label:"Last Name"}],s=[{path:"arv_number",label:"ARV Number",preSort:u,initialSort:!0},{path:"filling_number",label:"Filling Number"},{path:"outcome",label:"Outcome"},{path:"outcome_date",label:"Outcome Date",formatter:a},{path:"dispensation_visit_date",label:"Last Dispensation Date",formatter:a}],D=m(()=>{switch(o.value){case n.ActiveClientsWithAdverseOutcomes:return s;case n.MalesWithFemaleObs:return[...l,{path:"gender",label:"Gender",formatter:p},{path:"birthdate",label:"Date of Birth",formatter:a},{path:"visit_date",label:"Visit Date",formatter:t=>{const r=t.split(",");return r.length>1?"".concat(r.length," visits dates"):a(t)},drillable:t=>/visits/i.test(t)}];case n.StartDateLessThanDob:return[...l,{path:"gender",label:"Gender",formatter:p},{path:"birthdate",label:"Date of Birth",formatter:a},{path:"art_start_date",label:"Start Date",formatter:a}];case n.ClientsOnArtWithoutHivProgram:return[{path:"arv_number",label:"ARV Number",preSort:u,initialSort:!0},{path:"birthdate",label:"Date of Birth",formatter:a},{path:"art_start_date",label:"Start Date",formatter:a},{path:"last_art_dispensation",label:"Last Dispensation Date",formatter:a}];default:return[...l,{path:"gender",label:"Gender",formatter:p},{path:"birthdate",label:"Date of Birth",formatter:a}]}}),_=[...l,{path:"visit_date",label:"Visit Date",formatter:a}],g=async t=>t.row.visit_date.split(",").map(r=>({...t.row,person_id:t.row.patient_id,visit_date:r})),v=async t=>{var b;await h.show();const r=new G;r.setStartDate(t.dateRange.startDate),r.setEndDate(t.dateRange.endDate),Object.assign(o,t.tool),i.value=r.getDateIntervalPeriod(),e.value=(b=await r.getCleaningToolReport(o.value))!=null?b:[],await h.hide()},w=[{label:"Show",action:t=>{A.push("/patient/".concat(t.patient_id))}}],C=m(()=>[{id:"tool",label:"Select Cleaning Tool",type:"select",value:o,gridSize:5,options:Object.values(n).map(t=>({label:t.toLowerCase(),value:t}))}]);return{period:i,title:c,rows:e,columns:D,rowActionBtns:w,filters:C,drillColumns:_,fetchData:v,getDrilldownTitle:d,onDrillRowParser:g}}});function j(e,o,c,i,d,l){const s=N("base-report-table");return $(),O(s,{title:e.title,"report-icon":"clean.jpg",period:e.period,columns:e.columns,rows:e.rows,rowActionButtons:e.rowActionBtns,"custom-filters":e.filters,useDateRangeFilter:"","drill-title":e.getDrilldownTitle,"drill-row-parser":e.onDrillRowParser,"custom-drill-columns":e.drillColumns,onGenerate:e.fetchData},null,8,["title","period","columns","rows","rowActionButtons","custom-filters","drill-title","drill-row-parser","custom-drill-columns","onGenerate"])}const U=B(V,[["render",j]]);export{U as default};
