System.register(["./index-legacy-5fd00317.js","./common-legacy-42ce034b.js","./_plugin-vue_export-helper-legacy-762b7923.js"],(function(e,l){"use strict";var o,a,n,t,i,u,d,r,s,c,v,p,m,h,f,b,y,k,g,w,x,C,O,I,V,S,_,E,U,j,B,D,A;return{setters:[e=>{o=e.d,a=e.k,n=e.aK,t=e.d2,i=e.i,u=e.ak,d=e.B,r=e.d3,s=e.m,c=e.S,v=e.g,p=e.Z,m=e.T,h=e.ag,f=e.s,b=e.d4,y=e.aF,k=e.d5,g=e.r,w=e.c,x=e.h,C=e.w,O=e.j,I=e.aa,V=e.f,S=e.F,_=e.q,E=e.a,U=e.o,j=e.t,B=e.b},e=>{D=e.i},e=>{A=e._}],execute:function(){var l=document.createElement("style");l.textContent=".outer-input-box[data-v-5d0bac9f]{width:100%;height:fit-content;background-color:#fff}.inner-input-box[data-v-5d0bac9f]{position:relative;width:100%}.search-input[data-v-5d0bac9f]{height:2.5rem;width:100%;display:inline-block}.input-options[data-v-5d0bac9f]{position:absolute;width:100%;max-height:25rem;overflow-y:auto;background-color:#fff;z-index:100;border-radius:.25rem;border-top-left-radius:0;border-top-right-radius:0;box-shadow:0 8px 16px rgba(0,0,0,.2)}.input-icon[data-v-5d0bac9f]{font-size:12px!important;position:absolute;top:0;right:0;height:2.5rem;width:2rem;color:#8a8a8a;padding-right:.5rem;display:flex;align-items:center;justify-content:flex-end;z-index:90}.input-option-checkbox[data-v-5d0bac9f]{--size: 18px !important}.input-placeholder[data-v-5d0bac9f]{color:#a0a0a0;margin:.5rem}\n",document.head.appendChild(l);const L=o({name:"SelectInput",props:{modelValue:{type:Object,default:()=>({})},form:{type:Object,default:()=>({})},options:{type:Array,default:()=>[]},asyncOptions:{type:Function,required:!1},allowCustom:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},infiniteScrolling:{type:Boolean,default:!1}},components:{IonLabel:a,IonInput:n,IonNote:t,IonIcon:i,IonCheckbox:u,IonList:d,IonChip:r,IonItem:s},emits:["update:modelValue"],setup(e,{emit:l}){const o=c(!1),a=c(""),n=c(),t=c(!1),i=c(),u=c(""),d=c([]),r=c(1),s=v((()=>e.multiple?d.value.filter((({isChecked:e})=>e)):n.value?[n.value]:[])),g=v((()=>!u.value&&D(s.value)&&!t.value)),w=v({get:()=>e.modelValue,set:e=>l("update:modelValue",e)}),x=()=>{u.value="",n.value=void 0,d.value.forEach((e=>e.isChecked=!1))},C=()=>{if(x(),D(w.value.value))return;if(Array.isArray(w.value.value)&&e.multiple)return w.value.value.forEach((e=>{const l=d.value.findIndex((({value:l})=>l===e.value));-1===l?d.value.push({...e,isChecked:!0}):d.value[l].isChecked=!0}));const l=d.value.find((e=>e.value===w.value.value));n.value=l||{label:w.value.value,value:w.value.value}},O=async()=>{const l="function"==typeof e.asyncOptions?await e.asyncOptions(u.value):e.options.filter((({label:e})=>e.toLowerCase().includes(u.value.toLowerCase())));s.value.forEach((e=>{const o=l.findIndex((l=>l.value===e.value));-1===o?l.push(e):l[o].isChecked=!0})),d.value=l.filter((({label:e})=>!!e))},I=async()=>{if(w.value.required&&D(w.value.value))return w.value.error="This field is required";if(w.value.validation){const l=await w.value.validation({label:w.value.value,value:w.value.value},e.form);if(l&&l.length)return w.value.error+=l.toString()}return w.value.error=""},V=()=>{t.value=!1,w.value.value=e.multiple?s.value:D(s.value)?void 0:s.value[0],u.value="",I()},S=l=>{e.multiple||(n.value=l,V()),w.value.value=e.multiple?s.value:D(s.value)?void 0:s.value[0],u.value=""};return p(u,(async()=>{r.value++,await O()})),p([()=>e.options,()=>e.asyncOptions],(async()=>O())),p((()=>e.modelValue.value),(e=>D(e)&&C()),{deep:!0,immediate:!0}),p(t,(e=>e&&(i.value=n.value||d.value[0]))),m((async()=>{await O(),C(),addEventListener("click",(e=>{!e.target.closest(".inner-input-box")&&t.value&&V()}))})),h((()=>removeEventListener("click",(e=>console.log(e))))),{validate:I,onSelect:S,resetHandler:x,onShowOptions:()=>{w.value.disabled||(t.value=!0,w.value.error="")},onCloseOptions:V,diselect:l=>e.multiple?l.isChecked=!1:n.value=void 0,onCustomValue:()=>{w.value.value={label:a.value,value:a.value}},handleKeyDown:e=>{switch(t.value||(t.value=!0),e.key){case"ArrowDown":(e=>{e.preventDefault();const l=d.value.indexOf(i.value)+1;i.value=d.value[l]||d.value[0]})(e);break;case"ArrowUp":(e=>{e.preventDefault();const l=d.value.indexOf(i.value)-1;i.value=d.value[l]||d.value[d.value.length-1]})(e);break;case"Enter":S(i.value);break;case"Escape":V()}},model:w,customOption:a,isCustom:o,chevronDown:f,chevronUp:b,close:y,closeCircle:k,selectedOption:n,showOptions:t,focusedOption:i,showPlaceholder:g,filteredOptions:d,filter:u,tags:s}}}),q={key:0,class:"text-danger"},z={key:1,class:"ion-float-right ion-margin-end checkbox-label"},F={class:"inner-input-box"},K={key:0,class:"input-options"},H={class:"input-icon"};e("S",A(L,[["render",function(e,l,o,a,n,t){const i=g("ion-checkbox"),u=g("ion-label"),d=g("ion-input"),r=g("ion-icon"),s=g("ion-chip"),c=g("ion-item"),v=g("ion-list"),p=g("ion-note");return U(),w(S,null,[e.model.label?(U(),x(u,{key:0,class:"ion-padding-bottom bold"},{default:C((()=>[V("span",null,j(e.model.label),1),e.model.required?(U(),w("span",q," *")):O("",!0),e.allowCustom?(U(),w("span",z,[B(" Add Custom "+j(e.model.label)+"? ",1),E(i,{modelValue:e.isCustom,"onUpdate:modelValue":l[0]||(l[0]=l=>e.isCustom=l),onIonChange:l[1]||(l[1]=l=>e.model.value="")},null,8,["modelValue"])])):O("",!0)])),_:1})):O("",!0),e.isCustom?(U(),x(d,{key:1,class:I(["box-input",{"box-input-error":e.model.error,"ion-margin-top":e.model.label}]),modelValue:e.customOption,"onUpdate:modelValue":l[2]||(l[2]=l=>e.customOption=l),placeholder:e.model.placeholder||e.model.label,disabled:e.model.disabled,onIonFocus:l[3]||(l[3]=()=>e.model.error=""),onIonBlur:e.validate,onIonInput:e.onCustomValue},null,8,["class","modelValue","placeholder","disabled","onIonBlur","onIonInput"])):(U(),w("div",{key:2,class:I(["outer-input-box box-input",{"box-input-error":e.model.error,"ion-margin-top":e.model.label}])},[V("div",F,[V("div",{style:{display:"flex","flex-wrap":"wrap",width:"100%"},onClick:l[6]||(l[6]=(...l)=>e.onShowOptions&&e.onShowOptions(...l))},[(U(!0),w(S,null,_(e.tags,((l,o)=>(U(),x(s,{key:o},{default:C((()=>[E(u,null,{default:C((()=>[B(j(l.label),1)])),_:2},1024),E(r,{icon:e.closeCircle,color:"danger",onClick:o=>e.diselect(l),style:{"z-index":"20"}},null,8,["icon","onClick"])])),_:2},1024)))),128)),E(d,{disabled:e.model.disabled,placeholder:e.showPlaceholder?e.model.placeholder||"select option":"",modelValue:e.filter,"onUpdate:modelValue":l[4]||(l[4]=l=>e.filter=l),class:"search-input",ref:"searchInput",onKeydown:l[5]||(l[5]=l=>e.handleKeyDown(l))},null,8,["disabled","placeholder","modelValue"])]),e.showOptions?(U(),w("div",K,[E(v,null,{default:C((()=>[(U(!0),w(S,null,_(e.filteredOptions,((l,o)=>{var a;return U(),x(c,{key:o,lines:o+1===e.filteredOptions.length?"none":void 0,color:l.value===(null===(a=e.focusedOption)||void 0===a?void 0:a.value)?"light":"",onClick:o=>e.onSelect(l)},{default:C((()=>[e.multiple?(U(),x(i,{key:0,class:"input-option-checkbox",slot:"start",modelValue:l.isChecked,"onUpdate:modelValue":e=>l.isChecked=e},null,8,["modelValue","onUpdate:modelValue"])):O("",!0),E(u,null,{default:C((()=>[B(j(l.label),1)])),_:2},1024)])),_:2},1032,["lines","color","onClick"])})),128))])),_:1})])):O("",!0),V("div",H,[e.filter||e.tags.length>0?(U(),x(r,{key:0,icon:e.close,onClick:e.resetHandler},null,8,["icon","onClick"])):O("",!0),E(r,{icon:e.showOptions?e.chevronUp:e.chevronDown,onClick:l[7]||(l[7]=l=>e.showOptions?e.onCloseOptions():e.onShowOptions())},null,8,["icon"])])])],2)),e.model.error?(U(),x(p,{key:3,color:"danger"},{default:C((()=>[B(j(e.model.error),1)])),_:1})):O("",!0)],64)}],["__scopeId","data-v-5d0bac9f"]]))}}}));
