import{l as u}from"./loader-a574e3ea.js";import{d as C,r as d,ac as _,F as s,ad as R,J as B,g as S,o as $}from"./index-631b0954.js";import{_ as A}from"./ReportTable.vue_vue_type_style_index_0_lang-95b71ee6.js";import{C as f,D as T}from"./data_cleaning_report_service-336a2ded.js";import{t as y}from"./Strs-7ee8a435.js";import{p as F}from"./common-abc2f84d.js";import{t as l}from"./his_date-4ecbc69c.js";import{_ as G}from"./_plugin-vue_export-helper-c27b6911.js";import"./exports-d5b21080.js";import"./index-dbf4b9b3.js";import"./vue-datepicker-ff631070.js";import"./toasts-b30514c1.js";import"./DrilldownTable-6735d775.js";import"./arrays-31d2d38b.js";import"./report_service-07c33dcd.js";import"./index-95d3a767.js";import"./url-ffe761c9.js";const N=C({name:"DataCleaning",components:{BaseReportTable:A},setup(){const e=d([]),r=_({}),i=s(()=>"Data Cleaning Tools ".concat((r==null?void 0:r.value)||"")),n=d("-"),p={path:"visit_date",label:"Visit Date",formatter:t=>{const o=t.split(",");return o.length>1?"".concat(o.length," visits dates"):l(t)},drillable:t=>/visits/i.test(t)},m=t=>t.column.path,a=[{path:"arv_number",label:"ARV Number",preSort:F,initialSort:!0},{path:"given_name",label:"First Name"},{path:"family_name",label:"Last Name"}],w=s(()=>[...a,{path:"gender",label:"Gender",formatter:y},{path:"birthdate",label:"Date of Birth",formatter:l},...r.value===f.MalesWithFemaleObs?[p]:[]]),b=[...a,{path:"visit_date",label:"Visit Date",formatter:l}],g=async t=>t.row.visit_date.split(",").map(o=>({...t.row,person_id:t.row.patient_id,visit_date:o})),D=async t=>{var c;await u.show();const o=new T;o.setStartDate(t.dateRange.startDate),o.setEndDate(t.dateRange.endDate),Object.assign(r,t.tool),n.value=o.getDateIntervalPeriod(),e.value=(c=await o.getCleaningToolReport(r.value))!=null?c:[],await u.hide()},h=[{label:"Show",action:t=>{R.push("/patient/".concat(t.patient_id))}}],v=s(()=>[{id:"tool",label:"Select Cleaning Tool",type:"select",value:r,gridSize:5,options:Object.values(f).map(t=>({label:t.toLowerCase(),value:t}))}]);return{period:n,title:i,rows:e,columns:w,rowActionBtns:h,filters:v,drillColumns:b,fetchData:D,getDrilldownTitle:m,onDrillRowParser:g}}});function V(e,r,i,n,p,m){const a=B("base-report-table");return $(),S(a,{title:e.title,"report-icon":"clean.jpg",period:e.period,columns:e.columns,rows:e.rows,rowActionButtons:e.rowActionBtns,"custom-filters":e.filters,useDateRangeFilter:"","drill-title":e.getDrilldownTitle,"drill-row-parser":e.onDrillRowParser,"custom-drill-columns":e.drillColumns,onGenerate:e.fetchData},null,8,["title","period","columns","rows","rowActionButtons","custom-filters","drill-title","drill-row-parser","custom-drill-columns","onGenerate"])}const Y=G(N,[["render",V]]);export{Y as default};
