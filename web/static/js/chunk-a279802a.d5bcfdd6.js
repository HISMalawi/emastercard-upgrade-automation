(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a279802a"],{"0c57":function(e,t,o){"use strict";o("a64b")},"8eed":function(e,t,o){"use strict";o.r(t);var a=o("7a23");function c(e,t,o,c,n,r){const l=Object(a["resolveComponent"])("ion-text"),i=Object(a["resolveComponent"])("ion-title"),b=Object(a["resolveComponent"])("ion-toolbar"),s=Object(a["resolveComponent"])("ion-header"),d=Object(a["resolveComponent"])("ion-label"),j=Object(a["resolveComponent"])("ion-item"),O=Object(a["resolveComponent"])("ion-list"),u=Object(a["resolveComponent"])("report-table"),m=Object(a["resolveComponent"])("ion-content"),p=Object(a["resolveComponent"])("ion-button"),h=Object(a["resolveComponent"])("ion-footer"),f=Object(a["resolveComponent"])("ion-page");return Object(a["openBlock"])(),Object(a["createBlock"])(f,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(s,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(b,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(i,{class:"his-lg-text"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(l,{color:"danger"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.npid),1)]),_:1}),Object(a["createTextVNode"])(" Merge history ")]),_:1})]),_:1})]),_:1}),Object(a["createVNode"])(m,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(i,{class:"his-md-text his-card"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("NPID Holder: ")]),_:1}),Object(a["createVNode"])(O,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(j,{lines:"none",class:"his-md-text"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(d,null,{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(" Person name ")]),_:1}),Object(a["createElementVNode"])("b",null,Object(a["toDisplayString"])(e.holderName),1)]),_:1}),(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.patientInfo,(e,t)=>(Object(a["openBlock"])(),Object(a["createBlock"])(j,{lines:"none",class:"his-md-text",key:t},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(d,null,{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.label)+": ",1)]),_:2},1024),Object(a["createElementVNode"])("b",null,Object(a["toDisplayString"])(e.value),1)]),_:2},1024))),128))]),_:1}),Object(a["createVNode"])(i,{class:"his-md-text his-card"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("Transactions:")]),_:1}),Object(a["createVNode"])(u,{config:{tableCssTheme:"art-report-theme"},columns:e.columns,rows:e.rows},null,8,["columns","rows"])]),_:1}),Object(a["createVNode"])(h,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(b,{color:"dark"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(p,{onClick:e.cancel,color:"danger",size:"large",slot:"start"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(" Cancel ")]),_:1},8,["onClick"]),Object(a["createVNode"])(p,{onClick:e.rollback,disabled:!e.isReversible,color:"success",size:"large",slot:"end"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(" Reverse ")]),_:1},8,["onClick","disabled"])]),_:1})]),_:1})]),_:1})}var n=o("d867"),r=o("80e3"),l=o("9ceb"),i=o("1c74");class b extends i["e"]{static getMergeHistory(e){return this.getJson("/rollback/merge_history",{identifier:e})}static rollback(e){return this.postJson("/rollback/rollback_patient",{patient_id:e,program_id:this.getProgramID()})}}var s=o("6605"),d=o("b5e4"),j=o("9283"),O=Object(a["defineComponent"])({components:{IonText:n["IonText"],IonPage:n["IonPage"],IonContent:n["IonContent"],IonToolbar:n["IonToolbar"],IonHeader:n["IonHeader"],IonFooter:n["IonFooter"],IonTitle:n["IonTitle"],IonList:n["IonList"],IonItem:n["IonItem"],IonLabel:n["IonLabel"],IonButton:n["IonButton"],ReportTable:r["a"]},setup(){const e=Object(s["h"])(),t=Object(s["i"])(),o=Object(a["ref"])(-1),c=Object(a["ref"])([]),n=Object(a["ref"])([]),r=(""+e.params.id).toUpperCase(),i=Object(a["ref"])("N/A"),O=Object(a["ref"])([{label:"Birthdate",value:"N/A"},{label:"Gender",value:"N/A"}]),u=[[l["a"].thTxt("Merge type"),l["a"].thTxt("Merge date"),l["a"].thTxt("First Name"),l["a"].thTxt("Last name"),l["a"].thTxt("Birthdate"),l["a"].thTxt("Gender")]],m=Object(a["computed"])(()=>n.value.length>0);function p(){t.back()}async function h(){await Object(d["a"])("Are you sure you want to merge transactions")&&(await b.rollback(o.value)?t.back():Object(d["c"])("Failed to rollback"))}return Object(a["onMounted"])(async()=>{if(r){try{n.value=await b.getMergeHistory(r)||[]}catch(e){Object(d["c"])("Merge history not found for "+r)}c.value=n.value.map(e=>(-1===o.value&&(o.value=e["secondary_id"],i.value=`${e["secondary_first_name"]} ${e["secondary_surname"]}`,O.value=[{label:"Birthdate",value:j["c"].toStandardHisDisplayFormat(e["secondary_birthdate"])},{label:"Gender",value:e["secondary_gender"]}]),[l["a"].td(e["merge_type"]),l["a"].tdDate(e["merge_date"]),l["a"].td(e["primary_first_name"]),l["a"].td(e["primary_surname"]),l["a"].tdDate(e["primary_birthdate"]),l["a"].td(e["primary_gender"])]))}else t.back()}),{cancel:p,holderName:i,isReversible:m,patientInfo:O,rollback:h,columns:u,rows:c,npid:r}}}),u=(o("0c57"),o("6b0d")),m=o.n(u);const p=m()(O,[["render",c],["__scopeId","data-v-45cde8b0"]]);t["default"]=p},a64b:function(e,t,o){}}]);
//# sourceMappingURL=chunk-a279802a.d5bcfdd6.js.map