(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8cf92160"],{"10be":function(e,t,n){"use strict";var o=n("7a23");const a={class:"keypad"};function r(e,t,n,r,i,c){const s=Object(o["resolveComponent"])("ion-input"),l=Object(o["resolveComponent"])("ion-chip"),u=Object(o["resolveComponent"])("center"),d=Object(o["resolveComponent"])("base-keyboard"),h=Object(o["resolveComponent"])("ion-content");return Object(o["openBlock"])(),Object(o["createBlock"])(h,null,{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",a,[Object(o["createVNode"])(s,{value:e.value,disabled:!0,class:"keypad-input"},null,8,["value"]),Object(o["createVNode"])(u,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(l,null,{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.title||"keypad"),1)]),_:1})]),_:1}),Object(o["createVNode"])(d,{btnSize:"96px",layout:e.keypad,onKeyPress:e.keypress},null,8,["layout","onKeyPress"])])]),_:1})}var i=n("c924"),c=n("3800"),s=n("2345"),l=n("fe70"),u=Object(o["defineComponent"])({components:{BaseKeyboard:i["a"]},props:{title:{type:String},preset:{type:String},onKeyPress:{type:Function,required:!0},strictNumbers:{type:Boolean,default:!1}},data:()=>({value:"0",keypad:c["d"]}),watch:{preset:{handler(e){e&&(this.value=e.toString())},immediate:!0}},methods:{async keypress(e){if(e.match(/done/i))await l["s"].dismiss(this.value);else if(this.strictNumbers){if(e.includes(".")&&this.value.includes("."))return;e.includes(".")||"0"!==this.value||(this.value=""),this.value=Object(s["a"])(e,this.value),this.value||(this.value="0"),""+parseInt(this.value)===this.value?this.onKeyPress(parseInt(this.value)):this.onKeyPress(this.value)}else this.value=Object(s["a"])(e,this.value),this.onKeyPress(this.value)}}}),d=(n("27f1"),n("d959")),h=n.n(d);const p=h()(u,[["render",r],["__scopeId","data-v-7454247c"]]);t["a"]=p},"16e8":function(e,t,n){},2048:function(e,t,n){"use strict";var o=n("7a23");function a(e,t,n,a,r,i){const c=Object(o["resolveComponent"])("v2Datatable"),s=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(s,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(c,{title:e.title,subtitle:e.subtitle,columnData:e.reportData,columns:e.columns,"on-finish":e.onFinish,rowsPerPage:e.ITEMS_PER_PAGE},null,8,["title","subtitle","columnData","columns","on-finish","rowsPerPage"])]),_:1})}n("14d9");var r=n("d867"),i=n("99ae"),c=n("6605"),s=n("2ef0"),l=n("8734"),u=n("23e6"),d=n("0011");const h=20;var p=Object(o["defineComponent"])({props:{title:{type:String,default:"Drilldown"},patientIdentifiers:{type:Object},onFinish:{type:Function}},components:{IonPage:r["IonPage"],v2Datatable:i["a"]},setup(e){const t=Object(o["ref"])("-"),n=Object(o["ref"])([]),a=Object(c["i"])(),r=[[{label:"National ID",ref:"national_id"},{label:"First name",ref:"given_name"},{label:"Last name",ref:"family_name"},{label:"Birthdate",ref:"birthdate"},{label:"Action",ref:"patient_id",exportable:!1,tdClick:({data:e})=>a.push({path:"/patient/dashboard/"+e.patient_id}),value:()=>"View client"}]];return Object(o["watch"])(()=>e.patientIdentifiers,async e=>{if(n.value=[],t.value="Total: 0",!e||!e.length)return;const o=Object(s["chunk"])(e,h);for(const r of o){for(const o of r){try{const e=new u["a"](await u["a"].findByID(o));n.value.push({patient_id:e.getID(),national_id:e.getNationalID(),given_name:e.getGivenName(),family_name:e.getFamilyName(),birthdate:Object(d["f"])(e.getBirthdate())})}catch(a){console.error(a),n.value.push({})}t.value=`Total: ${n.value.length} of ${(e||[]).length}`}await Object(l["a"])(500)}},{immediate:!0}),{columns:r,subtitle:t,reportData:n,ITEMS_PER_PAGE:h}}}),f=n("d959"),b=n.n(f);const m=b()(p,[["render",a]]);t["a"]=m},2345:function(e,t,n){"use strict";function o(e,t,n){let o=t;if(e.match(/enter/i))return o+"\r\n";if(e.match(/clear/i))return"";if(o=e.match(/delete|del/i)?o.match(/unknown/i)||o.match(/n\/a/i)?"":o.substring(0,o.length-1):e.match(/space/i)?t+" ":e.match(/unknown/i)?"Unknown":e.match(/n\/a/i)?"N/A":o.match(/unknown/i)||o.match(/n\/a/i)?e:`${t}${e}`,"string"===typeof o&&o)switch(n){case"lowercase":o=o.toLowerCase();break;case"uppercase":o=o.toUpperCase();break;default:o=o.charAt(0).toUpperCase()+o.slice(1);break}return o}n.d(t,"a",(function(){return o}))},"27f1":function(e,t,n){"use strict";n("3f97")},3800:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"j",(function(){return a})),n.d(t,"m",(function(){return r})),n.d(t,"e",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"l",(function(){return s})),n.d(t,"i",(function(){return l})),n.d(t,"g",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"k",(function(){return h})),n.d(t,"c",(function(){return p})),n.d(t,"h",(function(){return f})),n.d(t,"f",(function(){return b}));const o=[["1","2","3"],["4","5","6"],["7","8","9"],[".","0","Del"],["","Done",""]],a=[["1","2","3"],["4","5","6"],["7","8","9"],["Del","0","."],["Unknown","",""]],r=[["1","2","3"],["4","5","6"],["7","8","9"],[".","0","Del"],["Clear","%","/"]],i=[["1","2","3"],["4","5","6"],["7","8","9"],["Del.","0","Clear"]],c=[["1","2","3","<"],["4","5","6",">"],["7","8","9","="],["","0",""]],s=[["1","2","3","+","-","/","*"],["4","5","6","%","=","<",">","Qwerty"],["7","8","9",".",","],["","0",""]],l=[["1","2","3"],["4","5","6"],["7","8","9"],["","0",""]],u=[["1","2","3","4","5","6","7"],["8","9","10","11","12","13","14"],["15","16","17","18","19","20","21"],["22","23","24","25","26","27","28"],["29","30","31"]],d=[["a","b","c","d","e","f","g","h","."],["i","j","k","l","m","n","o","p","q"],["r","s","t","u","v","w","x","y","z"]],h=[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l","'"],["z","x","c","v","b","n","m",",",".","A-Z"]],p=[["1","2","3","4","5","6","7","8","9","0"],["a","b","c","d","e","f","g","h","-","."],["i","j","k","l","m","n","o","p","q"],["r","s","t","u","v","w","x","y","z"]],f=[["1","2","3","4","5","6","7","8","9","0","Del"],["q","w","e","r","t","y","u","i","o","p","Clear"],["a","s","d","f","g","h","j","k","l",".","Caps"],["z","x","c","v","b","n","m","<",">","/","Enter"]],b=[["1","2","3","4","5","6","7","8","9","0"],["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l","Del."],["z","x","c","v","b","n","m","Caps","Login"]]},"3f97":function(e,t,n){},"6be2":function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"g",(function(){return i})),n.d(t,"f",(function(){return c})),n.d(t,"e",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"h",(function(){return h})),n.d(t,"a",(function(){return p}));var o=n("3800");const a=[o["l"],[["","Delete"]]],r=[o["i"],[["Delete"]]],i=[o["i"],[["Delete","Unknown"]]],c=[o["i"],[["N/A"],["Delete","Unknown"]]],s=[o["i"],[["Delete"]]],l=[o["i"],[["Unknown","Delete"],["Qwerty","A-Z"]]],u=[o["g"],[["Unknown"]]],d=[o["a"],[["0-9","Delete"],["Qwerty","Unknown"],["","Space"]]],h=[o["k"],[["","Delete"],["?123","0-9"],["Space","Unknown"]]],p=[{btn:"0-9",keyboard:l},{btn:"?123",keyboard:a},{btn:"A-Z",keyboard:d},{btn:"Qwerty",keyboard:h}]},"775a":function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var o,a,r=n("d95e"),i=n("1c74"),c=n("b446"),s=n("0011"),l=n("c731"),u=n("b5e4"),d=n("d867"),h=n("7a23"),p=n("2706");(function(e){e["MULTI_FIELD_DATE"]="Multipage date fields",e["CALENDAR_FIELD"]="Calendar",e["SINGLE_DATE_INPUT_FIELD"]="Single page date"})(o||(o={})),function(e){e["PERIOD_INPUT_TYPE"]="hts_report_date_period_type"}(a||(a={}));const f=Object(h["reactive"])({datePeriodInputType:localStorage.getItem(a.PERIOD_INPUT_TYPE)||o.MULTI_FIELD_DATE});function b(e){Object(l["a"])([...Object(c["b"])({id:"start_date",helpText:"Start",required:!0,minDate:()=>(null===e||void 0===e?void 0:e.minDate)||"",maxDate:()=>(null===e||void 0===e?void 0:e.maxDate)||i["e"].getSessionDate(),condition:()=>f.datePeriodInputType===o.MULTI_FIELD_DATE,estimation:{allowUnknown:!1},computeValue:e=>e}),...Object(c["b"])({id:"end_date",helpText:"End",required:!0,minDate:(e,t)=>t.start_date,maxDate:()=>(null===e||void 0===e?void 0:e.maxDate)||i["e"].getSessionDate(),condition:()=>f.datePeriodInputType===o.MULTI_FIELD_DATE,estimation:{allowUnknown:!1},computeValue:e=>e}),{id:"alt_start_date",proxyID:"start_date",helpText:"Start Date",type:r["b"].TT_FULL_DATE,validation:t=>{if(!t)return["Date is required"];const n=e.maxDate||i["e"].getSessionDate();return e.minDate&&new Date(t.value)<new Date(e.minDate)?[`${Object(s["f"])(""+t.value)} is less than minimum date of ${Object(s["f"])(e.minDate)}`]:n&&new Date(t.value)>new Date(n)?[`${Object(s["f"])(""+t.value)} is greater than max date of ${Object(s["f"])(n)}`]:null},computedValue:e=>e.value,condition:()=>f.datePeriodInputType===o.SINGLE_DATE_INPUT_FIELD},{id:"alt_end_date",proxyID:"end_date",helpText:"End Date",type:r["b"].TT_FULL_DATE,defaultValue:e=>e.start_date.value,validation:(t,n)=>{if(!t)return["Date is required"];const o=e.maxDate||i["e"].getSessionDate();return n.start_date.value&&new Date(t.value)<new Date(n.start_date.value)?[`${Object(s["f"])(""+t.value)} is less than minimum date of ${Object(s["f"])(n.start_date.value)}`]:o&&new Date(t.value)>new Date(o)?[`${Object(s["f"])(""+t.value)} is greater than max date of ${Object(s["f"])(o)}`]:null},computedValue:e=>e.label,condition:()=>f.datePeriodInputType===o.SINGLE_DATE_INPUT_FIELD},{id:"calendar_start_date",proxyID:"start_date",helpText:"Start Date",type:r["b"].TT_DATE_PICKER,computedValue:e=>e,condition:()=>f.datePeriodInputType===o.CALENDAR_FIELD,validation:e=>p["a"].required(e),config:{minDate:()=>e.minDate||null,maxDate:()=>e.maxDate||i["e"].getSessionDate(),infoItems:(e,t)=>[{label:"Start Date",value:Object(s["f"])(e)||"-"},{label:"End Date",value:Object(s["f"])(t.end_date)||"-"}],persistInfoItems:!1}},{id:"calendar_end_date",proxyID:"end_date",helpText:"End Date",type:r["b"].TT_DATE_PICKER,validation:e=>p["a"].required(e),defaultValue:e=>e.start_date.value,computedValue:e=>e,condition:()=>f.datePeriodInputType===o.CALENDAR_FIELD,config:{minDate:e=>e.start_date.value,maxDate:()=>e.maxDate||i["e"].getSessionDate(),infoItems:(e,t)=>[{label:"Start Date",value:Object(s["f"])(t.start_date)||"-"},{label:"End Date",value:Object(s["f"])(e)}],persistInfoItems:!1}}],async(t,n)=>{console.log(n),d["modalController"].dismiss();try{const t=`${Object(s["f"])(n.start_date)} to ${Object(s["f"])(n.end_date)}`;e.onFinish(n.start_date,n.end_date,t)}catch(o){Object(u["c"])("An error has occurred")}})}},"99ae":function(e,t,n){"use strict";var o=n("7a23");const a={key:0},r={class:"his-sm-text"},i={class:"art-report-theme"},c={class:"stick-report-header"},s=["colspan","rowspan","onClick"],l=["onClick"],u={class:"his-sm-text"};function d(e,t,n,d,h,p){const f=Object(o["resolveComponent"])("ion-title"),b=Object(o["resolveComponent"])("ion-icon"),m=Object(o["resolveComponent"])("ion-button"),g=Object(o["resolveComponent"])("ion-label"),v=Object(o["resolveComponent"])("ion-chip"),y=Object(o["resolveComponent"])("ion-buttons"),O=Object(o["resolveComponent"])("ion-toolbar"),j=Object(o["resolveComponent"])("ion-header"),k=Object(o["resolveComponent"])("ion-item"),x=Object(o["resolveComponent"])("ion-content"),C=Object(o["resolveComponent"])("ion-footer");return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[Object(o["createVNode"])(j,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(O,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(f,{class:"his-md-text"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.title)+" ",1),e.subtitle?(Object(o["openBlock"])(),Object(o["createElementBlock"])("br",a)):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("span",r,Object(o["toDisplayString"])(e.subtitle),1)]),_:1}),Object(o["createVNode"])(y,{slot:"end"},{default:Object(o["withCtx"])(()=>["function"===typeof e.onConfigure?(Object(o["openBlock"])(),Object(o["createBlock"])(m,{key:0,onClick:e.onConfigure},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(b,{size:"large",icon:e.document},null,8,["icon"])]),_:1},8,["onClick"])):Object(o["createCommentVNode"])("",!0),e.searchTerm?(Object(o["openBlock"])(),Object(o["createBlock"])(v,{key:1,onClick:t[0]||(t[0]=t=>e.searchTerm=""),class:"his-md-text",color:"warning"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(g,null,{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.searchTerm),1)]),_:1}),Object(o["createVNode"])(b,{icon:e.close},null,8,["icon"])]),_:1})):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(m,{onClick:e.searchTable,size:"large"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(b,{size:"large",icon:e.search},null,8,["icon"])]),_:1},8,["onClick"]),"function"===typeof e.onRefresh?(Object(o["openBlock"])(),Object(o["createBlock"])(m,{key:2,onClick:e.onRefresh,color:"success",size:"large"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(b,{size:"large",icon:e.sync},null,8,["icon"])]),_:1},8,["onClick"])):Object(o["createCommentVNode"])("",!0)]),_:1})]),_:1})]),_:1}),Object(o["createVNode"])(x,{"scroll-y":"","scroll-x":""},{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("table",i,[Object(o["createElementVNode"])("thead",c,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.columns,(t,n)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",{key:n},[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(t,(t,n)=>{var a,r;return Object(o["openBlock"])(),Object(o["createElementBlock"])("th",{key:n,colspan:(null===t||void 0===t||null===(a=t.span)||void 0===a?void 0:a.thColspan)||1,rowspan:(null===t||void 0===t||null===(r=t.span)||void 0===r?void 0:r.thRowspan)||1,onClick:n=>e.sortColumn(t.ref)},[Object(o["createVNode"])(k,{lines:"none"},{default:Object(o["withCtx"])(()=>[e.columnSorted&&e.columnSorted===t.ref?(Object(o["openBlock"])(),Object(o["createBlock"])(b,{key:0,icon:"asc"===e.sortOrder?e.arrowUp:e.arrowDown},null,8,["icon"])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(g,{class:"ion-text-center"},{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("b",null,Object(o["toDisplayString"])(t.label),1)]),_:2},1024)]),_:2},1024)],8,s)}),128))]))),128))]),Object(o["createElementVNode"])("tbody",null,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.page,(t,n)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",{key:n},[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(t.row,(t,n)=>{var a;return Object(o["openBlock"])(),Object(o["createElementBlock"])("td",{key:n,onClick:()=>e.onClickTablecell(t),class:Object(o["normalizeClass"])({"clickable-cell":null===t||void 0===t||null===(a=t.column)||void 0===a?void 0:a.tdClick})},[Object(o["createElementVNode"])("span",u,Object(o["toDisplayString"])(t.value),1)],10,l)}),128))]))),128))])])]),_:1}),Object(o["createVNode"])(C,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(O,{color:"dark"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(m,{onClick:t[1]||(t[1]=t=>e.toCSV()),size:"large"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(" CSV ")]),_:1}),Object(o["createVNode"])(m,{onClick:t[2]||(t[2]=t=>e.toPDF()),size:"large"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(" PDF ")]),_:1}),e.totalPages>1?(Object(o["openBlock"])(),Object(o["createBlock"])(m,{key:0,onClick:e.first,disabled:0===e.currentPage||e.totalPages<=2,size:"large",slot:"end"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(" First ")]),_:1},8,["onClick","disabled"])):Object(o["createCommentVNode"])("",!0),e.totalPages>1?(Object(o["openBlock"])(),Object(o["createBlock"])(m,{key:1,onClick:e.prev,disabled:!e.canPrev,color:"light",size:"large",slot:"end"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(" Prev ")]),_:1},8,["onClick","disabled"])):Object(o["createCommentVNode"])("",!0),e.totalPages>1?(Object(o["openBlock"])(),Object(o["createBlock"])(m,{key:2,onClick:e.selectPage,size:"large",slot:"end",color:"light"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.currentPage)+" / "+Object(o["toDisplayString"])(e.totalPages-1),1)]),_:1},8,["onClick"])):Object(o["createCommentVNode"])("",!0),e.totalPages>1?(Object(o["openBlock"])(),Object(o["createBlock"])(m,{key:3,onClick:e.next,disabled:!e.canNext,color:"light",size:"large",slot:"end"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(" Next ")]),_:1},8,["onClick","disabled"])):Object(o["createCommentVNode"])("",!0),e.totalPages>1?(Object(o["openBlock"])(),Object(o["createBlock"])(m,{key:4,onClick:e.last,disabled:e.currentPage+1>=e.totalPages||e.totalPages<=2,size:"large",slot:"end"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(" Last ")]),_:1},8,["onClick","disabled"])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(m,{onClick:e.finish,color:"success",size:"large",slot:"end"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(" Finish ")]),_:1},8,["onClick"])]),_:1})]),_:1})],64)}n("14d9"),n("13d5");var h=n("d867"),p=n("ff79"),f=n("c731"),b=n("2ef0"),m=n("25da"),g=n("d95e");function v(e){return Array.isArray?Array.isArray(e):"[object Array]"===N(e)}const y=1/0;function O(e){if("string"==typeof e)return e;let t=e+"";return"0"==t&&1/e==-y?"-0":t}function j(e){return null==e?"":O(e)}function k(e){return"string"===typeof e}function x(e){return"number"===typeof e}function C(e){return!0===e||!1===e||_(e)&&"[object Boolean]"==N(e)}function D(e){return"object"===typeof e}function _(e){return D(e)&&null!==e}function w(e){return void 0!==e&&null!==e}function I(e){return!e.trim().length}function N(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const T="Incorrect 'index' type",E=e=>"Invalid value for key "+e,M=e=>`Pattern length exceeds max of ${e}.`,S=e=>`Missing ${e} property in key`,V=e=>`Property 'weight' in key '${e}' must be a positive integer`,F=Object.prototype.hasOwnProperty;class L{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(e=>{let n=P(e);t+=n.weight,this._keys.push(n),this._keyMap[n.id]=n,t+=n.weight}),this._keys.forEach(e=>{e.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function P(e){let t=null,n=null,o=null,a=1,r=null;if(k(e)||v(e))o=e,t=A(e),n=B(e);else{if(!F.call(e,"name"))throw new Error(S("name"));const i=e.name;if(o=i,F.call(e,"weight")&&(a=e.weight,a<=0))throw new Error(V(i));t=A(i),n=B(i),r=e.getFn}return{path:t,id:n,weight:a,src:o,getFn:r}}function A(e){return v(e)?e:e.split(".")}function B(e){return v(e)?e.join("."):e}function $(e,t){let n=[],o=!1;const a=(e,t,r)=>{if(w(e))if(t[r]){let i=t[r];const c=e[i];if(!w(c))return;if(r===t.length-1&&(k(c)||x(c)||C(c)))n.push(j(c));else if(v(c)){o=!0;for(let e=0,n=c.length;e<n;e+=1)a(c[e],t,r+1)}else t.length&&a(c,t,r+1)}else n.push(e)};return a(e,k(t)?t.split("."):t,0),o?n:n[0]}const R={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},U={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},z={location:0,threshold:.6,distance:100},q={useExtendedSearch:!1,getFn:$,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var K={...U,...R,...z,...q};const Y=/[^ ]+/g;function H(e=1,t=3){const n=new Map,o=Math.pow(10,t);return{get(t){const a=t.match(Y).length;if(n.has(a))return n.get(a);const r=1/Math.pow(a,.5*e),i=parseFloat(Math.round(r*o)/o);return n.set(a,i),i},clear(){n.clear()}}}class W{constructor({getFn:e=K.getFn,fieldNormWeight:t=K.fieldNormWeight}={}){this.norm=H(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((e,t)=>{this._keysMap[e.id]=t})}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,k(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){const t=this.size();k(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,n=this.size();t<n;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!w(e)||I(e))return;let n={v:e,i:t,n:this.norm.get(e)};this.records.push(n)}_addObject(e,t){let n={i:t,$:{}};this.keys.forEach((t,o)=>{let a=t.getFn?t.getFn(e):this.getFn(e,t.path);if(w(a))if(v(a)){let e=[];const t=[{nestedArrIndex:-1,value:a}];while(t.length){const{nestedArrIndex:n,value:o}=t.pop();if(w(o))if(k(o)&&!I(o)){let t={v:o,i:n,n:this.norm.get(o)};e.push(t)}else v(o)&&o.forEach((e,n)=>{t.push({nestedArrIndex:n,value:e})})}n.$[o]=e}else if(k(a)&&!I(a)){let e={v:a,n:this.norm.get(a)};n.$[o]=e}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function Q(e,t,{getFn:n=K.getFn,fieldNormWeight:o=K.fieldNormWeight}={}){const a=new W({getFn:n,fieldNormWeight:o});return a.setKeys(e.map(P)),a.setSources(t),a.create(),a}function G(e,{getFn:t=K.getFn,fieldNormWeight:n=K.fieldNormWeight}={}){const{keys:o,records:a}=e,r=new W({getFn:t,fieldNormWeight:n});return r.setKeys(o),r.setIndexRecords(a),r}function J(e,{errors:t=0,currentLocation:n=0,expectedLocation:o=0,distance:a=K.distance,ignoreLocation:r=K.ignoreLocation}={}){const i=t/e.length;if(r)return i;const c=Math.abs(o-n);return a?i+c/a:c?1:i}function Z(e=[],t=K.minMatchCharLength){let n=[],o=-1,a=-1,r=0;for(let i=e.length;r<i;r+=1){let i=e[r];i&&-1===o?o=r:i||-1===o||(a=r-1,a-o+1>=t&&n.push([o,a]),o=-1)}return e[r-1]&&r-o>=t&&n.push([o,r-1]),n}const X=32;function ee(e,t,n,{location:o=K.location,distance:a=K.distance,threshold:r=K.threshold,findAllMatches:i=K.findAllMatches,minMatchCharLength:c=K.minMatchCharLength,includeMatches:s=K.includeMatches,ignoreLocation:l=K.ignoreLocation}={}){if(t.length>X)throw new Error(M(X));const u=t.length,d=e.length,h=Math.max(0,Math.min(o,d));let p=r,f=h;const b=c>1||s,m=b?Array(d):[];let g;while((g=e.indexOf(t,f))>-1){let e=J(t,{currentLocation:g,expectedLocation:h,distance:a,ignoreLocation:l});if(p=Math.min(e,p),f=g+u,b){let e=0;while(e<u)m[g+e]=1,e+=1}}f=-1;let v=[],y=1,O=u+d;const j=1<<u-1;for(let x=0;x<u;x+=1){let o=0,r=O;while(o<r){const e=J(t,{errors:x,currentLocation:h+r,expectedLocation:h,distance:a,ignoreLocation:l});e<=p?o=r:O=r,r=Math.floor((O-o)/2+o)}O=r;let c=Math.max(1,h-r+1),s=i?d:Math.min(h+r,d)+u,g=Array(s+2);g[s+1]=(1<<x)-1;for(let i=s;i>=c;i-=1){let o=i-1,r=n[e.charAt(o)];if(b&&(m[o]=+!!r),g[i]=(g[i+1]<<1|1)&r,x&&(g[i]|=(v[i+1]|v[i])<<1|1|v[i+1]),g[i]&j&&(y=J(t,{errors:x,currentLocation:o,expectedLocation:h,distance:a,ignoreLocation:l}),y<=p)){if(p=y,f=o,f<=h)break;c=Math.max(1,2*h-f)}}const k=J(t,{errors:x+1,currentLocation:h,expectedLocation:h,distance:a,ignoreLocation:l});if(k>p)break;v=g}const k={isMatch:f>=0,score:Math.max(.001,y)};if(b){const e=Z(m,c);e.length?s&&(k.indices=e):k.isMatch=!1}return k}function te(e){let t={};for(let n=0,o=e.length;n<o;n+=1){const a=e.charAt(n);t[a]=(t[a]||0)|1<<o-n-1}return t}class ne{constructor(e,{location:t=K.location,threshold:n=K.threshold,distance:o=K.distance,includeMatches:a=K.includeMatches,findAllMatches:r=K.findAllMatches,minMatchCharLength:i=K.minMatchCharLength,isCaseSensitive:c=K.isCaseSensitive,ignoreLocation:s=K.ignoreLocation}={}){if(this.options={location:t,threshold:n,distance:o,includeMatches:a,findAllMatches:r,minMatchCharLength:i,isCaseSensitive:c,ignoreLocation:s},this.pattern=c?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const l=(e,t)=>{this.chunks.push({pattern:e,alphabet:te(e),startIndex:t})},u=this.pattern.length;if(u>X){let e=0;const t=u%X,n=u-t;while(e<n)l(this.pattern.substr(e,X),e),e+=X;if(t){const e=u-X;l(this.pattern.substr(e),e)}}else l(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,includeMatches:n}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let t={isMatch:!0,score:0};return n&&(t.indices=[[0,e.length-1]]),t}const{location:o,distance:a,threshold:r,findAllMatches:i,minMatchCharLength:c,ignoreLocation:s}=this.options;let l=[],u=0,d=!1;this.chunks.forEach(({pattern:t,alphabet:h,startIndex:p})=>{const{isMatch:f,score:b,indices:m}=ee(e,t,h,{location:o+p,distance:a,threshold:r,findAllMatches:i,minMatchCharLength:c,includeMatches:n,ignoreLocation:s});f&&(d=!0),u+=b,f&&m&&(l=[...l,...m])});let h={isMatch:d,score:d?u/this.chunks.length:1};return d&&n&&(h.indices=l),h}}class oe{constructor(e){this.pattern=e}static isMultiMatch(e){return ae(e,this.multiRegex)}static isSingleMatch(e){return ae(e,this.singleRegex)}search(){}}function ae(e,t){const n=e.match(t);return n?n[1]:null}class re extends oe{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class ie extends oe{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const t=e.indexOf(this.pattern),n=-1===t;return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class ce extends oe{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class se extends oe{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class le extends oe{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class ue extends oe{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class de extends oe{constructor(e,{location:t=K.location,threshold:n=K.threshold,distance:o=K.distance,includeMatches:a=K.includeMatches,findAllMatches:r=K.findAllMatches,minMatchCharLength:i=K.minMatchCharLength,isCaseSensitive:c=K.isCaseSensitive,ignoreLocation:s=K.ignoreLocation}={}){super(e),this._bitapSearch=new ne(e,{location:t,threshold:n,distance:o,includeMatches:a,findAllMatches:r,minMatchCharLength:i,isCaseSensitive:c,ignoreLocation:s})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class he extends oe{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t,n=0;const o=[],a=this.pattern.length;while((t=e.indexOf(this.pattern,n))>-1)n=t+a,o.push([t,n-1]);const r=!!o.length;return{isMatch:r,score:r?0:1,indices:o}}}const pe=[re,he,ce,se,ue,le,ie,de],fe=pe.length,be=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,me="|";function ge(e,t={}){return e.split(me).map(e=>{let n=e.trim().split(be).filter(e=>e&&!!e.trim()),o=[];for(let a=0,r=n.length;a<r;a+=1){const e=n[a];let r=!1,i=-1;while(!r&&++i<fe){const n=pe[i];let a=n.isMultiMatch(e);a&&(o.push(new n(a,t)),r=!0)}if(!r){i=-1;while(++i<fe){const n=pe[i];let a=n.isSingleMatch(e);if(a){o.push(new n(a,t));break}}}}return o})}const ve=new Set([de.type,he.type]);class ye{constructor(e,{isCaseSensitive:t=K.isCaseSensitive,includeMatches:n=K.includeMatches,minMatchCharLength:o=K.minMatchCharLength,ignoreLocation:a=K.ignoreLocation,findAllMatches:r=K.findAllMatches,location:i=K.location,threshold:c=K.threshold,distance:s=K.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:n,minMatchCharLength:o,findAllMatches:r,ignoreLocation:a,location:i,threshold:c,distance:s},this.pattern=t?e:e.toLowerCase(),this.query=ge(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:o}=this.options;e=o?e:e.toLowerCase();let a=0,r=[],i=0;for(let c=0,s=t.length;c<s;c+=1){const o=t[c];r.length=0,a=0;for(let t=0,c=o.length;t<c;t+=1){const c=o[t],{isMatch:s,indices:l,score:u}=c.search(e);if(!s){i=0,a=0,r.length=0;break}if(a+=1,i+=u,n){const e=c.constructor.type;ve.has(e)?r=[...r,...l]:r.push(l)}}if(a){let e={isMatch:!0,score:i/a};return n&&(e.indices=r),e}}return{isMatch:!1,score:1}}}const Oe=[];function je(...e){Oe.push(...e)}function ke(e,t){for(let n=0,o=Oe.length;n<o;n+=1){let o=Oe[n];if(o.condition(e,t))return new o(e,t)}return new ne(e,t)}const xe={AND:"$and",OR:"$or"},Ce={PATH:"$path",PATTERN:"$val"},De=e=>!(!e[xe.AND]&&!e[xe.OR]),_e=e=>!!e[Ce.PATH],we=e=>!v(e)&&D(e)&&!De(e),Ie=e=>({[xe.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function Ne(e,t,{auto:n=!0}={}){const o=e=>{let a=Object.keys(e);const r=_e(e);if(!r&&a.length>1&&!De(e))return o(Ie(e));if(we(e)){const o=r?e[Ce.PATH]:a[0],i=r?e[Ce.PATTERN]:e[o];if(!k(i))throw new Error(E(o));const c={keyId:B(o),pattern:i};return n&&(c.searcher=ke(i,t)),c}let i={children:[],operator:a[0]};return a.forEach(t=>{const n=e[t];v(n)&&n.forEach(e=>{i.children.push(o(e))})}),i};return De(e)||(e=Ie(e)),o(e)}function Te(e,{ignoreFieldNorm:t=K.ignoreFieldNorm}){e.forEach(e=>{let n=1;e.matches.forEach(({key:e,norm:o,score:a})=>{const r=e?e.weight:null;n*=Math.pow(0===a&&r?Number.EPSILON:a,(r||1)*(t?1:o))}),e.score=n})}function Ee(e,t){const n=e.matches;t.matches=[],w(n)&&n.forEach(e=>{if(!w(e.indices)||!e.indices.length)return;const{indices:n,value:o}=e;let a={indices:n,value:o};e.key&&(a.key=e.key.src),e.idx>-1&&(a.refIndex=e.idx),t.matches.push(a)})}function Me(e,t){t.score=e.score}function Se(e,t,{includeMatches:n=K.includeMatches,includeScore:o=K.includeScore}={}){const a=[];return n&&a.push(Ee),o&&a.push(Me),e.map(e=>{const{idx:n}=e,o={item:t[n],refIndex:n};return a.length&&a.forEach(t=>{t(e,o)}),o})}class Ve{constructor(e,t={},n){this.options={...K,...t},this.options.useExtendedSearch,this._keyStore=new L(this.options.keys),this.setCollection(e,n)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof W))throw new Error(T);this._myIndex=t||Q(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){w(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=(()=>!1)){const t=[];for(let n=0,o=this._docs.length;n<o;n+=1){const a=this._docs[n];e(a,n)&&(this.removeAt(n),n-=1,o-=1,t.push(a))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:n,includeScore:o,shouldSort:a,sortFn:r,ignoreFieldNorm:i}=this.options;let c=k(e)?k(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return Te(c,{ignoreFieldNorm:i}),a&&c.sort(r),x(t)&&t>-1&&(c=c.slice(0,t)),Se(c,this._docs,{includeMatches:n,includeScore:o})}_searchStringList(e){const t=ke(e,this.options),{records:n}=this._myIndex,o=[];return n.forEach(({v:e,i:n,n:a})=>{if(!w(e))return;const{isMatch:r,score:i,indices:c}=t.searchIn(e);r&&o.push({item:e,idx:n,matches:[{score:i,value:e,norm:a,indices:c}]})}),o}_searchLogical(e){const t=Ne(e,this.options),n=(e,t,o)=>{if(!e.children){const{keyId:n,searcher:a}=e,r=this._findMatches({key:this._keyStore.get(n),value:this._myIndex.getValueForItemAtKeyId(t,n),searcher:a});return r&&r.length?[{idx:o,item:t,matches:r}]:[]}const a=[];for(let r=0,i=e.children.length;r<i;r+=1){const i=e.children[r],c=n(i,t,o);if(c.length)a.push(...c);else if(e.operator===xe.AND)return[]}return a},o=this._myIndex.records,a={},r=[];return o.forEach(({$:e,i:o})=>{if(w(e)){let i=n(t,e,o);i.length&&(a[o]||(a[o]={idx:o,item:e,matches:[]},r.push(a[o])),i.forEach(({matches:e})=>{a[o].matches.push(...e)}))}}),r}_searchObjectList(e){const t=ke(e,this.options),{keys:n,records:o}=this._myIndex,a=[];return o.forEach(({$:e,i:o})=>{if(!w(e))return;let r=[];n.forEach((n,o)=>{r.push(...this._findMatches({key:n,value:e[o],searcher:t}))}),r.length&&a.push({idx:o,item:e,matches:r})}),a}_findMatches({key:e,value:t,searcher:n}){if(!w(t))return[];let o=[];if(v(t))t.forEach(({v:t,i:a,n:r})=>{if(!w(t))return;const{isMatch:i,score:c,indices:s}=n.searchIn(t);i&&o.push({score:c,key:e,value:t,idx:a,norm:r,indices:s})});else{const{v:a,n:r}=t,{isMatch:i,score:c,indices:s}=n.searchIn(a);i&&o.push({score:c,key:e,value:a,norm:r,indices:s})}return o}}Ve.version="6.6.2",Ve.createIndex=Q,Ve.parseIndex=G,Ve.config=K,Ve.parseQuery=Ne,je(ye);var Fe=n("ba82"),Le=n("1c74"),Pe=n("6605"),Ae=n("5a0c"),Be=n.n(Ae),$e=Object(o["defineComponent"])({components:{IonToolbar:h["IonToolbar"],IonItem:h["IonItem"],IonIcon:h["IonIcon"],IonLabel:h["IonLabel"],IonTitle:h["IonTitle"],IonHeader:h["IonHeader"],IonButton:h["IonButton"],IonFooter:h["IonFooter"],IonContent:h["IonContent"],IonButtons:h["IonButtons"],IonChip:h["IonChip"]},props:{title:{type:String,default:"Report"},subtitle:{type:String},columns:{type:Object,required:!0},columnData:{type:Array,default:()=>[]},enablePagination:{type:Boolean,default:!0},rowsPerPage:{type:Number,default:10},onFinish:{type:Function},onRefresh:{type:Function},onConfigure:{type:Function},csvQuarter:{type:String}},setup(e){const t=Object(Pe["i"])(),n=Object(o["ref"])([]),a=Object(o["ref"])(0),r=Object(o["ref"])(""),i=Object(o["ref"])(""),c=Object(o["ref"])("desc"),s=Object(o["computed"])(()=>{const t=Object(m["a"])(n.value)[c.value](e=>e.data[i.value]);if(r.value){const n=new Ve(t,{threshold:.3,keys:["searchIndex"],useExtendedSearch:!0});return n.search(r.value,{limit:e.rowsPerPage}).map(e=>e.item)}return t}),l=Object(o["computed"])(()=>Object(b["chunk"])(s.value,e.rowsPerPage).length),u=Object(o["computed"])(()=>a.value+2<=l.value),d=Object(o["computed"])(()=>a.value>0),h=Object(o["computed"])(()=>{const t=Object(b["chunk"])(s.value,e.rowsPerPage);return t[a.value]}),v=e=>{i.value=e,c.value="asc"===c.value?"desc":"asc"},y=()=>Object(f["c"])(e=>{const t=parseInt(e);parseInt(e)<=l.value&&(a.value=t)},{title:"Select page"}),O=()=>{Object(f["b"])({id:"search",helpText:"Find",type:g["b"].TT_TEXT},e=>{setTimeout(()=>{r.value=e?e.value:"",a.value=0},3)})},j=()=>a.value=0,k=()=>a.value=l.value-1||0,x=()=>a.value+=1,C=()=>a.value-=1,D=()=>{"function"===typeof e.onFinish?e.onFinish():t.push("/")},_=e=>{try{var t,n;if("function"===typeof(null===(t=e.column)||void 0===t?void 0:t.tdClick))null===(n=e.column)||void 0===n||n.tdClick(e);return}catch(o){console.error(o)}},w=()=>e.columns.reduce((e,t)=>e.concat(t),[]).filter(e=>e.value||e.ref),I=t=>{const o=w().filter(e=>[!e.canExport||(null===e||void 0===e?void 0:e.canExport[t]),"boolean"!==typeof e.exportable||e.exportable].every(Boolean)),a=o.map(e=>e.exportedValue&&e.exportedValue.column?e.exportedValue.column(e):e.secondaryLabel||e.label),r=o.map(e=>e.ref),i=n.value.reduce((e,t)=>{const n=t.row.filter(({column:e})=>r.includes(e.ref)).map(e=>e.column.exportedValue&&e.column.exportedValue.dataValue?e.column.exportedValue.dataValue(e):e.value);return[...e,n]},[]),c=`${Le["e"].getLocationName()||"Unknown site"}-${e.title}-${e.subtitle}-${Le["e"].getSessionDate()}`;return{headers:a,rows:i,filename:c}},N=()=>{const{headers:e,rows:t,filename:n}=I("pdf");Object(Fe["c"])([e],t,n,!0)},T=()=>{const{headers:t,rows:n,filename:o}=I("csv");Object(Fe["a"])([t],[...n,["Date Created: "+Be()().format("DD/MMM/YYYY HH:MM:ss")],["Quarter: "+(e.csvQuarter||e.subtitle)],["HIS-Core Version: "+Le["e"].getCoreVersion()],["API Version: "+Le["e"].getApiVersion()],["Site UUID: "+Le["e"].getSiteUUID()],["Generated by: "+Le["e"].getUserName()]],o)},E=e=>{e.forEach(e=>{const t=w().map(t=>{let n="";try{n=Object(b["isEmpty"])(e)?"...":"function"===typeof t.value?t.value(e):e[t.ref]||""}catch(o){n="_ERROR_",console.error(o)}return{column:t,data:e,value:n,[t.ref||"nada"]:n}});n.value.push({row:t,data:e,searchIndex:[...t,t.map(e=>e.value).join(" ")]})})};return Object(o["watch"])(()=>e.columnData,t=>{if(n.value=[],!Array.isArray(t)||!t.length)return a.value=0,r.value="",i.value="",void E(Array.from({length:e.rowsPerPage}).map(()=>({})));E(t)},{immediate:!0,deep:!0}),{first:j,last:k,next:x,prev:C,selectPage:y,sortColumn:v,searchTable:O,onClickTablecell:_,toPDF:N,toCSV:T,finish:D,sync:p["sync"],search:p["search"],close:p["close"],arrowUp:p["arrowUp"],arrowDown:p["arrowDown"],document:p["document"],page:h,canNext:u,searchTerm:r,totalPages:l,sortOrder:c,canPrev:d,currentPage:a,columnSorted:i}}}),Re=(n("e416"),n("d959")),Ue=n.n(Re);const ze=Ue()($e,[["render",d],["__scopeId","data-v-59e312b6"]]);t["a"]=ze},ad9e:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n("ade3"),a=(n("14d9"),n("1c74")),r=n("9283");class i extends a["e"]{constructor(){super(),Object(o["a"])(this,"programID",void 0),Object(o["a"])(this,"startDate",void 0),Object(o["a"])(this,"endDate",void 0),Object(o["a"])(this,"date",void 0),this.endDate="",this.startDate="",this.date=a["e"].getSessionDate(),this.programID=a["e"].getProgramID()}getPepfarReport(e){return this.getReport("pepfar_cxca",{report_name:e})}getClinicReport(e){return this.getReport("screened_for_cxca",{report_name:e})}getMohReport(e){return this.getReport("screened_for_cxca",{report_name:e})}getDateIntervalPeriod(){return`${r["c"].toStandardHisDisplayFormat(this.startDate)} - ${r["c"].toStandardHisDisplayFormat(this.endDate)}`}setStartDate(e){this.startDate=e}setEndDate(e){this.endDate=e}getReportPeriod(){return this.startDate&&this.endDate?`${r["c"].toStandardHisDisplayFormat(this.startDate)} - ${r["c"].toStandardHisDisplayFormat(this.endDate)}`:"-"}getReport(e,t={}){return a["e"].getJson(e,this.buildRequest(t))}buildRequest(e={}){const t={date:this.date,program_id:24};return this.startDate&&this.endDate&&(t["start_date"]=this.startDate,t["end_date"]=this.endDate),{...t,...e}}static getReportQuarters(e=4){const t=[];let n=r["c"].getCurrentYear();for(let o=0;o<e;++o)t.push({name:"Q4 "+n,start:n+"-10-01",end:n+"-12-31"}),t.push({name:"Q3 "+n,start:n+"-07-01",end:n+"-09-30"}),t.push({name:"Q2 "+n,start:n+"-04-01",end:n+"-06-30"}),t.push({name:"Q1 "+n,start:n+"-01-01",end:n+"-03-31"}),--n;return t}}},b446:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return k}));n("14d9"),n("13d5");var o,a=n("d95e"),r=[{label:"Jan",value:1},{label:"Feb",value:2},{label:"Mar",value:3},{label:"Apr",value:4},{label:"May",value:5},{label:"Jun",value:6},{label:"Jul",value:7},{label:"Aug",value:8},{label:"Sep",value:9},{label:"Oct",value:10},{label:"Nov",value:11},{label:"Dec",value:12}],i=n("9283"),c=n("2706"),s=n("3800"),l=n("6be2"),u=n("5a0c"),d=n.n(u),h=n("1c74");function p(e,t,n=!0){const o=[];return n&&o.push("UNKNOWN"),{id:e,helpText:t+" Year",appearInSummary:()=>!1,type:a["b"].TT_TEXT,config:{customKeyboard:[s["i"],[o,["DELETE"]]]}}}function f(e,t){return{id:e,helpText:t+" Month",appearInSummary:()=>!1,type:a["b"].TT_SELECT,options:()=>r}}function b(e,t){return{id:e,helpText:t+" Day",type:a["b"].TT_MONTHLY_DAYS,appearInSummary:()=>!1}}function m(e,t){return{id:e,helpText:t+" Estimated period",type:a["b"].TT_SELECT,appearInSummary:()=>!1,options:()=>[{label:"6 months ago",value:180},{label:"12 months ago",value:365},{label:"18 months ago",value:540},{label:"24 months ago",value:730},{label:"Over 2 years ago",value:730}]}}function g(e,t){return{id:e,helpText:t+" Age Estimate",type:a["b"].TT_NUMBER,appearInSummary:()=>!1,config:{keypad:l["e"]}}}function v(e){return parseInt(e)<10?"0"+e:e}async function y(e,t,n){if(t.defaultValue){const o=await t.defaultValue(e);if(o){const[e,t,a]=o.split("-");switch(n){case"Year":return e||"";case"Month":return parseInt(t)||"";case"Day":return parseInt(a)||""}}}return""}function O(e){return i["c"].toStandardHisDisplayFormat(e)}function j(e,t,n,o){if(t.minDate){const a=t.minDate(n,o);if(new Date(e)<new Date(a))return[`${O(e)} is less than minimum date of ${O(a)}`]}if(t.maxDate){const a=t.maxDate(n,o);if(a&&new Date(e)>new Date(a))return[`${O(e)} is greater than max date of  ${O(a)}`]}}function k(e,t=""){let n="",a="",s="",l="",u=!1;const k="year_"+e.id,x="month_"+e.id,C="day_"+e.id,D="age_estimate_"+e.id,_="duration_estimate_"+e.id,w=p(k,e.helpText,e.estimation.allowUnknown),I=f(x,e.helpText),N=b(C,e.helpText),T=g(D,e.helpText),E=m(_,e.helpText),M="boolean"===typeof e.estimation.allowUnknownMonthDay&&e.estimation.allowUnknownMonthDay,S=t=>!(t[k]&&t[k].value&&["Unknown"].includes(t[k].value))&&(!e.condition||e.condition(t)),V=(e,t)=>{const n=[{type:"year",value:a,default:"YYYY"},{type:"month",value:s,default:"MM"},{type:"day",value:l,default:"DD"}];return n.reduce((n,o)=>{const a=[null,void 0,"Unknown",""];return t===o.type?a.includes(e)?n.push(o.default):n.push(e):a.includes(o.value)?n.push(o.default):n.push(o.value),n},[]).join("-")};"function"===typeof e.init&&(w.init=e.init),w.updateHelpTextOnValue=e=>`${w.helpText} (${V(null===e||void 0===e?void 0:e.label,"year")})`,w.proxyID=e.id,w.unload=e=>a=e.value.toString(),w.config={...w.config,...e.config},w.defaultValue=t=>y(t,e,"Year"),w.condition=t=>!e.condition||e.condition(t),w.validation=(t,n,o)=>{if(e.required&&c["a"].required(t))return["Year cannot be empty"];const a=t?t.value:"";if(!e.estimation.allowUnknown&&a.toString().match(/unknown/i))return["Value unknown is not permitted"];if(a&&!["Unknown"].includes(a)&&isNaN(a)||a<1900)return["Invalid Year"];if(a&&"function"===typeof e.minDate){const t=i["c"].getYear(e.minDate(n,o));if(parseInt(a)<t)return[`Year of ${a} is less than Minimum year of ${t}`]}if(a&&"function"===typeof e.maxDate){const t=e.maxDate(n,o);if(t&&a>i["c"].getYear(t))return[`Year of ${a} exceeds Maximum year of ${i["c"].getYear(t)}`]}return null},w.summaryMapValue=()=>({label:e.summaryLabel||e.helpText,value:n?O(n):"Unknown"}),w.appearInSummary=(t,n)=>n===e.id,w.computedValue=t=>{if(n){const[o,a,r]=n.split("-");return n=`${t.value}-${a}-${r}`,e.computeValue(n,!1)}if(t&&"Unknown"===t.value)return n="",e.computeValue("Unknown",!1)},I.updateHelpTextOnValue=e=>`${I.helpText} (${V(null===e||void 0===e?void 0:e.label,"month")})`,I.proxyID=e.id,I.unload=e=>s=v(e.value.toString()),I.condition=e=>S(e),I.validation=e=>c["a"].required(e),I.defaultValue=t=>y(t,e,"Month"),M&&(I.options=()=>[...r,{label:"Unknown",value:"Unknown"}]),I.computedValue=(t,o)=>{if((""+t.value).match(/unknown/i))return n=o[k].value+"-07-15",e.computeValue(n,!0);if(n){const[o,a,r]=n.split("-"),i=v(""+t.value);return n=`${o}-${i}-${r}`,e.computeValue(n,!1)}},N.proxyID=e.id,N.updateHelpTextOnValue=e=>`${N.helpText} (${V(null===e||void 0===e?void 0:e.label,"day")})`,N.condition=e=>!(""+e[x].value).match(/unknown/i)&&S(e),N.validation=(t,o,r)=>c["a"].required(t)?["Day is required for date"]:(u=!!(""+t.value).match(/unknown/i),l=u?"15":v(""+t.value),n=`${a}-${s}-${l}`,j(n,e,o,r)),N.defaultValue=t=>y(t,e,"Day"),N.computedValue=()=>e.computeValue(n,u),N.unload=(t,n,o,a)=>{e.unload&&e.unload(t,n,o,a)},N.beforeNext=(t,o)=>!e.beforeNext||e.beforeNext(n,o),N.config={year:e=>e[k].value,month:e=>e[x].value},M||(N.config.keyboardActions=[]);const F=(t,n)=>{const o=["Unknown"===t[k].value,!e.condition||e.condition(t),e.estimation.estimationFieldType===n];return o.every(Boolean)};return T.proxyID=e.id,T.validation=(t,o,a)=>{if(t&&t.value>300)return["Age estimate is too high and exceeding hard limit of 300"];if(isNaN(parseInt(t.value.toString())))return["Please enter a valid number"];const r=/^(12[0-7]|1[01][0-9]|[1-9]?[0-9])$/;if(!t.value.toString().match(r))return["Not a valid age estimate"];const i=d()(h["e"].getSessionDate()).subtract(t.value,"years").year();return n=i+"-07-15",j(n,e,o,a)},T.condition=e=>F(e,o.AGE_ESTIMATE_FIELD),T.computedValue=()=>e.computeValue(n,!0),T.beforeNext=(t,o)=>!e.beforeNext||e.beforeNext(n,o),E.proxyID=e.id,E.validation=(t,o,a)=>c["a"].required(t)?["Please select an estimate"]:(n=d()(h["e"].getSessionDate()).subtract(t.value,"day").format(i["b"]),j(n,e,o,a)),E.condition=e=>F(e,o.MONTH_ESTIMATE_FIELD),E.computedValue=()=>e.computeValue(n,!0),E.beforeNext=(t,o)=>!e.beforeNext||e.beforeNext(n,o),[w,I,N,T,E]}(function(e){e["AGE_ESTIMATE_FIELD"]="age-estimate-field",e["MONTH_ESTIMATE_FIELD"]="month-period-estimate-field"})(o||(o={}))},c731:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return l}));var o=n("d867"),a=n("e6e9"),r=n("9441"),i=n("10be");async function c(e,t,n=null){(await o["modalController"].create({component:r["a"],backdropDismiss:!1,cssClass:"full-modal",componentProps:{onFinish:t,fields:e,skipSummary:!0,disableAutoModalDismiss:!0,cancelAction:()=>{"function"===typeof n&&n(),o["modalController"].dismiss()}}})).present()}async function s(e,t={}){const n="boolean"!==typeof(null===t||void 0===t?void 0:t.strictNumbers)||(null===t||void 0===t?void 0:t.strictNumbers),a=await o["modalController"].create({component:i["a"],backdropDismiss:!1,cssClass:"keypad-modal custom-modal-backdrop",componentProps:{title:(null===t||void 0===t?void 0:t.title)||"",preset:(null===t||void 0===t?void 0:t.preset)||"",toggleButton:null===t||void 0===t?void 0:t.toggleButton,strictNumbers:n,customKeyboard:null===t||void 0===t?void 0:t.customKeyboard,noFloat:"boolean"===typeof(null===t||void 0===t?void 0:t.noFloat)&&t.noFloat,onKeyPress(t,o){e(n?parseInt(t):t,o)}}});a.present()}async function l(e,t){(await o["modalController"].create({component:a["a"],backdropDismiss:!1,cssClass:"full-modal",componentProps:{dismissType:"modal",currentField:e,onFinish:t}})).present()}},c924:function(e,t,n){"use strict";var o=n("7a23");function a(e,t,n,a,r,i){const c=Object(o["resolveComponent"])("ion-button");return Object(o["openBlock"])(),Object(o["createElementBlock"])("table",null,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.layout,(t,n)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",{key:n},[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(t,(n,a)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("td",{class:"his-keyboard-margin",key:"btn-"+a},[n?(Object(o["openBlock"])(),Object(o["createBlock"])(c,{key:0,style:Object(o["normalizeStyle"])({width:e.btnSize}),class:Object(o["normalizeClass"])(`his-keyboard-btn btn-${n}-${e.dynamicClass(t)}`),onClick:()=>e.keyPress(n)},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(n),1)]),_:2},1032,["style","class","onClick"])):Object(o["createCommentVNode"])("",!0)]))),128))]))),128))])}var r=n("d867"),i=Object(o["defineComponent"])({components:{IonButton:r["IonButton"]},props:{btnSize:{type:String,default:"90%"},layout:{type:Array,required:!0,default:()=>[]},onKeyPress:{type:Function,required:!0}},methods:{keyPress(e){this.onKeyPress(e)},dynamicClass(e){return 3==e.length&&"Unknown"==e[0]?"Keypad":e[0]}}}),c=n("d959"),s=n.n(c);const l=s()(i,[["render",a]]);t["a"]=l},e416:function(e,t,n){"use strict";n("16e8")},e6e9:function(e,t,n){"use strict";var o=n("7a23");function a(e,t,n,a,r,i){const c=Object(o["resolveComponent"])("ion-title"),s=Object(o["resolveComponent"])("ion-toolbar"),l=Object(o["resolveComponent"])("ion-header"),u=Object(o["resolveComponent"])("ion-content"),d=Object(o["resolveComponent"])("ion-button"),h=Object(o["resolveComponent"])("ion-footer"),p=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(p,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(l,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(s,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(c,{class:"his-lg-text ion-text-center"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.currentField.helpText),1)]),_:1})]),_:1})]),_:1}),Object(o["createVNode"])(u,null,{default:Object(o["withCtx"])(()=>[(Object(o["openBlock"])(),Object(o["createBlock"])(o["KeepAlive"],null,[(Object(o["openBlock"])(),Object(o["createBlock"])(Object(o["resolveDynamicComponent"])(e.currentField.type),{key:e.currentField.id,currentFieldig:e.currentField.currentFieldig,options:e.currentField.options,preset:e.currentField.preset,clear:e.valueClearIndex,fdata:e.formData,config:e.currentField.config,cdata:e.computedFormData,activationState:e.state,onValue:e.currentField.onValue,defaultValue:e.currentField.defaultValue,onValueUpdate:e.currentField.onValueUpdate,onOnValue:e.onFieldValue},null,40,["currentFieldig","options","preset","clear","fdata","config","cdata","activationState","onValue","defaultValue","onValueUpdate","onOnValue"]))],1024))]),_:1}),Object(o["createVNode"])(h,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(s,{color:"light"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(d,{disabled:e.disableBtn,onClick:e.onClose,slot:"start",color:"danger",size:"large"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(" Close ")]),_:1},8,["disabled","onClick"]),Object(o["createVNode"])(d,{disabled:e.disableBtn,onClick:e.onClear,slot:"end",color:"warning",size:"large"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(" Clear ")]),_:1},8,["disabled","onClick"]),Object(o["createVNode"])(d,{disabled:e.disableBtn,onClick:e.onDone,slot:"end",color:"success",size:"large"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(" Done ")]),_:1},8,["disabled","onClick"])]),_:1})]),_:1})]),_:1})}var r=n("b5e4"),i=n("d95e"),c=n("d867");function s(){const e={};return i["a"].forEach(t=>{e[t]=Object(o["defineAsyncComponent"])(()=>n("f159")(`./${t}.vue`))}),e}var l=Object(o["defineComponent"])({name:"SingleFieldTouchForm",components:{IonPage:c["IonPage"],IonContent:c["IonContent"],IonFooter:c["IonFooter"],IonToolbar:c["IonToolbar"],IonButton:c["IonButton"],IonHeader:c["IonHeader"],IonTitle:c["IonTitle"],...s()},props:{dismissType:{type:String},onFinish:{type:Function,required:!0},currentField:{type:Object,required:!0}},data:()=>({valueClearIndex:0,formData:{},computedFormData:{},state:"",value:null,disableBtn:!1}),methods:{onClose(){"modal"===this.dismissType?c["modalController"].dismiss():this.$router.back()},onClear(){this.valueClearIndex+=1,this.value=null},onFieldValue(e){this.value=e},onDone(){if(this.disableBtn=!0,this.currentField.validation){const e=this.currentField.validation(this.value);if(this.disableBtn=!1,e)return Object(r["e"])(e.join(", "),6e4)}try{this.onFinish(this.value)}catch(e){Object(r["c"])(""+e),console.error(e)}this.onClose(),this.disableBtn=!1}}}),u=n("d959"),d=n.n(u);const h=d()(l,[["render",a]]);t["a"]=h}}]);
//# sourceMappingURL=chunk-8cf92160.a003097d.js.map