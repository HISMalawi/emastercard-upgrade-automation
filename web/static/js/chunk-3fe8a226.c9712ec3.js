(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3fe8a226"],{1276:function(t,e,n){"use strict";var i=n("d784"),a=n("44e7"),s=n("825a"),r=n("1d80"),o=n("4840"),c=n("8aa5"),u=n("50c4"),l=n("14c3"),d=n("9263"),g=n("d039"),v=[].push,p=Math.min,h=4294967295,f=!g((function(){return!RegExp(h,"y")}));i("split",2,(function(t,e,n){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var i=String(r(this)),s=void 0===n?h:n>>>0;if(0===s)return[];if(void 0===t)return[i];if(!a(t))return e.call(i,t,s);var o,c,u,l=[],g=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),p=0,f=new RegExp(t.source,g+"g");while(o=d.call(f,i)){if(c=f.lastIndex,c>p&&(l.push(i.slice(p,o.index)),o.length>1&&o.index<i.length&&v.apply(l,o.slice(1)),u=o[0].length,p=c,l.length>=s))break;f.lastIndex===o.index&&f.lastIndex++}return p===i.length?!u&&f.test("")||l.push(""):l.push(i.slice(p)),l.length>s?l.slice(0,s):l}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var a=r(this),s=void 0==e?void 0:e[t];return void 0!==s?s.call(e,a,n):i.call(String(a),e,n)},function(t,a){var r=n(i,t,this,a,i!==e);if(r.done)return r.value;var d=s(t),g=String(this),v=o(d,RegExp),b=d.unicode,m=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(f?"y":"g"),_=new v(f?d:"^(?:"+d.source+")",m),E=void 0===a?h:a>>>0;if(0===E)return[];if(0===g.length)return null===l(_,g)?[g]:[];var y=0,x=0,C=[];while(x<g.length){_.lastIndex=f?x:0;var w,S=l(_,f?g:g.slice(x));if(null===S||(w=p(u(_.lastIndex+(f?0:x)),g.length))===y)x=c(g,x,b);else{if(C.push(g.slice(y,x)),C.length===E)return C;for(var A=1;A<=S.length-1;A++)if(C.push(S[A]),C.length===E)return C;x=y=w}}return C.push(g.slice(y)),C}]}),!f)},"3a0c":function(t,e,n){"use strict";var i=n("f7b7"),a=n.n(i);a.a},"3fd1":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"d-flex",attrs:{id:"wrapper"}},[n("side-bar"),n("div",{attrs:{id:"page-content-wrapper"}},[n("top-nav"),n("div",{staticClass:"container-fluid"},[n("Registration",{staticStyle:{"margin-top":"10px"}})],1)],1)],1)])},a=[],s=n("ebd8"),r=n("7c08"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container",staticStyle:{width:"100%",margin:"auto"}},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-12"},[n("form",{attrs:{id:"msform"}},[n("form",{staticClass:"content-tab tab-pane fade show active shadow-lg p-3 mb-5 bg-white rounded form-template tab",attrs:{id:"pDetails"}},[n("h5",{staticStyle:{"font-weight":"bold"}},[t._v("HIV Clinic Registration")]),n("clinic-registration",{ref:"clinicRegistration",attrs:{patientId:t.PATIENT_ID},on:{addEncounter:t.addEncounter}}),n("input",{staticClass:"btn btn-primary clinical action-button",staticStyle:{position:"absolute",bottom:"17px",right:"45%"},attrs:{type:"button",name:"next",value:"Next Step"},on:{click:t.registrationObject}}),n("div",{staticClass:"errorTxt",staticStyle:{"margin-top":"10px","text-align":"center","font-weight":"bold"}})],1),n("form",{staticClass:"content-tab tab-pane fade show active shadow-lg p-3 mb-5 bg-white rounded form-template tab",attrs:{id:"gDetails"}},[t._m(0),n("staging",{ref:"staging",attrs:{patientId:t.PATIENT_ID},on:{addEncounter:t.addEncounter}}),n("input",{staticClass:"btn btn-primary previous action-button-previous",staticStyle:{position:"absolute",bottom:"30px",right:"50%"},attrs:{type:"button",name:"previous",value:"Previous"}}),n("input",{staticClass:"btn btn-primary staging action-button",staticStyle:{position:"absolute",bottom:"30px",right:"40%"},attrs:{type:"button",name:"next",value:"Next Step"},on:{click:t.stagingObject}}),n("div",{staticClass:"guardianError",staticStyle:{"margin-top":"10px",height:"1px","text-align":"center","font-weight":"bold"}})],1),n("form",{staticClass:"content-tab tab-pane fade show active shadow-lg p-3 mb-5 bg-white rounded form-template"},[t._m(1),Object.entries(t.registrationEncounter).length>0&&Object.entries(t.stagingEncounter).length>0?n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-6",staticStyle:{"text-align":"left"}},[n("label",{staticStyle:{"font-weight":"bold"}},[t._v("HIV Clinic Registration")]),n("table",{staticClass:"table table-striped"},[t._m(2),n("tbody",[n("tr",[n("td",[t._v("Year Last Taken ARVs")]),n("td",[t._v(t._s("Invalid date"==t.registrationEncounter["encounter"]["obs"]["yearLastTakenARVs"]["value_datetime"]?"Unknown":t.registrationEncounter["encounter"]["obs"]["yearLastTakenARVs"]["value_datetime"]||"N/A"))])]),n("tr",[n("td",[t._v("Ever registered at a clinic")]),n("td",[t._v(t._s(t.CONCEPTS[t.registrationEncounter["encounter"]["obs"]["everRegisteredAtClinic"]["value_coded"]]||"N/A"))])]),n("tr",[n("td",[t._v("ART #")]),n("td",[t._v(t._s(t.registrationEncounter["encounter"]["obs"]["artNumberAtPreviousLocation"]["value_text"]||"N/A"))])]),n("tr",[n("td",[t._v("Confirmatory Test")]),n("td",[t._v(t._s(t.CONCEPTS[t.registrationEncounter["encounter"]["obs"]["confirmatoryTest"]["value_coded"]]||"N/A"))])]),n("tr",[n("td",[t._v("ART Start Location")]),n("td",[t._v(t._s(t.registrationEncounter["encounter"]["obs"]["ARTStartLocation"]["value_text"]||"N/A"))])]),n("tr",[n("td",[t._v("Date ART Started")]),n("td",[t._v(t._s(null==t.registrationEncounter["encounter"]["obs"]["dateARTStarted"]["value_datetime"]||"Invalid date"==t.registrationEncounter["encounter"]["obs"]["dateARTStarted"]["value_datetime"]?"N/A":t.registrationEncounter["encounter"]["obs"]["dateARTStarted"]["value_datetime"]))])]),n("tr",[n("td",[t._v("Test Location")]),n("td",[t._v(t._s(t.registrationEncounter["encounter"]["obs"]["testLocation"]["value_text"]||"N/A"))])]),n("tr",[n("td",[t._v("Date of Test")]),n("td",[t._v(t._s("Invalid date"==t.registrationEncounter["encounter"]["obs"]["testDate"]["value_datetime"]?"N/A":t.registrationEncounter["encounter"]["obs"]["testDate"]["value_datetime"]))])])])])]),n("div",{staticClass:"col-md-6",staticStyle:{"text-align":"left"}},[n("label",{staticStyle:{"font-weight":"bold"}},[t._v("Staging")]),n("table",{staticClass:"table table-striped"},[t._m(3),n("tbody",[n("tr",[n("td",[t._v("Reason for Starting")]),n("td",[t._v(t._s(t.stagingEncounter["encounter"]["obs"]["reason"]["value_text"]||"N/A"))])]),n("tr",[n("td",[t._v("Stage")]),n("td",[t._v(t._s(t.stagingEncounter["encounter"]["obs"]["stage"]["value_text"]||"N/A"))])]),n("tr",[n("td",[t._v("CD4 Count Date")]),n("td",[t._v(t._s(t.stagingEncounter["encounter"]["obs"]["cd4CountDate"]["value_datetime"]||"N/A"))])]),n("tr",[n("td",[t._v("CD4 Count")]),n("td",[t._v(t._s(Object.entries(t.stagingEncounter["encounter"]["obs"]["cd4Count"]["value_numeric"]).length>0?t.stagingEncounter["encounter"]["obs"]["cd4Count"]["value_modifier"]+""+t.stagingEncounter["encounter"]["obs"]["cd4Count"]["value_numeric"]:"N/A"))])]),n("tr",[n("td",[t._v("CD4 Count Location")]),n("td",[t._v(t._s(t.stagingEncounter["encounter"]["obs"]["cd4CountLocation"]["value_text"]||"N/A"))])]),n("tr",[n("td",[t._v("Condition(s)")]),n("td",[n("ul",{staticStyle:{height:"150px",overflow:"hidden","overflow-y":"scroll","list-style-type":"decimal"}},t._l(t.conditionList,(function(e){return n("li",{key:e,staticClass:"condtions"},[t._v(t._s(e||"NA"))])})),0)])])])])])]):t._e(),n("input",{staticClass:"btn btn-primary previous action-button-previous",staticStyle:{position:"absolute",bottom:"30px",right:"50%"},attrs:{type:"button",name:"previous",value:"Previous"}}),n("button",{staticClass:"btn btn-primary",staticStyle:{position:"absolute",bottom:"30px",right:"43%"},attrs:{type:"button"},on:{click:t.createEncounters}},[t._v("save")])]),t._m(4),t._m(5)])])])])},c=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row"},[n("h5",{staticStyle:{"font-weight":"bold",margin:"auto","margin-bottom":"10px"}},[t._v("Staging")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-12"},[n("h5",{staticStyle:{"font-weight":"bold",margin:"auto","margin-bottom":"10px"}},[t._v("Summary")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",{attrs:{scope:"col"}},[t._v("Name")]),n("th",{attrs:{scope:"col"}},[t._v("Value")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",{attrs:{scope:"col"}},[t._v("Name")]),n("th",{attrs:{scope:"col"}},[t._v("Value")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{staticClass:"content-tab tab-pane fade show active shadow-lg p-3 mb-5 bg-white rounded form-template"},[n("div",{staticClass:"form-card"},[n("h2",{staticClass:"fs-title text-center"},[t._v("Success !")]),n("br"),n("br"),n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"col-3"},[n("img",{staticClass:"fit-image",attrs:{src:"https://img.icons8.com/color/96/000000/ok--v2.png"}})])]),n("br"),n("br"),n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"col-7 text-center"},[n("h5",[t._v("Patient added")])])])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{attrs:{id:"progressbar"}},[n("li",{staticClass:"active",attrs:{id:"registration"}},[n("strong",[t._v("Clinical Registration")])]),n("li",{attrs:{id:"staging"}},[n("strong",[t._v("Staging")])]),n("li",{attrs:{id:"summary"}},[n("strong",[t._v("Summary")])])])}],u=(n("4de4"),n("7db0"),n("4160"),n("caad"),n("d81d"),n("b64b"),n("ac1f"),n("2532"),n("466d"),n("159b"),n("96cf"),n("1da1")),l=n("8740"),d=n("f91c"),g=n("8051"),v=n("cf40"),p=(n("c1df"),n("1157")),h=n.n(p),f=n("24ca"),b={data:function(){return{encounters:{},PATIENT_ID:this.$route.params.id,NEW_REGISTER:this.$route.params.new,registrationEncounter:{},stagingEncounter:{},CONCEPTS:{1065:"Yes",1066:"No",1040:"Rapid Antibody Test",844:"DNA PCR",1118:"Not Done"},clinicRegistrationFormValidations:[],stagingFormValidations:[]}},computed:{conditionList:function(){var t=this,e=Object.keys(this.stagingEncounter["encounter"]["obs"]).filter((function(t){return t.match(/condition/)})),n=e.map((function(e){return t.stagingEncounter["encounter"]["obs"][e]}));return n.map((function(t){return t["value_text"]}))}},components:{"clinic-registration":l["a"],staging:d["a"]},methods:{addEncounter:function(t){var e=Object.keys(t)[0];this.encounters[e]=t[e]},saveEncounter:function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(e){var n,i,a,s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=[],i={url:"observations"},Object.keys(e).includes("obs")?(Object.keys(e.obs).forEach((function(t){n.push(e.obs[t])})),i.observations=n):Object.keys(e).includes("drug_orders")&&(i.drug_orders=e.drug_orders,i.url="drug_orders"),t.next=5,v["a"].createEncounter(this.PATIENT_ID,e.encounter_id,e.encounter_datetime);case 5:if(a=t.sent,this.successfulOperation=!0,201!==a.status&&200!==a.status){t.next=16;break}return s=a.encounter_id,i.encounter_id=s,t.next=12,g["a"].post(i.url,i);case 12:r=t.sent,201===r.status||200===r.status?(this.success=!0,this.fail=!1,this.postResponse="Appointment has been set."):(this.success=!1,this.fail=!0,this.postResponse="Appointment could not be set."),t.next=19;break;case 16:this.success=!1,this.fail=!0,this.postResponse="Appointment could not be set.";case 19:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),createEncounters:function(){var t=this;this.NEW_REGISTER&&"false"!=this.NEW_REGISTER||this.voidFirstVisitEncounters();var e=Object.keys(this.$refs);console.log(e),e.forEach((function(e){t.$refs[e].saveEncounter()}));var n=Object.keys(this.encounters);n.forEach((function(e){console.log(t.encounters[e]),t.saveEncounter(t.encounters[e])})),this.redirect("/patient/mastercard/".concat(this.PATIENT_ID))},redirect:function(t){this.$router.push(t)},getExpected:function(t){var e=["value_group_id","value_boolean","value_coded","value_coded_name_id","value_drug","value_datetime","value_numeric","value_modifier","value_text"],n="";return Object.keys(t).filter((function(t){e.includes(t)&&(n=t)})),n},initileWizard:function(t){var e=this;h()(document).ready((function(){var n,i,a,s;console.log(t["form_is_valid"]);h()("#pDetails");var r="<label style='color:red'> All required fields (*) must be completed before proceeding. </label>";h()(".clinical").click((function(){var t=e.registrationEncounter;t["form_is_valid"]?(h()(".errorTxt").html(""),n=h()(this).parent(),i=h()(this).parent().next(),h()("#progressbar li").eq(h()(".content-tab").index(i)).addClass("active"),i.show(),n.animate({opacity:0},{step:function(t){s=1-t,n.css({display:"none",position:"relative"}),i.css({opacity:s})},duration:600})):h()(".errorTxt").html(r)})),h()(".staging").click((function(){var t=e.stagingEncounter["form_is_valid"];t?(h()(".guardianError").html(""),n=h()(this).parent(),i=h()(this).parent().next(),h()("#progressbar li").eq(h()(".content-tab").index(i)).addClass("active"),i.show(),n.animate({opacity:0},{step:function(t){s=1-t,n.css({display:"none",position:"relative"}),i.css({opacity:s})},duration:600})):h()(".guardianError").html(r)})),h()(".previous").click((function(){n=h()(this).parent(),a=h()(this).parent().prev(),h()("#progressbar li").eq(h()(".content-tab").index(n)).removeClass("active"),a.show(),n.animate({opacity:0},{step:function(t){s=1-t,n.css({display:"none",position:"relative"}),a.css({opacity:s})},duration:600})})),h()(".confirm").click((function(){console.log("confirm clicked"),n=h()(this).parent(),i=h()(this).parent().next(),h()("#progressbar li").eq(h()(".content-tab").index(i)).addClass("active"),i.show(),n.animate({opacity:0},{step:function(t){s=1-t,n.css({display:"none",position:"relative"}),i.css({opacity:s})},duration:600})})),h()(".radio-group .radio").click((function(){h()(this).parent().find(".radio").removeClass("selected"),h()(this).addClass("selected")})),h()(".submit").click((function(){return console.log("Patient Details submitted!!!"),!1}))}))},registrationObject:function(){f["a"].$emit("validate-clinic-registration",""),this.registrationEncounter=this.$store.state.registration.registration,console.log(this.registrationEncounter),this.initileWizard(this.registrationEncounter)},stagingObject:function(){f["a"].$emit("validate-staging",""),this.stagingEncounter=this.$store.state.staging.staging,this.initileWizard(this.registrationEncounter),console.log(this.stagingEncounter)},removeEncounter:function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(){var e,n=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:"",t.next=3,g["a"].remove("encounters/".concat(e));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),voidEncounters:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.forEach((function(e){t.removeEncounter(e).then((function(t){console.log(t)}))}))},voidFirstVisitEncounters:function(){var t=[this.$store.state.initialRegistration,this.$store.state.initialVitals,this.$store.state.initialStaging],e=t.map((function(t){return null===t||void 0===t?void 0:t.encounter_id})).filter((function(t){return null!=t}));this.voidEncounters(e)}},mounted:function(){console.log(this.$route.params.id),this.initileWizard(this.$store.state.registration.registration),this.initileWizard(this.$store.state.staging.staging)}},m=b,_=(n("3a0c"),n("2877")),E=Object(_["a"])(m,o,c,!1,null,"26366108",null),y=E.exports,x={name:"home",components:{"top-nav":s["a"],"side-bar":r["a"],Registration:y}},C=x,w=Object(_["a"])(C,i,a,!1,null,null,null);e["default"]=w.exports},"466d":function(t,e,n){"use strict";var i=n("d784"),a=n("825a"),s=n("50c4"),r=n("1d80"),o=n("8aa5"),c=n("14c3");i("match",1,(function(t,e,n){return[function(e){var n=r(this),i=void 0==e?void 0:e[t];return void 0!==i?i.call(e,n):new RegExp(e)[t](String(n))},function(t){var i=n(e,t,this);if(i.done)return i.value;var r=a(t),u=String(this);if(!r.global)return c(r,u);var l=r.unicode;r.lastIndex=0;var d,g=[],v=0;while(null!==(d=c(r,u))){var p=String(d[0]);g[v]=p,""===p&&(r.lastIndex=o(u,s(r.lastIndex),l)),v++}return 0===v?null:g}]}))},"8aa5":function(t,e,n){"use strict";var i=n("6547").charAt;t.exports=function(t,e,n){return e+(n?i(t,e).length:1)}},a15b:function(t,e,n){"use strict";var i=n("23e7"),a=n("44ad"),s=n("fc6a"),r=n("a640"),o=[].join,c=a!=Object,u=r("join",",");i({target:"Array",proto:!0,forced:c||!u},{join:function(t){return o.call(s(this),void 0===t?",":t)}})},d81d:function(t,e,n){"use strict";var i=n("23e7"),a=n("b727").map,s=n("1dde"),r=n("ae40"),o=s("map"),c=r("map");i({target:"Array",proto:!0,forced:!o||!c},{map:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},f7b7:function(t,e,n){}}]);
//# sourceMappingURL=chunk-3fe8a226.c9712ec3.js.map