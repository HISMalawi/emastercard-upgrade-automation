{"version":3,"sources":["webpack:///./src/apps/ANC/Views/Reports/Pepfar/AncPepfarDisaggregated.vue?1027","webpack:///./src/apps/ANC/Views/Reports/Pepfar/AncPepfarDisaggregated.vue","webpack:///./src/apps/ANC/Views/Reports/Pepfar/AncPepfarDisaggregated.vue?c82d"],"names":["render","_ctx","_cache","$props","$setup","$data","$options","_component_report_template","_resolveComponent","_component_ion_page","_openBlock","_createBlock","default","_withCtx","_createVNode","title","period","rows","fields","columns","config","showIndex","onReportConfiguration","onPeriod","_","defineComponent","components","ReportTemplate","IonPage","setup","locationName","AncPepfarReportService","getLocationName","r","AncReportComposable","reportData","drill","table","thTxt","other","months","0","1","2","3","4","5","6","7","8","9","10","11","ageGroups","indicators","toDate","date","dayjs","format","generateIndicatorDates","startDate","endDate","dates","add","push","generateRows","async","monthlyDates","data","service","generateDisaggregated","forEach","indicator","age","patients","td","month","year","e","console","warn","c","start_date","end_date","__exports__"],"mappings":"yIAEM,SAAUA,EAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,MAAMC,EAA6BC,8BAAkB,mBAC/CC,EAAsBD,8BAAkB,YAE9C,OAAQE,yBAAcC,yBAAaF,EAAqB,KAAM,CAC5DG,QAASC,qBAAS,IAAM,CACtBC,yBAAaP,EAA4B,CACvCQ,MAAOd,EAAKc,MACZC,OAAQf,EAAKe,OACbC,KAAMhB,EAAKgB,KACXC,OAAQjB,EAAKiB,OACbC,QAASlB,EAAKkB,QACdC,OAAQ,CACAC,WAAW,GAEnBC,sBAAuBrB,EAAKsB,UAC3B,KAAM,EAAG,CAAC,QAAS,SAAU,OAAQ,SAAU,UAAW,4BAE/DC,EAAG,I,+FCXQC,+BAAgB,CAC3BC,WAAY,CAAEC,sBAAgBC,sBAC9BC,QACI,MAAMC,EAAeC,OAAuBC,kBACtCC,EAAKC,eAAoB,2BACzB,WAAEC,EAAU,MAAEC,GAAUH,EAC9BE,EAAWhB,QAAU,CACjB,CACIkB,OAAMC,MAAM,YACZD,OAAMC,MAAM,QACZD,OAAMC,MAAM,SACZD,OAAMC,MAAM,QACZD,OAAMC,MAAM,iBACZD,OAAMC,MAAM,gBACZD,OAAMC,MAAM,WAGpBH,EAAWI,MAAMC,OAAS,CACtBC,EAAG,UACHC,EAAG,WACHC,EAAG,QACHC,EAAG,QACHC,EAAG,MACHC,EAAG,OACHC,EAAG,OACHC,EAAG,SACHC,EAAG,YACHC,EAAG,UACHC,GAAI,WACJC,GAAI,YAGRjB,EAAWI,MAAMc,UAAY,CAAC,MAAO,QAAS,QAC1C,QAAS,QAAS,QAAS,QAAS,QACpC,MAAO,UAAW,OAGtBlB,EAAWI,MAAMe,WAAa,CAC1B,iBACA,0BACA,eACA,iBACA,4BACA,4BACA,gBAGJ,MAAMC,EAAUC,GAAiBC,IAAMD,GAAME,OAAO,YAE9CC,EAAyBA,CAACC,EAAmBC,KAC/C,MAAMC,EAAQ,CAACF,GACf,IAAIJ,EAAOI,EACX,MAAMJ,EAAOC,IAAMI,GAASE,KAAK,EAAG,UAAUL,OAAO,cACjDI,EAAME,KAAKR,EAAOC,IAAMD,GAAMO,IAAI,EAAG,UAAUL,OAAO,eAE1D,OAAOI,GAGLG,EAAeC,UACjB,IAAI,MAAMV,KAAQW,EACd,IACI,MAAMC,QAAajC,EAAWkC,QAAQC,sBAAsBd,GAC5DrB,EAAWI,MAAMe,WAAWiB,QAASC,IACjCrC,EAAWI,MAAMc,UAAUkB,QAASE,IAChC,MAAMC,EAAWN,EAAKb,EAAOC,IAAOgB,GAAWC,GAC/CtC,EAAWlB,KAAK+C,KAAK,CACjB3B,OAAMsC,GAAG,IACTtC,OAAMsC,GAAG7C,GAAgB,OACzBO,OAAMsC,GAAGxC,EAAWI,MAAMC,OAAOiB,IAAMD,GAAMoB,UAC7CvC,OAAMsC,GAAGlB,IAAMD,GAAMqB,QACrBxC,OAAMsC,GAAGH,GACTnC,OAAMsC,GAAGF,GACTrC,EAAM,GAAGoB,KAAQgB,KAAaC,IAAMC,SAIlD,MAAOI,GACLC,QAAQC,KAAK,GAAGF,KAKtBvD,EAAW2C,MAAO1C,EAAQyD,KAC5B9C,EAAWlB,KAAO,GAClBkB,EAAWkC,QAAU,IAAItC,OACzBI,EAAWnB,OAAS,GAAGuC,EAAO0B,EAAEC,iBAAiB3B,EAAO0B,EAAEE,kBACpDlB,EAAaN,EAAuBsB,EAAEC,WAAYD,EAAEE,YAG9D,MAAO,IACAlD,EACHV,e,qBC/FZ,MAAM6D,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASpF,KAErD","file":"js/chunk-2d0db1ed.a293d011.js","sourcesContent":["import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_report_template = _resolveComponent(\"report-template\")!\n  const _component_ion_page = _resolveComponent(\"ion-page\")!\n\n  return (_openBlock(), _createBlock(_component_ion_page, null, {\n    default: _withCtx(() => [\n      _createVNode(_component_report_template, {\n        title: _ctx.title,\n        period: _ctx.period,\n        rows: _ctx.rows,\n        fields: _ctx.fields,\n        columns: _ctx.columns,\n        config: {\n                showIndex: true\n            },\n        onReportConfiguration: _ctx.onPeriod\n      }, null, 8, [\"title\", \"period\", \"rows\", \"fields\", \"columns\", \"onReportConfiguration\"])\n    ]),\n    _: 1\n  }))\n}","\nimport { defineComponent } from 'vue'\nimport ReportTemplate from \"@/apps/ART/views/reports/TableReportTemplate.vue\"\nimport { IonPage } from \"@ionic/vue\"\nimport { AncPepfarReportService } from \"@/apps/ANC/Services/anc_pepfar_report_service\"\nimport  { AncReportComposable } from '@/apps/ANC/composables/AncReports'\nimport table from \"@/components/DataViews/tables/ReportDataTable\"\nimport dayjs from 'dayjs'\n\nexport default defineComponent({\n    components: { ReportTemplate, IonPage },\n    setup() {\n        const locationName = AncPepfarReportService.getLocationName()\n        const r =  AncReportComposable('Facility Pepfar Report')\n        const { reportData, drill } = r\n        reportData.columns = [\n            [\n                table.thTxt('District'),\n                table.thTxt('Site'),\n                table.thTxt('Month'),\n                table.thTxt('Year') ,\n                table.thTxt('ANC Indicator'),\n                table.thTxt('Age Category'),\n                table.thTxt('Value')\n            ]\n        ]\n        reportData.other.months = {\n            0: \"January\", \n            1: \"February\",\n            2: \"March\",\n            3: \"April\",\n            4: \"May\",\n            5: \"June\",\n            6: \"July\",\n            7: \"August\",\n            8: \"September\",\n            9: \"October\",\n            10: \"November\",\n            11: \"December\"\n        } as any\n\n        reportData.other.ageGroups = [\"<10\", \"10-14\", \"15-19\",\n            \"20-24\", \"25-29\", \"30-34\", \"35-39\", \"40-49\",\n            \"50+\", \"Unknown\", \"All\"\n        ] as string[]\n\n        reportData.other.indicators = [\n            \"Already on ART\", \n            \"Known at entry positive\",\n            \"Known status\", \n            \"New ANC client\", \n            \"Newly identified negative\",\n            \"Newly identified positive\",\n            \"Newly on ART\"\n        ] as string[]\n\n        const toDate = (date: string) => dayjs(date).format('MMM YYYY')\n\n        const generateIndicatorDates = (startDate: string, endDate: string) => {\n            const dates = [startDate]\n            let date = startDate\n            while(date < dayjs(endDate).add(-1, 'months').format('YYYY-MM-DD')) {\n                dates.push(date = dayjs(date).add(1, 'months').format('YYYY-MM-DD'))\n            }\n            return dates\n        }\n        \n        const generateRows = async (monthlyDates: string[]) => {\n            for(const date of monthlyDates) {\n                try {\n                    const data = await reportData.service.generateDisaggregated(date)\n                    reportData.other.indicators.forEach((indicator: string) => {\n                        reportData.other.ageGroups.forEach((age: string) => {\n                            const patients = data[toDate(date)][indicator][age]\n                            reportData.rows.push([\n                                table.td(''),\n                                table.td(locationName || 'N/A'),\n                                table.td(reportData.other.months[dayjs(date).month()]),\n                                table.td(dayjs(date).year()),\n                                table.td(indicator),\n                                table.td(age),\n                                drill(`${date}-${indicator}-${age}`,patients)\n                            ])\n                        })\n                    })\n                } catch (e) {\n                    console.warn(`${e}`)\n                }\n            }\n        }\n\n        const onPeriod = async (_: any, c: Record<string, any>) => {\n            reportData.rows = []\n            reportData.service = new AncPepfarReportService()\n            reportData.period = `${toDate(c.start_date)} - ${toDate(c.end_date)}`\n            await generateRows(generateIndicatorDates(c.start_date, c.end_date))\n        }\n\n        return {\n            ...r,\n            onPeriod\n        }\n    }\n})\n","import { render } from \"./AncPepfarDisaggregated.vue?vue&type=template&id=d53b840a&ts=true\"\nimport script from \"./AncPepfarDisaggregated.vue?vue&type=script&lang=ts\"\nexport * from \"./AncPepfarDisaggregated.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/daniel/projects/malawi-emr/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}