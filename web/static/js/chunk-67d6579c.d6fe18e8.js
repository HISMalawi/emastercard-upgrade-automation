(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-67d6579c"],{"2a09":function(e,t,o){"use strict";o("902f")},3800:function(e,t,o){"use strict";o.d(t,"d",(function(){return n})),o.d(t,"l",(function(){return c})),o.d(t,"f",(function(){return r})),o.d(t,"o",(function(){return l})),o.d(t,"e",(function(){return a})),o.d(t,"b",(function(){return i})),o.d(t,"n",(function(){return s})),o.d(t,"k",(function(){return d})),o.d(t,"j",(function(){return u})),o.d(t,"h",(function(){return p})),o.d(t,"a",(function(){return b})),o.d(t,"m",(function(){return m})),o.d(t,"c",(function(){return O})),o.d(t,"i",(function(){return j})),o.d(t,"g",(function(){return f}));const n=[["1","2","3"],["4","5","6"],["7","8","9"],[".","0","Del"],["","Done",""]],c=[["1","2","3"],["4","5","6"],["7","8","9"],["Del","0","."],["Unknown","",""]],r=[["1","2","3"],["4","5","6"],["7","8","9"],[".","0",""]],l=[["1","2","3"],["4","5","6"],["7","8","9"],[".","0","Del"],["Clear","%","/"]],a=[["1","2","3"],["4","5","6"],["7","8","9"],["Del.","0","Clear"]],i=[["1","2","3","<"],["4","5","6",">"],["7","8","9","="],["","0",""]],s=[["1","2","3","+","-","/","*"],["4","5","6","%","=","<",">","Qwerty"],["7","8","9",".",","],["","0",""]],d=[["1","2","3"],["4","5","6"],["7","8","9"],["","0",""]],u=[["1","2","3"],["4","5","6"],["7","8","9"],["←","0","→"]],p=[["1","2","3","4","5","6","7"],["8","9","10","11","12","13","14"],["15","16","17","18","19","20","21"],["22","23","24","25","26","27","28"],["29","30","31"]],b=[["a","b","c","d","e","f","g","h","."],["i","j","k","l","m","n","o","p","q"],["r","s","t","u","v","w","x","y","z"]],m=[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l","'"],["z","x","c","v","b","n","m",",",".","A-Z"]],O=[["1","2","3","4","5","6","7","8","9","0"],["a","b","c","d","e","f","g","h","-","."],["i","j","k","l","m","n","o","p","q"],["r","s","t","u","v","w","x","y","z"]],j=[["1","2","3","4","5","6","7","8","9","0","Del"],["q","w","e","r","t","y","u","i","o","p","Clear"],["a","s","d","f","g","h","j","k","l",".","Caps"],["z","x","c","v","b","n","m","<",">","/","Enter"]],f=[["1","2","3","4","5","6","7","8","9","0"],["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l","Del."],["z","x","c","v","b","n","m","Caps","Login"]]},"3b25":function(e,t,o){},"6e9d":function(e,t,o){"use strict";o("3b25")},7101:function(e,t,o){"use strict";o.r(t);var n=o("7a23");function c(e,t,o,c,r,l){const a=Object(n["resolveComponent"])("TSLoginForm"),i=Object(n["resolveComponent"])("DTLoginForm"),s=Object(n["resolveComponent"])("ion-page");return Object(n["openBlock"])(),Object(n["createBlock"])(s,null,{default:Object(n["withCtx"])(()=>[e.isPocSite?(Object(n["openBlock"])(),Object(n["createBlock"])(a,{key:0,version:e.version,onLogin:e.doLogin},null,8,["version","onLogin"])):(Object(n["openBlock"])(),Object(n["createBlock"])(i,{key:1,onLogin:e.doLogin,version:e.version,showConfigBtn:e.showConfig},null,8,["onLogin","version","showConfigBtn"]))]),_:1})}o("14d9");const r=e=>(Object(n["pushScopeId"])("data-v-5b0788e3"),e=e(),Object(n["popScopeId"])(),e),l=r(()=>Object(n["createElementVNode"])("b",{style:{color:"#8b4513"}},"National ",-1)),a=r(()=>Object(n["createElementVNode"])("b",{style:{color:"#cd853f"}},"EMR",-1)),i={class:"main",ref:"main"},s={class:"rows"},d={class:"cells"},u=["readonly"],p={class:"rows input-rows"},b={class:"cells"},m=["readonly"],O={class:"center"},j={class:"rows"},f=["id"],g=["id"];function h(e,t,o,c,r,h){const C=Object(n["resolveComponent"])("ion-label"),w=Object(n["resolveComponent"])("ion-title"),v=Object(n["resolveComponent"])("ion-toolbar"),I=Object(n["resolveComponent"])("ion-header"),y=Object(n["resolveComponent"])("ion-content"),k=Object(n["resolveComponent"])("login-footer");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["createVNode"])(I,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(v,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(w,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(C,{style:{fontWeight:"bolder",fontSize:"1.9em"}},{default:Object(n["withCtx"])(()=>[l,a]),_:1}),Object(n["createVNode"])(C,{class:"ion-padding ion-float-right"},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(" Version: "),Object(n["createElementVNode"])("b",null,Object(n["toDisplayString"])(e.version),1)]),_:1})]),_:1})]),_:1})]),_:1}),Object(n["createVNode"])(y,{fullscreen:"false"},{default:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("div",i,[Object(n["createElementVNode"])("div",s,[Object(n["createElementVNode"])("div",d,[Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"text",name:"usename",autocomplete:"off",placeholder:"Username",id:"username",ref:"username","onUpdate:modelValue":t[0]||(t[0]=t=>e.userInput.username=t),onClick:t[1]||(t[1]=t=>e.renderKeyBoard(t)),class:"input-boxes",readonly:e.useVirtualInput},null,8,u),[[n["vModelText"],e.userInput.username]])])]),Object(n["createElementVNode"])("div",p,[Object(n["createElementVNode"])("div",b,[Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{"onUpdate:modelValue":t[2]||(t[2]=t=>e.userInput.password=t),type:"password",name:"password",ref:"password",id:"password",onClick:t[3]||(t[3]=t=>e.renderKeyBoard(t)),class:"input-boxes",placeholder:"Password",readonly:e.useVirtualInput},null,8,m),[[n["vModelText"],e.userInput.password]])])])],512),Object(n["createElementVNode"])("div",O,[Object(n["createElementVNode"])("div",{id:"keyboard",style:Object(n["normalizeStyle"])(e.btnStyles),class:"keyboard"},[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.LOGIN_KEYBOARD,(o,c)=>(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",{key:c},[Object(n["createElementVNode"])("div",j,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(o,o=>(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{class:"cells",key:o},["Next"===o||"Login"===o?(Object(n["openBlock"])(),Object(n["createElementBlock"])("button",{key:0,id:e.btnCaption,class:"keyboard-btn login-btn",onClick:t[4]||(t[4]=t=>e.keyPress(t))},Object(n["toDisplayString"])(e.btnCaption),9,f)):Object(n["createCommentVNode"])("",!0),"Login"!=o&&"Next"!=o?(Object(n["openBlock"])(),Object(n["createElementBlock"])("button",{key:1,id:e.Caps.on?o.toUpperCase():o.toLowerCase(),class:"keyboard-btn",onClick:t[5]||(t[5]=t=>e.keyPress(t))},Object(n["toDisplayString"])("Del."===o||"Caps"===o?o:e.Caps.on?o.toUpperCase():o.toLowerCase()),9,g)):Object(n["createCommentVNode"])("",!0)]))),128))])]))),128))],4)])]),_:1}),Object(n["createVNode"])(k,{showConfigBtn:e.showConfigBtn},null,8,["showConfigBtn"])],64)}var C=o("3800");const w=["src"],v=["src"];function I(e,t,o,c,r,l){const a=Object(n["resolveComponent"])("ion-label"),i=Object(n["resolveComponent"])("ion-select-option"),s=Object(n["resolveComponent"])("ion-select"),d=Object(n["resolveComponent"])("ion-button"),u=Object(n["resolveComponent"])("ion-item"),p=Object(n["resolveComponent"])("ion-toolbar"),b=Object(n["resolveComponent"])("ion-footer");return Object(n["openBlock"])(),Object(n["createBlock"])(b,{style:{position:"absolute",width:"100%",bottom:"0",left:"0","padding-right":"1rem","padding-left":"1rem"}},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(p,null,{default:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("span",null,[Object(n["createElementVNode"])("img",{id:"coat",src:e.img("login-logos/Malawi-Coat_of_arms_of_arms.png"),alt:"Malawi Coat of Arms logo"},null,8,w),Object(n["createElementVNode"])("img",{id:"pepfar",src:e.img("login-logos/PEPFAR.png"),alt:"PEPFAR logo"},null,8,v)]),Object(n["createVNode"])(u,{class:"his-sm-text",style:{width:"45%"},slot:"end",lines:"none"},{default:Object(n["withCtx"])(()=>[e.isPocSite?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:0},[Object(n["createVNode"])(a,null,{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])("Device Profile")]),_:1}),Object(n["createVNode"])(s,{modelValue:e.profile,"onUpdate:modelValue":t[0]||(t[0]=t=>e.profile=t),value:e.profile},{default:Object(n["withCtx"])(()=>[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.deviceProfiles,(e,t)=>(Object(n["openBlock"])(),Object(n["createBlock"])(i,{key:t,value:e.label},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","value"])],64)):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(d,{color:"dark",fill:"outline",size:"large",slot:"end","router-link":e.settingsUrl},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(" Network ")]),_:1},8,["router-link"])]),_:1})]),_:1})]),_:1})}var y=o("2ed9"),k=o("1718"),V=o("d867"),N=o("2ef0"),x=Object(n["defineComponent"])({name:"LoginFooter",components:{IonFooter:V["IonFooter"],IonToolbar:V["IonToolbar"],IonButton:V["IonButton"],IonSelect:V["IonSelect"],IonSelectOption:V["IonSelectOption"],IonItem:V["IonItem"],IonLabel:V["IonLabel"]},props:{showConfigBtn:{type:Boolean,default:!1},isPocSite:{type:Boolean,default:!0}},setup(e){const t=Object(n["computed"])(()=>e.isPocSite?"/settings/host":"/emc/settings/network_settings"),{activePlatformProfile:o,platformProfiles:c}=Object(y["e"])(),r=Object(n["ref"])(o.value.profileName||""),l=Object.keys(c.value).map(e=>({label:e,value:{profileName:e,...c.value[e]}}));return Object(n["watch"])(r,e=>{o.value=(Object(N["find"])(l,{label:e})||{}).value}),{deviceProfiles:l,profile:r,settingsUrl:t,img:k["a"]}}}),B=(o("6e9d"),o("6b0d")),L=o.n(B);const _=L()(x,[["render",I],["__scopeId","data-v-139b1909"]]);var S=_,E=Object(n["defineComponent"])({name:"TSLoginForm",props:{showConfigBtn:{type:Boolean,default:!1},version:{type:String,required:!0}},components:{LoginFooter:S,IonContent:V["IonContent"],IonHeader:V["IonHeader"],IonToolbar:V["IonToolbar"],IonTitle:V["IonTitle"],IonLabel:V["IonLabel"]},data:function(){return{LOGIN_KEYBOARD:C["g"],userInput:{type:String,username:"",password:""},focusInput:{type:Object,value:"",id:""},display:"none",keyboardTop:"",btnCaption:"",Caps:{type:Boolean,on:!1}}},setup(){return{useVirtualInput:Object(n["computed"])(()=>Object(y["e"])().activePlatformProfile.value.keyboard===y["b"].HIS_KEYBOARD_ONLY)}},emits:["login"],methods:{renderKeyBoard(e){this.focusInput=e.currentTarget,"password"==this.focusInput.id?this.btnCaption="Login":this.btnCaption="Next";let t=e.currentTarget.getBoundingClientRect().top;t=parseInt(t),this.keyboardTop=t+20+"px;",this.display="table",window.scrollTo(0,9999)},keyPress(e){const t=e.currentTarget.id;let o;try{t.match(/Del./i)?this.focusInput.value=this.focusInput.value.substring(0,this.focusInput.value.length-1):t.match(/Next/i)?(this.display="none",o=this.$refs.password,o.click()):t.match(/Login/i)?(this.display="none",this.$emit("login",{username:this.userInput.username,password:this.userInput.password})):t.match(/Caps/i)?(this.Caps.on=!this.Caps.on,this.display="none",o="username"===this.focusInput.id?this.$refs.username:this.$refs.password,o.click()):t.match(/Hide/i)?this.display="none":this.focusInput.value+=t,"username"==this.focusInput.id?this.userInput.username=this.focusInput.value:this.userInput.password=this.focusInput.value}catch(n){console.warn("input error")}},doLogin:async function(){this.$emit("login",{username:this.userInput.username,password:this.userInput.password})}},computed:{btnStyles(){return`display: ${this.display}; top: ${this.keyboardTop};`}}});o("2a09");const P=L()(E,[["render",h],["__scopeId","data-v-5b0788e3"]]);var T=P,D=o("a1e9"),F=o("5c40"),A=o("89b4");const z=Object(n["createElementVNode"])("img",{src:"/assets/images/report.png",style:{display:"block",width:"55%",margin:"5px auto"}},null,-1),U=Object(n["createElementVNode"])("h2",null,"Welcome",-1),q=Object(n["createElementVNode"])("h4",null,"Please, log in to your account",-1);function K(e,t,o,c,r,l){const a=Object(n["resolveComponent"])("ion-card-title"),i=Object(n["resolveComponent"])("ion-card-subtitle"),s=Object(n["resolveComponent"])("login-footer"),d=Object(n["resolveComponent"])("ion-col"),u=Object(n["resolveComponent"])("ion-icon"),p=Object(n["resolveComponent"])("ion-input"),b=Object(n["resolveComponent"])("ion-item"),m=Object(n["resolveComponent"])("ion-button"),O=Object(n["resolveComponent"])("ion-row"),j=Object(n["resolveComponent"])("ion-grid"),f=Object(n["resolveComponent"])("ion-content");return Object(n["openBlock"])(),Object(n["createBlock"])(f,{fullscreen:"false"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(j,{style:{margin:"0",padding:"0"}},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(O,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(d,{size:"8"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(a,{style:{"text-align":"center","font-size":"78px","font-weight":"bold",margin:"8vh 1px 0"}},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(" HIS APPS ")]),_:1}),Object(n["createVNode"])(i,{style:{"text-align":"center","font-size":"24px","margin-bottom":"20px"}},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.version),1)]),_:1}),z,Object(n["createVNode"])(s,{showConfigBtn:e.showConfigBtn,isPocSite:!1},null,8,["showConfigBtn"])]),_:1}),Object(n["createVNode"])(d,{size:"4",style:{background:"#2839ad",color:"#ffff","text-align":"center",height:"100vh",padding:"38px 18px"}},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(u,{icon:e.avatar,style:{"font-size":"8vw",margin:"10vh 1px 0"}},null,8,["icon"]),U,q,Object(n["createVNode"])(b,{style:{margin:"2rem 3.5rem"}},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(p,{type:"text",placeholder:"Username",modelValue:e.username,"onUpdate:modelValue":t[0]||(t[0]=t=>e.username=t),min:5,required:""},null,8,["modelValue"])]),_:1}),Object(n["createVNode"])(b,{style:{margin:"2rem 3.5rem"}},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(p,{type:"password",modelValue:e.password,"onUpdate:modelValue":t[1]||(t[1]=t=>e.password=t),placeholder:"Password",onKeyup:Object(n["withKeys"])(e.login,["enter"]),max:100,min:5,required:""},null,8,["modelValue","onKeyup"])]),_:1}),Object(n["createVNode"])(m,{expand:"full",size:"large",style:{margin:"2rem 3.5rem","text-transform":"none"},onClick:Object(n["withModifiers"])(e.login,["prevent"])},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(" Login ")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1})}var R=o("ff79"),$=Object(n["defineComponent"])({name:"DTLoginForm",components:{IonGrid:V["IonGrid"],IonRow:V["IonRow"],IonCol:V["IonCol"],IonButton:V["IonButton"],IonInput:V["IonInput"],IonItem:V["IonItem"],IonCardTitle:V["IonCardTitle"],IonCardSubtitle:V["IonCardSubtitle"],LoginFooter:S,IonContent:V["IonContent"],IonIcon:V["IonIcon"]},props:{showConfigBtn:{type:Boolean,default:!1},version:{type:String,required:!0}},emits:["login"],setup(e,{emit:t}){const o=Object(n["ref"])(""),c=Object(n["ref"])(""),r=()=>t("login",{username:o.value,password:c.value});return{avatar:R["person"],username:o,password:c,login:r}}});const H=L()($,[["render",K]]);var M=H,G=o("6605"),Y=o("b5e4"),J=o("1c74"),W=o("3e53"),Q=Object(n["defineComponent"])({name:"login",components:{TSLoginForm:T,IonPage:V["IonPage"],DTLoginForm:M},setup(){const e=Object(G["i"])(),t=Object(D["s"])(!0),o=new A["a"],n=Object(D["s"])(""),c=async t=>{if(t.username&&t.password){o.setUsername(t.username);try{if(o.versionLockingIsEnabled()&&await o.validateIfCorrectAPIVersion(),!await o.checkTimeIntegrity())throw"Local date does not match API date. Please Update your device's date";await o.login(t.password),o.startSession();const n=J["e"].getDefaultApp();if(n&&!1!==n.isPocApp||J["e"].isPocSite())return e.push("/select_hc_location");const c=await W["a"].selectApplication();return e.push((null===c||void 0===c?void 0:c.appLandingPage)||"/emc/home")}catch(n){n instanceof A["c"]?Object(Y["e"])("Invalid username or password"):Object(Y["c"])(""+n)}}else Object(Y["e"])("Complete form to log in")};return Object(F["vb"])(async()=>{const e=new A["a"];await e.loadConfig(),t.value=J["e"].isPocSite();const o=e.getHeadVersion();e.setActiveVersion(o);const c=await e.getApiVersion();n.value=`${o} / ${c}`}),{isPocSite:t,version:n,showConfig:"true"===localStorage.getItem("useLocalStorage"),doLogin:c}}});const Z=L()(Q,[["render",c]]);t["default"]=Z},"902f":function(e,t,o){}}]);
//# sourceMappingURL=chunk-67d6579c.d6fe18e8.js.map