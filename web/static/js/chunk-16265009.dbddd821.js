(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-16265009"],{"17fa":function(t,e,r){},"336a":function(t,e,r){"use strict";var a=r("df61"),n=r.n(a);n.a},3835:function(t,e,r){"use strict";function a(t){if(Array.isArray(t))return t}r.d(e,"a",(function(){return o}));r("a4d3"),r("e01a"),r("d28b"),r("e260"),r("d3b7"),r("25f0"),r("3ca3"),r("ddb0");function n(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var r=[],a=!0,n=!1,s=void 0;try{for(var o,i=t[Symbol.iterator]();!(a=(o=i.next()).done);a=!0)if(r.push(o.value),e&&r.length===e)break}catch(c){n=!0,s=c}finally{try{a||null==i["return"]||i["return"]()}finally{if(n)throw s}}return r}}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function o(t,e){return a(t)||n(t,e)||s()}},4313:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"d-flex",attrs:{id:"wrapper"}},[r("side-bar"),r("div",{attrs:{id:"page-content-wrapper"}},[r("top-nav"),r("div",{staticClass:"col-12 table-col",attrs:{id:"main-container"}},[r("span",[t._v(t._s(t.report_title)),r("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.$router.go(-1)}}},[t._v("Back")])]),r("b-row",[r("b-col",[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"resultType"}},[t._v("Result Type")]),r("select",{directives:[{name:"model",rawName:"v-model",value:t.resultType,expression:"resultType"}],staticClass:"form-control",attrs:{id:"resultType"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.resultType=e.target.multiple?r:r[0]}}},[r("option",{attrs:{value:"viraemia-1000"}},[t._v("Viraemia 1000+")]),r("option",{attrs:{value:"suppressed"}},[t._v("Suppressed")]),r("option",{attrs:{value:"low-level-viraemia"}},[t._v("Low level viraemia")])])])]),r("b-col",[r("sdPicker",{attrs:{onSubmit:t.fetchDates}})],1)],1),r("table",{staticClass:"table table-striped report",attrs:{id:"cohort-clients"}},[t._m(0),r("tbody",[t.reportData?t._l(t.reportData,(function(e,a){return r("tr",{key:a},[r("td",[t._v(t._s(e.arv_number))]),r("td",{staticClass:"center-text"},[t._v(t._s(t.formatGender(e.gender)))]),r("td",{staticClass:"center-text"},[t._v(t._s(t.localDate(e.birthdate)))]),r("td",[t._v(t._s(e.specimen))]),r("td",[t._v(t._s(t.localDate(e.order_date)))]),r("td",[t._v(t._s(e.result_modifier+" "+e.result))]),r("td",[t._v(t._s(t.localDate(e.result_date)))]),r("td",[r("b-button",{attrs:{variant:"primary"},on:{click:function(r){return t.$router.push("/patient/mastercard/"+e.patient_id)}}},[t._v("show")])],1)])})):r("tr",[r("td",{staticStyle:{width:"100%",height:"450px","text-align":"center","vertical-align":"middle"},attrs:{colspan:"8"}},[t._v(" No report is selected ")])])],2),r("tfoot",[r("tr",[r("td",[t._v("Date Created: "+t._s(t.moment().format("YYYY-MM-DD h:m:s")+"\n")+" "),r("br"),t._v(" Quarter: "+t._s(t.period)+" "),r("br"),t._v(" e-Mastercard Version : "+t._s(t.EMCVersion)+" "),r("br"),t._v(" API Version: "+t._s(t.APIVersion)+" "),r("br"),t._v(" Site UUID: "+t._s(t.siteUUID)+" ")])])])])],1)],1)],1)},n=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",[r("tr",[r("th",{attrs:{scope:"col"}},[t._v("ARV number")]),r("th",{staticClass:"center-text",attrs:{scope:"col"}},[t._v("Gender")]),r("th",{staticClass:"center-text",attrs:{scope:"col"}},[t._v("Birthdate")]),r("th",{staticClass:"center-text",attrs:{scope:"col"}},[t._v("Specimen")]),r("th",{staticClass:"center-text",attrs:{scope:"col"}},[t._v("Ordered")]),r("th",{staticClass:"center-text",attrs:{scope:"col"}},[t._v("Result")]),r("th",{staticClass:"center-text",attrs:{scope:"col"}},[t._v("Released")]),r("th",{staticClass:"center-text",attrs:{scope:"col"}},[t._v("Action")])])])}],s=(r("96cf"),r("1da1")),o=r("ebd8"),i=r("7c08"),c=r("4dfe"),u=r("1157"),l=r.n(u),p=r("9521"),f=r("8d9f"),d=r("8298");r("2cdf"),r("fd5e"),r("5caa"),r("c3dc"),r("4e95"),r("a8a1"),r("919c"),r("4b69"),r("7dae"),r("a821");var h={name:"reports",components:{"top-nav":o["a"],"side-bar":i["a"],sdPicker:c["a"]},methods:{fetchDates:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var r,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.resultType&&e.length){t.next=2;break}return t.abrupt("return");case 2:return r=new d["c"],r.setStartDate(e[0]),r.setEndDate(e[1]),this.period=r.getDateIntervalPeriod(),this.report_title+=this.period+" (result type: ".concat(this.resultType,")"),this.reportLoading=!0,t.next=10,r.getViralLoadResults(this.resultType);case 10:this.reportData=t.sent,this.reportLoading=!1,this.reportSelected=!0,setTimeout((function(){return a.initDataTable()}),400);case 14:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),initDataTable:function(){this.dTable=l()("#cohort-clients").dataTable({order:[[0,"asc"]],fixedHeader:!0,dom:"Bfrtip",retrieve:!0,buttons:[{extend:"copy",title:this.report_title},{extend:"csv",title:this.report_title,footer:!0},{extend:"pdf",title:this.report_title},{extend:"print",title:this.report_title}]})}},mounted:function(){},computed:{hideReport:function(){return this.reportLoading||!this.reportSelected}},data:function(){return{report_title:"Clinic Viral Load Report ",reportData:null,dTable:null,period:null,resultType:null,reportSelected:!1,reportLoading:!1,formatedData:[],APIVersion:sessionStorage.APIVersion,EMCVersion:sessionStorage.EMCVersion,siteUUID:sessionStorage.siteUUID,localDate:f["a"].isoDate,formatGender:p["a"]}}},v=h,m=(r("6885"),r("f7b75"),r("2877")),b=Object(m["a"])(v,a,n,!1,null,"4ead18c2",null);e["default"]=b.exports},"4dfe":function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"ctrs"},[r("div",{staticClass:"ctr-table"},[r("div",{staticClass:"ctr-row"},[r("div",{staticClass:"ctr-cell"},[r("date-pick",{staticClass:"date-inputs",attrs:{format:t.format,parseDate:t.parseDate,formatDate:t.formatDate,inputAttributes:{placeholder:"Start Date",readonly:!0}},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1),r("div",{staticClass:"ctr-cell"},[r("date-pick",{staticClass:"date-inputs",attrs:{format:t.format,parseDate:t.parseDate,formatDate:t.formatDate,inputAttributes:{placeholder:"End Date",readonly:!0}},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1),r("div",{staticClass:"ctr-cell"},[r("button",{staticClass:"btn btn-success",on:{click:t.submitDates}},[t._v("Submit")])])])])])},n=[],s=r("f0ca"),o=r.n(s),i=r("c1df"),c=r.n(i),u=(r("6f3c"),r("1789")),l={components:{DatePick:o.a},props:["onSubmit"],data:function(){return{startDate:null,endDate:null,format:"DD/MMM/YYYY",date:u["a"].format(new Date,"DD/MMM/YYYY")}},methods:{initDates:function(){},submitDates:function(){this.startDate=c()(this.startDate).format("YYYY-MM-DD"),this.endDate=c()(this.endDate).format("YYYY-MM-DD"),this.onSubmit([this.startDate,this.endDate])},parseDate:function(t,e){return u["a"].parse(t,e)},formatDate:function(t,e){return u["a"].format(t,e)}},mounted:function(){var t=this;setTimeout((function(){return t.initDates()}),300)}},p=l,f=(r("336a"),r("2877")),d=Object(f["a"])(p,a,n,!1,null,"15deca72",null);e["a"]=d.exports},"4fad":function(t,e,r){var a=r("23e7"),n=r("6f53").entries;a({target:"Object",stat:!0},{entries:function(t){return n(t)}})},6885:function(t,e,r){"use strict";var a=r("deb4"),n=r.n(a);n.a},"6f53":function(t,e,r){var a=r("83ab"),n=r("df75"),s=r("fc6a"),o=r("d1e7").f,i=function(t){return function(e){var r,i=s(e),c=n(i),u=c.length,l=0,p=[];while(u>l)r=c[l++],a&&!o.call(i,r)||p.push(t?[r,i[r]]:i[r]);return p}};t.exports={entries:i(!0),values:i(!1)}},8298:function(t,e,r){"use strict";r.d(e,"a",(function(){return f})),r.d(e,"b",(function(){return d})),r.d(e,"c",(function(){return h}));r("a4d3"),r("99af"),r("4de4"),r("4160"),r("e439"),r("dbb4"),r("b64b"),r("159b"),r("96cf");var a=r("1da1"),n=r("ade3"),s=r("d4ec"),o=r("bee2"),i=r("8051"),c=r("8d9f"),u=r("9521");function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function p(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){Object(n["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var f=["<1 year","1-4 years","5-9 years","10-14 years","15-19 years","20-24 years","25-29 years","30-34 years","35-39 years","40-44 years","45-49 years","50-54 years","55-59 years","60-64 years","65-69 years","70-74 years","75-79 years","80-84 years","85-89 years","90 plus years"],d=["F","M"],h=function(){function t(){Object(s["a"])(this,t),this.date=c["a"].isoDate(),this.startDate="",this.endDate="",this.quarter="",this.programID=1,this.isPepfar=!1}return Object(o["a"])(t,[{key:"getDateIntervalPeriod",value:function(){return"".concat(c["a"].localDate(this.startDate)," - ").concat(c["a"].localDate(this.endDate))}},{key:"setStartDate",value:function(t){this.startDate=t}},{key:"setProgramID",value:function(t){this.programID=t}},{key:"setEndDate",value:function(t){this.endDate=t}},{key:"setQuarter",value:function(t){this.quarter=t}},{key:"getReport",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i["a"].get("".concat(t,"?").concat(this.buildRequestParams(e))).then((function(t){return t.json()})).catch((function(t){return console.log(t)}))}},{key:"buildRequestParams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={date:this.date,program_id:this.programID};return this.startDate&&this.endDate&&(e["start_date"]=this.startDate,e["end_date"]=this.endDate),this.quarter&&(e["quarter"]=this.quarter),Object(u["b"])(p({},e,{},t))}},{key:"getMaternalStatus",value:function(t){var e={report_definition:"pepfar"},r={patient_ids:t};return i["a"].post("/vl_maternal_status".concat("?",this.buildRequestParams(e)),r).then((function(t){return t.json()})).catch((function(t){return console.log(t)}))}},{key:"getMoHTptCohortReport",value:function(){return this.getReport("moh_tpt")}},{key:"getTbPrevReport",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",this.getReport("/programs/1/reports/tb_prev2"));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getPepfarTxMLReport",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",this.getReport("/tx_ml"));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getPepfarTxRttReport",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",this.getReport("/tx_rtt"));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getTptOutcomesReport",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",this.getReport("/programs/1/reports/tpt_outcome"));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getClientRentention",value:function(){return this.getReport("/programs/1/reports/retention")}},{key:"getViralLoadResults",value:function(t){return this.getReport("/programs/".concat(this.programID,"/reports/high_vl_patients"),{range:t})}},{key:"getOtherOutcome",value:function(t){return this.getReport("patient_outcome_list",{outcome:t})}},{key:"getSamplesDrawnReport",value:function(){return this.getReport("samples_drawn")}},{key:"getLabResultsReport",value:function(){return this.getReport("lab_test_results")}}]),t}()},"8d9f":function(t,e,r){"use strict";var a=r("c1df"),n=r.n(a);e["a"]=function(){var t="YYYY-MM-DD",e="DD/MMM/YYYY";function r(t){var e=t.getMonth(),r=t.getFullYear();return e<3?["".concat(r,"-01-01"),"".concat(r,"-03-31")]:e<6?["".concat(r,"-04-01"),"".concat(r,"-06-30")]:e<9?["".concat(r,"-07-01"),"".concat(r,"-09-30")]:["".concat(r,"-10-01"),"".concat(r,"-12-31")]}function a(t){var e=t.getMonth(),r=t.getFullYear();return e<3?"Q1-".concat(r):e<6?"Q2-".concat(r):e<9?"Q3-".concat(r):"Q4-".concat(r)}function s(e){return n()(e).format(t)}function o(t){return n()(t).format(e)}return{ISO_FORMAT:t,LOCAL_FORMAT:e,dateQuarter:r,dateQuarterStr:a,isoDate:s,localDate:o}}()},9521:function(t,e,r){"use strict";r.d(e,"c",(function(){return n})),r.d(e,"a",(function(){return s})),r.d(e,"b",(function(){return o}));r("99af"),r("4fad"),r("ac1f"),r("466d"),r("5319"),r("498a");var a=r("3835");function n(t){try{return t.replace(/<(?:.|\n)*?>/gm," ").replace(/\n/g," ").replace(/\t/g," ").replace(/\s{2,}/g," ").replace(/=/g," ").replace(/,/g," ").trim()}catch(e){return t}}function s(t){return t.match(/fb|fbf|fnp/i)?t.toUpperCase():(t=t.toLowerCase(),"m"===t||"male"===t?"Male":"Female")}function o(t){for(var e="",r=0,n=Object.entries(t);r<n.length;r++){var s=Object(a["a"])(n[r],2),o=s[0],i=s[1];e+="".concat(o,"=").concat(i,"&")}return e}},bee2:function(t,e,r){"use strict";function a(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function n(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}r.d(e,"a",(function(){return n}))},d4ec:function(t,e,r){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.d(e,"a",(function(){return a}))},deb4:function(t,e,r){},df61:function(t,e,r){},f7b75:function(t,e,r){"use strict";var a=r("17fa"),n=r.n(a);n.a}}]);
//# sourceMappingURL=chunk-16265009.dbddd821.js.map