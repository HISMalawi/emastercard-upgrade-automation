(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4bede5ff"],{"0720":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"d-flex",attrs:{id:"wrapper"}},[o("side-bar"),o("div",{attrs:{id:"page-content-wrapper"}},[o("top-nav"),o("div",{staticClass:"container-fluid"},[o("Report",{staticStyle:{"margin-top":"10px"}})],1)],1)],1)])},r=[],i=o("ebd8"),n=o("7c08"),s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"col-12 table-col",attrs:{id:"main-container"}},[o("span",[t._v(" "+t._s(t.report_title)+" "),o("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.$router.go(-1)}}},[t._v("Back")])]),o("div",{staticClass:"row"},[o("div",{staticClass:"col-md-12",staticStyle:{"z-index":"30"}},[o("div",{staticClass:"form-group"},[o("sdPicker",{attrs:{onSubmit:t.fetchDates}})],1)])]),o("div",{staticClass:"row"},[o("div",{staticClass:"col-md-12"},[o("ReportOverlay",{attrs:{reportLoading:t.reportLoading,reportSelected:t.reportSelected}},[o("table",{staticClass:"table table-striped report",attrs:{id:"cohort-clients"}},[o("thead",[o("tr",[o("th",[t._v("#")]),o("th",{staticClass:"disaggregated-numbers"},[t._v("ARV#")]),o("th",{staticClass:"disaggregated-numbers"},[t._v("NHID")]),o("th",{staticClass:"disaggregated-numbers"},[t._v("First name")]),o("th",{staticClass:"disaggregated-numbers"},[t._v("Last name")]),o("th",{staticClass:"disaggregated-numbers"},[t._v("Gender")]),o("th",{staticClass:"disaggregated-numbers"},[t._v("Birthdate")]),o("th",{staticClass:"disaggregated-numbers"},[t._v("Date(s)")])])]),o("tbody",t._l(t.missingAppointmentReport,(function(e,a){return o("tr",{key:a},[o("th",{attrs:{scope:"row"}},[t._v(t._s(a+1))]),o("td",[t._v(t._s(e.arv_number))]),o("td",[t._v(t._s(e.national_id))]),o("td",[t._v(t._s(e.given_name))]),o("td",[t._v(t._s(e.family_name))]),o("td",[t._v(t._s(t.formatGender(e.gender)))]),o("td",[t._v(t._s(e.birthdate))]),o("td",[t._v(t._s(e.dates.join(", ")))])])})),0),o("tfoot",[o("tr",[o("td",[t._v(" Date Created: "+t._s(t.moment().format("YYYY-MM-DD:h:m:s"))+" e-Mastercard Version : "+t._s(t.EMCVersion)+" API Version "+t._s(t.APIVersion)+" ")])])])])])],1)])])},d=[],c=(o("99af"),o("3835")),l=(o("96cf"),o("1da1")),f=o("8051"),h=o("c1df"),u=o.n(h),p=o("4dfe"),m=o("1157"),g=o.n(m),b=(o("6810"),o("8e71")),v=o("9521");o("2cdf"),o("fd5e"),o("5caa"),o("c3dc"),o("8b8e"),o("4e95"),o("a8a1"),o("919c"),o("4b69"),o("7dae"),o("a821"),o("728d");var _={name:"reports",components:{"top-nav":i["a"],"side-bar":n["a"],sdPicker:p["a"],ReportOverlay:b["a"]},data:function(){return{report_title:"Viral Load Report ",reportData:null,dTable:null,formatedData:[],rebuildOutcome:!0,startDate:null,padding:!1,endDate:null,minViralLoad:null,maxViralLoad:null,missingAppointmentReport:{},viralLoadReport:{},reportLoading:!1,reportSelected:!1,APIVersion:sessionStorage.APIVersion,EMCVersion:sessionStorage.EMCVersion}},methods:{formatGender:function(t){return Object(v["a"])(t)},fetchDates:function(t){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function o(){var a,r;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(o.prev=0,a=Object(c["a"])(t,2),e.startDate=a[0],e.endDate=a[1],r=function(t){return t&&"Invalid date"!==t},r(e.startDate)&&r(e.endDate)){o.next=7;break}return o.abrupt("return");case 7:return e.reportLoading=!0,e.reportSelected=!0,o.next=11,e.fetchReport(t);case 11:o.next=16;break;case 13:o.prev=13,o.t0=o["catch"](0),e.$router.push({name:"error",params:{message:o.t0.message}});case 16:return o.prev=16,e.reportLoading=!1,o.finish(16);case 19:case"end":return o.stop()}}),o,null,[[0,13,16,19]])})))()},initDataTable:function(){var t=u()(this.startDate).format("DD/MMM/YYYY"),e=u()(this.endDate).format("DD/MMM/YYYY");this.report_title=sessionStorage.location_name+" Incomplete Visits Report. ","Invalid date"==!t&&(this.report_title+=" Reporting  period: "+t,this.report_title+=" "+e),this.dTable=g()("#cohort-clients").dataTable({order:[[0,"asc"]],fixedHeader:!0,searching:!1,paging:!0,Processing:!0,ServerSide:!1,fixedColumns:{leftColumns:2,rightColumns:1},scroller:{loadingIndicator:!0},dom:"Bfrtip",buttons:[{extend:"copy",title:this.report_title},{extend:"csv",title:this.report_title,footer:!0},{extend:"pdf",title:this.report_title},{extend:"print",title:this.report_title}]})},fetchReport:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,o,a,r,i,n,s,d=this,c=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(e=c.length>0&&void 0!==c[0]?c[0]:{},o=u()(e[0]).format("YYYY-MM-DD"),a=u()(e[1]).format("YYYY-MM-DD"),r="incomplete_visits?program_id=1&start_date=".concat(o,"&end_date=").concat(a,"&tool_name=INCOMPLETE VISITS"),i=document.getElementsByClassName("dt-button"),n=0;n<i.length;n++)i[n].setAttribute("disabled",!0),i[n].style="display: none;";return t.next=8,f["a"].get(r,{},{});case 8:s=t.sent,200===s.status&&s.json().then((function(t){d.missingAppointmentReport=t,console.log(d.missingAppointmentReport),d.dTable.api().destroy(),d.$nextTick((function(){d.initDataTable()}))}));case 10:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},mounted:function(){var t=this;setTimeout((function(){return t.initDataTable()}),300)}},D=_,x=(o("3e52"),o("3ac1"),o("2877")),w=Object(x["a"])(D,s,d,!1,null,"438d1d5f",null),y=w.exports,C={name:"home",components:{"top-nav":i["a"],"side-bar":n["a"],Report:y}},H=C,T=Object(x["a"])(H,a,r,!1,null,null,null);e["default"]=T.exports},"336a":function(t,e,o){"use strict";var a=o("df61"),r=o.n(a);r.a},3835:function(t,e,o){"use strict";function a(t){if(Array.isArray(t))return t}o.d(e,"a",(function(){return n}));o("a4d3"),o("e01a"),o("d28b"),o("e260"),o("d3b7"),o("25f0"),o("3ca3"),o("ddb0");function r(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var o=[],a=!0,r=!1,i=void 0;try{for(var n,s=t[Symbol.iterator]();!(a=(n=s.next()).done);a=!0)if(o.push(n.value),e&&o.length===e)break}catch(d){r=!0,i=d}finally{try{a||null==s["return"]||s["return"]()}finally{if(r)throw i}}return o}}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function n(t,e){return a(t)||r(t,e)||i()}},"3ac1":function(t,e,o){"use strict";var a=o("717b"),r=o.n(a);r.a},"3e52":function(t,e,o){"use strict";var a=o("7f37"),r=o.n(a);r.a},"4dfe":function(t,e,o){"use strict";var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"ctrs"},[o("div",{staticClass:"ctr-table"},[o("div",{staticClass:"ctr-row"},[o("div",{staticClass:"ctr-cell"},[o("date-pick",{staticClass:"date-inputs",attrs:{format:t.format,parseDate:t.parseDate,formatDate:t.formatDate,inputAttributes:{placeholder:"Start Date",readonly:!0}},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1),o("div",{staticClass:"ctr-cell"},[o("date-pick",{staticClass:"date-inputs",attrs:{format:t.format,parseDate:t.parseDate,formatDate:t.formatDate,inputAttributes:{placeholder:"End Date",readonly:!0}},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1),o("div",{staticClass:"ctr-cell"},[o("button",{staticClass:"btn btn-success",on:{click:t.submitDates}},[t._v("Submit")])])])])])},r=[],i=o("f0ca"),n=o.n(i),s=o("c1df"),d=o.n(s),c=(o("6f3c"),o("1789")),l={components:{DatePick:n.a},props:["onSubmit"],data:function(){return{startDate:null,endDate:null,format:"DD/MMM/YYYY",date:c["a"].format(new Date,"DD/MMM/YYYY")}},methods:{initDates:function(){},submitDates:function(){this.startDate=d()(this.startDate).format("YYYY-MM-DD"),this.endDate=d()(this.endDate).format("YYYY-MM-DD"),this.onSubmit([this.startDate,this.endDate])},parseDate:function(t,e){return c["a"].parse(t,e)},formatDate:function(t,e){return c["a"].format(t,e)}},mounted:function(){var t=this;setTimeout((function(){return t.initDates()}),300)}},f=l,h=(o("336a"),o("2877")),u=Object(h["a"])(f,a,r,!1,null,"15deca72",null);e["a"]=u.exports},"4fad":function(t,e,o){var a=o("23e7"),r=o("6f53").entries;a({target:"Object",stat:!0},{entries:function(t){return r(t)}})},"6f53":function(t,e,o){var a=o("83ab"),r=o("df75"),i=o("fc6a"),n=o("d1e7").f,s=function(t){return function(e){var o,s=i(e),d=r(s),c=d.length,l=0,f=[];while(c>l)o=d[l++],a&&!n.call(s,o)||f.push(t?[o,s[o]]:s[o]);return f}};t.exports={entries:s(!0),values:s(!1)}},"717b":function(t,e,o){},"728d":function(t,e,o){var a,r;o("7db0"),o("d81d");o("7037");
/*!
 FixedHeader 3.1.3
 Â©2009-2017 SpryMedia Ltd - datatables.net/license
*/(function(i){a=[o("1157"),o("1653")],r=function(t){return i(t,window,document)}.apply(e,a),void 0===r||(t.exports=r)})((function(t,e,o,a){var r=t.fn.dataTable,i=0,n=function o(a,n){if(!(this instanceof o))throw"FixedHeader must be initialised with the 'new' keyword.";!0===n&&(n={}),a=new r.Api(a),this.c=t.extend(!0,{},o.defaults,n),this.s={dt:a,position:{theadTop:0,tbodyTop:0,tfootTop:0,tfootBottom:0,width:0,left:0,tfootHeight:0,theadHeight:0,windowHeight:t(e).height(),visible:!0},headerMode:null,footerMode:null,autoWidth:a.settings()[0].oFeatures.bAutoWidth,namespace:".dtfc"+i++,scrollLeft:{header:-1,footer:-1},enable:!0},this.dom={floatingHeader:null,thead:t(a.table().header()),tbody:t(a.table().body()),tfoot:t(a.table().footer()),header:{host:null,floating:null,placeholder:null},footer:{host:null,floating:null,placeholder:null}},this.dom.header.host=this.dom.thead.parent(),this.dom.footer.host=this.dom.tfoot.parent();var s=a.settings()[0];if(s._fixedHeader)throw"FixedHeader already initialised on table "+s.nTable.id;s._fixedHeader=this,this._constructor()};return t.extend(n.prototype,{enable:function(t){this.s.enable=t,this.c.header&&this._modeChange("in-place","header",!0),this.c.footer&&this.dom.tfoot.length&&this._modeChange("in-place","footer",!0),this.update()},headerOffset:function(t){return t!==a&&(this.c.headerOffset=t,this.update()),this.c.headerOffset},footerOffset:function(t){return t!==a&&(this.c.footerOffset=t,this.update()),this.c.footerOffset},update:function(){this._positions(),this._scroll(!0)},_constructor:function(){var o=this,a=this.s.dt;t(e).on("scroll"+this.s.namespace,(function(){o._scroll()})).on("resize"+this.s.namespace,(function(){o.s.position.windowHeight=t(e).height(),o.update()}));var r=t(".fh-fixedHeader");!this.c.headerOffset&&r.length&&(this.c.headerOffset=r.outerHeight()),r=t(".fh-fixedFooter"),!this.c.footerOffset&&r.length&&(this.c.footerOffset=r.outerHeight()),a.on("column-reorder.dt.dtfc column-visibility.dt.dtfc draw.dt.dtfc column-sizing.dt.dtfc",(function(){o.update()})),a.on("destroy.dtfc",(function(){a.off(".dtfc"),t(e).off(o.s.namespace)})),this._positions(),this._scroll()},_clone:function(e,o){var a=this.s.dt,r=this.dom[e],i="header"===e?this.dom.thead:this.dom.tfoot;!o&&r.floating?r.floating.removeClass("fixedHeader-floating fixedHeader-locked"):(r.floating&&(r.placeholder.remove(),this._unsize(e),r.floating.children().detach(),r.floating.remove()),r.floating=t(a.table().node().cloneNode(!1)).css("table-layout","fixed").removeAttr("id").append(i).appendTo("body"),r.placeholder=i.clone(!1),r.placeholder.find("*[id]").removeAttr("id"),r.host.prepend(r.placeholder),this._matchWidths(r.placeholder,r.floating))},_matchWidths:function(e,o){var a=function(o){return t(o,e).map((function(){return t(this).width()})).toArray()},r=function(e,a){t(e,o).each((function(e){t(this).css({width:a[e],minWidth:a[e]})}))},i=a("th");a=a("td");r("th",i),r("td",a)},_unsize:function(e){var o=this.dom[e].floating;o&&("footer"===e||"header"===e&&!this.s.autoWidth)?t("th, td",o).css({width:"",minWidth:""}):o&&"header"===e&&t("th, td",o).css("min-width","")},_horizontal:function(t,e){var o=this.dom[t],a=this.s.position,r=this.s.scrollLeft;o.floating&&r[t]!==e&&(o.floating.css("left",a.left-e),r[t]=e)},_modeChange:function(e,a,r){var i=this.dom[a],n=this.s.position,s=t.contains(this.dom["footer"===a?"tfoot":"thead"][0],o.activeElement)?o.activeElement:null;"in-place"===e?(i.placeholder&&(i.placeholder.remove(),i.placeholder=null),this._unsize(a),"header"===a?i.host.prepend(this.dom.thead):i.host.append(this.dom.tfoot),i.floating&&(i.floating.remove(),i.floating=null)):"in"===e?(this._clone(a,r),i.floating.addClass("fixedHeader-floating").css("header"===a?"top":"bottom",this.c[a+"Offset"]).css("left",n.left+"px").css("width",n.width+"px"),"footer"===a&&i.floating.css("top","")):"below"===e?(this._clone(a,r),i.floating.addClass("fixedHeader-locked").css("top",n.tfootTop-n.theadHeight).css("left",n.left+"px").css("width",n.width+"px")):"above"===e&&(this._clone(a,r),i.floating.addClass("fixedHeader-locked").css("top",n.tbodyTop).css("left",n.left+"px").css("width",n.width+"px")),s&&s!==o.activeElement&&s.focus(),this.s.scrollLeft.header=-1,this.s.scrollLeft.footer=-1,this.s[a+"Mode"]=e},_positions:function(){var e=this.s.dt.table(),o=this.s.position,a=this.dom,r=(e=t(e.node()),e.children("thead")),i=e.children("tfoot");a=a.tbody;o.visible=e.is(":visible"),o.width=e.outerWidth(),o.left=e.offset().left,o.theadTop=r.offset().top,o.tbodyTop=a.offset().top,o.theadHeight=o.tbodyTop-o.theadTop,i.length?(o.tfootTop=i.offset().top,o.tfootBottom=o.tfootTop+i.outerHeight(),o.tfootHeight=o.tfootBottom-o.tfootTop):(o.tfootTop=o.tbodyTop+a.outerHeight(),o.tfootBottom=o.tfootTop,o.tfootHeight=o.tfootTop)},_scroll:function(e){var a,r=t(o).scrollTop(),i=t(o).scrollLeft(),n=this.s.position;this.s.enable&&(this.c.header&&(a=!n.visible||r<=n.theadTop-this.c.headerOffset?"in-place":r<=n.tfootTop-n.theadHeight-this.c.headerOffset?"in":"below",(e||a!==this.s.headerMode)&&this._modeChange(a,"header",e),this._horizontal("header",i)),this.c.footer&&this.dom.tfoot.length)&&(r=!n.visible||r+n.windowHeight>=n.tfootBottom+this.c.footerOffset?"in-place":n.windowHeight+r>n.tbodyTop+n.tfootHeight+this.c.footerOffset?"in":"above",(e||r!==this.s.footerMode)&&this._modeChange(r,"footer",e),this._horizontal("footer",i))}}),n.version="3.1.3",n.defaults={header:!0,footer:!1,headerOffset:0,footerOffset:0},t.fn.dataTable.FixedHeader=n,t.fn.DataTable.FixedHeader=n,t(o).on("init.dt.dtfh",(function(e,o){if("dt"===e.namespace){var a=o.oInit.fixedHeader,i=r.defaults.fixedHeader;!a&&!i||o._fixedHeader||(i=t.extend({},i,a),!1!==a&&new n(o,i))}})),r.Api.register("fixedHeader()",(function(){})),r.Api.register("fixedHeader.adjust()",(function(){return this.iterator("table",(function(t){(t=t._fixedHeader)&&t.update()}))})),r.Api.register("fixedHeader.enable()",(function(t){return this.iterator("table",(function(e){e=e._fixedHeader,t=t===a||t,e&&t!==e.s.enable&&e.enable(t)}))})),r.Api.register("fixedHeader.disable()",(function(){return this.iterator("table",(function(t){(t=t._fixedHeader)&&t.s.enable&&t.enable(!1)}))})),t.each(["header","footer"],(function(t,e){r.Api.register("fixedHeader."+e+"Offset()",(function(t){var o=this.context;return t===a?o.length&&o[0]._fixedHeader?o[0]._fixedHeader[e+"Offset"]():a:this.iterator("table",(function(o){(o=o._fixedHeader)&&o[e+"Offset"](t)}))}))})),n}))},"7db0":function(t,e,o){"use strict";var a=o("23e7"),r=o("b727").find,i=o("44d2"),n=o("ae40"),s="find",d=!0,c=n(s);s in[]&&Array(1)[s]((function(){d=!1})),a({target:"Array",proto:!0,forced:d||!c},{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),i(s)},"7f37":function(t,e,o){},"8b8e":function(t,e,o){},"8e71":function(t,e,o){"use strict";var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("b-overlay",{attrs:{show:t.hideReport,"no-center":!0,"spinner-type":"grow","spinner-variant":"primary"},scopedSlots:t._u([{key:"overlay",fn:function(){return[o("div",{staticStyle:{display:"block","min-height":"720px",width:"100%","padding-top":"20%"}},[t.reportSelected?t._e():o("h1",[t._v("No Report Selected")]),t.reportSelected?o("b-spinner",{attrs:{type:"grow",variant:"primary"}}):t._e()],1)]},proxy:!0}])},[t._t("default")],2)},r=[],i={name:"report-overlay",props:{reportLoading:{type:Boolean,required:!0},reportSelected:{type:Boolean,default:!0}},computed:{hideReport:function(){return this.reportLoading||!this.reportSelected}}},n=i,s=o("2877"),d=Object(s["a"])(n,a,r,!1,null,null,null);e["a"]=d.exports},9521:function(t,e,o){"use strict";o.d(e,"c",(function(){return r})),o.d(e,"a",(function(){return i})),o.d(e,"b",(function(){return n}));o("99af"),o("4fad"),o("ac1f"),o("466d"),o("5319"),o("498a");var a=o("3835");function r(t){try{return t.replace(/<(?:.|\n)*?>/gm," ").replace(/\n/g," ").replace(/\t/g," ").replace(/\s{2,}/g," ").replace(/=/g," ").replace(/,/g," ").trim()}catch(e){return t}}function i(t){return t.match(/fb|fbf|fnp/i)?t.toUpperCase():(t=t.toLowerCase(),"m"===t||"male"===t?"Male":"Female")}function n(t){for(var e="",o=0,r=Object.entries(t);o<r.length;o++){var i=Object(a["a"])(r[o],2),n=i[0],s=i[1];e+="".concat(n,"=").concat(s,"&")}return e}},df61:function(t,e,o){}}]);
//# sourceMappingURL=chunk-4bede5ff.e7f6051f.js.map