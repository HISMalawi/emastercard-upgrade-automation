{"version":3,"sources":["webpack:///./src/apps/EMC/views/tools/PatientVisitStats.vue?cd4f","webpack:///./src/apps/EMC/views/tools/PatientVisitStats.vue","webpack:///./src/apps/EMC/views/tools/PatientVisitStats.vue?20b1","webpack:///./src/apps/EMC/utils/common.ts","webpack:///./src/apps/EMC/utils/exports.ts","webpack:///./src/apps/EMC/Components/tables/DrilldownTable.vue?76ca","webpack:///./src/apps/EMC/Components/tables/DrilldownTable.vue","webpack:///./src/apps/EMC/Components/tables/DrilldownTable.vue?02d4","webpack:///./src/apps/EMC/Components/inputs/DateRangePicker.vue?fec8","webpack:///./src/apps/EMC/Components/inputs/DateRangePicker.vue","webpack:///./src/apps/EMC/Components/inputs/DateRangePicker.vue?5ad0","webpack:///./src/apps/EMC/Components/charts/LineChart.vue?f873","webpack:///./src/apps/EMC/Components/charts/LineChart.vue","webpack:///./src/apps/EMC/Components/charts/LineChart.vue?0971","webpack:///./src/utils/modal.ts"],"names":["_hoisted_1","class","render","_ctx","_cache","$props","$setup","$data","$options","_component_date_range_picker","_resolveComponent","_component_ion_col","_component_ion_label","_component_ion_badge","_component_ion_item","_component_ion_list","_component_line_chart","_component_ion_row","_component_ion_grid","_openBlock","_createBlock","default","_withCtx","_createVNode","size","offset","range","onRangeChange","fetchData","_","_createElementVNode","button","onClick","$event","drilldown","totalAttendance","_createTextVNode","_toDisplayString","length","totalPatientVisits","totalGuardianVisits","series","options","onPointSelection","pointSelection","placeholder","defineComponent","components","LineChart","IonGrid","IonRow","IonCol","DateRangePicker","setup","router","useRouter","reactive","ref","computed","value","raw","flat","map","title","text","align","yaxis","plotAreaHeight","buildSeries","data","patientPresent","guardianPresent","bothPresent","seriesData","name","Object","entries","forEach","date","patients","patientId","patient_present","guardian_present","push","ms","Date","getTime","async","loader","show","assign","newRange","report","PatientReportService","setStartDate","startDate","setEndDate","endDate","getPatientVisitTypes","hide","resolvePatientDetails","Patientservice","findByID","p","getArvNumber","getBirthdate","getGender","getCurrentVillage","isEmpty","columns","path","label","initialSort","initialSortOrder","preSort","sortByARV","formatter","HisDate","toStandardHisDisplayFormat","toGenderString","rows","fillRows","patient","rowActionButtons","action","row","modal","DrilldownTableVue","dataPointIndex","sIndex","e","console","error","__exports__","arvNumber","parseInt","split","sanitize","str","replace","trim","convertToCsv","quarter","period","filters","filter","column","exportable","join","sortRows","sort","get","drillable","Array","isArray","dayjs","format","Service","getAppVersion","getApiVersion","getSiteUUID","exportToCSV","opts","csvData","Blob","type","link","document","createElement","href","window","URL","createObjectURL","setAttribute","filename","body","appendChild","click","removeChild","_component_IonIcon","_component_IonButton","_component_IonButtons","_component_IonTitle","_component_IonToolbar","_component_IonHeader","_component_data_table","_component_IonContent","_component_IonPage","slot","icon","close","asyncRows","actionBtns","color","DataTable","IonButton","IonPage","IonHeader","IonContent","IonToolbar","IonButtons","IonTitle","IonIcon","props","String","Function","actionButtons","canExportCsv","Boolean","btns","_a","includes","substring","_component_ion_input","_component_ion_icon","style","height","modelValue","start","width","arrowForward","_normalizeStyle","fontSize","padding","end","IonInput","emits","emit","isValidRange","isSame","isBefore","toastWarning","cRange","watch","newVal","_component_apex_chart","_component_ion_card_content","_component_ion_card","chartOptions","onMarkerClick","Number","IonCard","IonCardContent","ApexChart","defaults","chart","id","xaxis","tickAmount","labels","rotate","markers","hover","sizeOffset","tooltip","x","noData","verticalAlign","offsetX","offsetY","fontFamily","key","c","seriesIndex","log","component","componentProps","cssClass","backdropDismiss","m","modalController","create","present","onWillDismiss","dismiss"],"mappings":"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","file":"js/chunk-5709f79b.a4910def.js","sourcesContent":["import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"his-card\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_date_range_picker = _resolveComponent(\"date-range-picker\")!\n  const _component_ion_col = _resolveComponent(\"ion-col\")!\n  const _component_ion_label = _resolveComponent(\"ion-label\")!\n  const _component_ion_badge = _resolveComponent(\"ion-badge\")!\n  const _component_ion_item = _resolveComponent(\"ion-item\")!\n  const _component_ion_list = _resolveComponent(\"ion-list\")!\n  const _component_line_chart = _resolveComponent(\"line-chart\")!\n  const _component_ion_row = _resolveComponent(\"ion-row\")!\n  const _component_ion_grid = _resolveComponent(\"ion-grid\")!\n\n  return (_openBlock(), _createBlock(_component_ion_grid, null, {\n    default: _withCtx(() => [\n      _createVNode(_component_ion_row, null, {\n        default: _withCtx(() => [\n          _createVNode(_component_ion_col, {\n            size: \"5\",\n            offset: \"7\",\n            class: \"ion-padding\"\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_component_date_range_picker, {\n                range: _ctx.range,\n                onRangeChange: _ctx.fetchData\n              }, null, 8, [\"range\", \"onRangeChange\"])\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_ion_col, {\n            size: \"2\",\n            class: \"ion-padding-top\"\n          }, {\n            default: _withCtx(() => [\n              _createElementVNode(\"div\", _hoisted_1, [\n                _createVNode(_component_ion_list, null, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_ion_item, {\n                      button: \"\",\n                      onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.drilldown(_ctx.totalAttendance, 'Total Attendance')))\n                    }, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_ion_label, null, {\n                          default: _withCtx(() => [\n                            _createTextVNode(\" Total Attendance \")\n                          ]),\n                          _: 1\n                        }),\n                        _createVNode(_component_ion_badge, null, {\n                          default: _withCtx(() => [\n                            _createTextVNode(_toDisplayString(_ctx.totalAttendance.length), 1)\n                          ]),\n                          _: 1\n                        })\n                      ]),\n                      _: 1\n                    }),\n                    _createVNode(_component_ion_item, {\n                      button: \"\",\n                      onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.drilldown(_ctx.totalPatientVisits, 'Total patient visits')))\n                    }, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_ion_label, null, {\n                          default: _withCtx(() => [\n                            _createTextVNode(\" Patient Visit \")\n                          ]),\n                          _: 1\n                        }),\n                        _createVNode(_component_ion_badge, null, {\n                          default: _withCtx(() => [\n                            _createTextVNode(_toDisplayString(_ctx.totalPatientVisits.length), 1)\n                          ]),\n                          _: 1\n                        })\n                      ]),\n                      _: 1\n                    }),\n                    _createVNode(_component_ion_item, {\n                      button: \"\",\n                      onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.drilldown(_ctx.totalGuardianVisits, 'Total guardian visits')))\n                    }, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_ion_label, null, {\n                          default: _withCtx(() => [\n                            _createTextVNode(\" Guardian Visit \")\n                          ]),\n                          _: 1\n                        }),\n                        _createVNode(_component_ion_badge, null, {\n                          default: _withCtx(() => [\n                            _createTextVNode(_toDisplayString(_ctx.totalGuardianVisits.length), 1)\n                          ]),\n                          _: 1\n                        })\n                      ]),\n                      _: 1\n                    })\n                  ]),\n                  _: 1\n                })\n              ])\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_ion_col, { size: \"10\" }, {\n            default: _withCtx(() => [\n              _createVNode(_component_line_chart, {\n                series: _ctx.series,\n                options: _ctx.options,\n                onPointSelection: _ctx.pointSelection,\n                placeholder: \"select date period\"\n              }, null, 8, [\"series\", \"options\", \"onPointSelection\"])\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      })\n    ]),\n    _: 1\n  }))\n}","\nimport { computed, defineComponent, reactive, ref } from \"vue\";\nimport LineChart from \"@/apps/EMC/Components/charts/LineChart.vue\";\nimport { IonGrid, IonRow, IonCol } from \"@ionic/vue\";\nimport { isEmpty } from \"lodash\";\nimport DateRangePicker, { DateRange } from \"@/apps/EMC/Components/inputs/DateRangePicker.vue\";\nimport { PatientReportService } from \"@/apps/ART/services/reports/patient_report_service\";\nimport { loader } from \"@/utils/loader\";\nimport { RowActionButtonInterface, TableColumnInterface } from \"@uniquedj95/vtable\";\nimport { Patientservice } from \"@/services/patient_service\";\nimport { modal } from \"@/utils/modal\";\nimport DrilldownTableVue from \"../../Components/tables/DrilldownTable.vue\";\nimport { useRouter } from \"vue-router\";\nimport HisDate from \"@/utils/Date\";\nimport { toGenderString } from \"@/utils/Strs\";\nimport { sortByARV } from \"../../utils/common\";\n\nexport default defineComponent({\n  components: {\n    LineChart,\n    IonGrid,\n    IonRow,\n    IonCol,\n    DateRangePicker,\n  },\n  setup() {\n    const router = useRouter();\n    const range = reactive({} as DateRange);\n    type PointData = { patientId: number, date: string }\n    type SeriesData = { name: string; raw: PointData[][], data: number[][] }\n    const series = ref([] as SeriesData[]);\n    const totalPatientVisits = computed(() => series.value[0]?.raw.flat() || []);\n    const totalGuardianVisits = computed(() => series.value[1]?.raw.flat() || []);\n    const totalAttendance = computed(() => series.value.map(({ raw }) => raw).flat(3))\n\n    const options = {\n      title: {\n        text: \"Patient Vists Statistics\",\n        align: \"left\",\n      },\n      yaxis: {\n        title: { \n          text: \"Number of clients\"\n        },\n        plotAreaHeight: 800,\n      },\n    }\n\n    const buildSeries = (data: any) => {\n      const patientPresent: Record<string, Array<PointData>> = {};\n      const guardianPresent: Record<string, Array<PointData>> = {};\n      const bothPresent: Record<string, Array<PointData>> = {};\n      const seriesData: Array<SeriesData> = [\n        { name: 'Patient present', raw: [], data: []},\n        { name: 'Guardian present', raw: [], data: []},\n        { name: 'Both patient and guardian present', raw: [], data: []}\n      ]\n\n      Object.entries(data).forEach(([date, patients]: any) => {\n        patientPresent[date] = []\n        guardianPresent[date] = []\n        bothPresent[date] = []\n        Object.entries(patients).forEach(([patientId, {patient_present, guardian_present}]: any) => {\n          if (guardian_present && patient_present) bothPresent[date].push({patientId, date})\n          else if (patient_present) patientPresent[date].push({patientId, date})\n          else if (guardian_present) guardianPresent[date].push({patientId, date})\n        })\n        const ms = new Date(date).getTime();\n        seriesData[0].data.push([ms, patientPresent[date].length])\n        seriesData[0].raw.push(patientPresent[date])\n        seriesData[1].data.push([ms, guardianPresent[date].length])\n        seriesData[1].raw.push(guardianPresent[date])\n        seriesData[2].data.push([ms, bothPresent[date].length])\n        seriesData[2].raw.push(bothPresent[date])\n      })\n\n      return seriesData\n    }\n\n    const fetchData = async (newRange: DateRange) => {\n      loader.show();\n      Object.assign(range, newRange);\n      const report = new PatientReportService();\n      report.setStartDate(newRange.startDate);\n      report.setEndDate(newRange.endDate);\n      const data = await report.getPatientVisitTypes();\n      series.value = buildSeries(data);\n      loader.hide();\n    }\n\n    const resolvePatientDetails = async (patientId: number) => {\n      const data = await Patientservice.findByID(patientId)\n      const p = new Patientservice(data)\n      return {\n        \"arv_number\": p.getArvNumber(),\n        \"birthdate\": p.getBirthdate(),\n        \"gender\": p.getGender(),\n        \"address\": `${p.getCurrentVillage()}`,\n        ...data,\n      }\n    }\n\n    const drilldown = async (patients: PointData[], title= \"Drill down clients\") => {\n      if(isEmpty(patients)) return\n      const columns: TableColumnInterface[] = [\n        { path: \"arv_number\", label: \"ARV Number\", initialSort: true, initialSortOrder: 'asc', preSort: sortByARV },\n        { path: \"birthdate\", label: \"Date of Birth\", formatter: HisDate.toStandardHisDisplayFormat },\n        { path: \"gender\", label: \"Gender\", formatter: toGenderString },\n        { path: \"date\", label: \"Visit Date\", formatter: HisDate.toStandardHisDisplayFormat },\n        { path: \"address\", label: \"Address\" }\n      ]\n      const rows = ref<any[]>([])\n      const fillRows = async () => {\n        for (const { patientId, date } of patients) {\n          const patient = await resolvePatientDetails(patientId)\n          rows.value.push({...patient, date})\n        }\n      }\n      fillRows();\n      const rowActionButtons: RowActionButtonInterface[] = [{ \n        label: \"Select\",\n        action: (row: any) => router.push(`/emc/patient/${row['patient_id']}`)\n      }]\n\n      await modal.show(DrilldownTableVue, {\n        title,\n        columns,\n        rows: rows.value,\n        rowActionButtons,\n      })\n    }\n\n    const pointSelection = async (dataPointIndex: number, sIndex: number) => {\n      if(isEmpty(series.value)) return \n      try {\n        await drilldown(series.value[sIndex].raw[dataPointIndex], `${series.value[sIndex].name} visits`)\n      } catch (e) {\n        console.error(e)\n      }\n    }\n\n    return {\n      range,\n      series,\n      options,\n      totalAttendance,\n      totalPatientVisits,\n      totalGuardianVisits,\n      fetchData,\n      pointSelection,\n      drilldown,\n    };\n  },\n});\n","import { render } from \"./PatientVisitStats.vue?vue&type=template&id=4249fb9a&ts=true\"\nimport script from \"./PatientVisitStats.vue?vue&type=script&lang=ts\"\nexport * from \"./PatientVisitStats.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/andrew-dev/Projects/HIS-Core/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","export function sortByARV(arvNumber: string) {\n  return parseInt(arvNumber.split(\"-\")[2]) || 0\n}","import { sortRows, TableColumnInterface, TableFilterInterface } from '@uniquedj95/vtable';\nimport { get } from 'lodash';\nimport { Service } from '@/services/service';\nimport dayjs from 'dayjs';\n\nfunction sanitize(str: string) {\n  try {\n    return str.replace(/<(?:.|\\n)*?>/gm, \" \")\n      .replace(/\\n/g, \" \")\n      .replace(/\\t/g, \" \")\n      .replace(/\\s{2,}/g, \" \")\n      .replace(/=/g, \" \")\n      .replace(/,/g, \" \")\n      .trim();\n  } catch (error) {\n    return str;\n  }\n}\n\ninterface CsvOptions {\n  columns: TableColumnInterface[];\n  rows: any[];\n  filename: string;\n  quarter?: string;\n  period?: string;\n  filters?: TableFilterInterface;\n}\n\nfunction convertToCsv({columns, rows, quarter, period, filters}: CsvOptions) {\n  let str = columns.filter((column) => column.exportable !== false)\n    .map((column) => column.label)\n    .join(\",\");\n\n  str += \"\\n\";\n  str += sortRows(rows, filters?.sort || []).map((row) => columns\n    .filter(column => column.exportable !== false)\n    .map(column => {\n      let value = get(row, column.path);\n      if (typeof column.formatter === 'function' && value) value = column.formatter(value, row)\n      return sanitize(column.drillable && Array.isArray(value) ? value.length : value);\n    })\n    .join(\",\")\n  ).join(\"\\n\");\n\n  str += \"\\n\" + `Date Created:  ${dayjs().format('DD/MMM/YYYY HH:MM:ss')}`;\n  if (quarter) str += \"\\n\" + `Quarter: ${quarter}`;\n  if (period) str += \"\\n\" + `Quarter: ${period}`;\n  str += \"\\n\" + `e-Mastercard Version : ${Service.getAppVersion()}`;\n  str += \"\\n\" + `API Version ${Service.getApiVersion()}`;\n  str += \"\\n\" + `Site UUID: ${Service.getSiteUUID()}`;\n\n  return str;\n}\n\nexport function exportToCSV(opts: CsvOptions) {\n  const csvData = new Blob([convertToCsv(opts)], { type: \"text/csv;charset=utf-8;\" });\n  const link = document.createElement(\"a\");\n  link.href = window.URL.createObjectURL(csvData);\n  link.setAttribute(\"download\", `${opts.filename}.csv`);\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n}\n","import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_IonIcon = _resolveComponent(\"IonIcon\")!\n  const _component_IonButton = _resolveComponent(\"IonButton\")!\n  const _component_IonButtons = _resolveComponent(\"IonButtons\")!\n  const _component_IonTitle = _resolveComponent(\"IonTitle\")!\n  const _component_IonToolbar = _resolveComponent(\"IonToolbar\")!\n  const _component_IonHeader = _resolveComponent(\"IonHeader\")!\n  const _component_data_table = _resolveComponent(\"data-table\")!\n  const _component_IonContent = _resolveComponent(\"IonContent\")!\n  const _component_IonPage = _resolveComponent(\"IonPage\")!\n\n  return (_openBlock(), _createBlock(_component_IonPage, null, {\n    default: _withCtx(() => [\n      _createVNode(_component_IonHeader, null, {\n        default: _withCtx(() => [\n          _createVNode(_component_IonToolbar, null, {\n            default: _withCtx(() => [\n              _createVNode(_component_IonButtons, { slot: \"end\" }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_IonButton, {\n                    slot: \"end\",\n                    onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.modal.hide())),\n                    \"icon-only\": \"\"\n                  }, {\n                    default: _withCtx(() => [\n                      _createVNode(_component_IonIcon, { icon: _ctx.close }, null, 8, [\"icon\"])\n                    ]),\n                    _: 1\n                  })\n                ]),\n                _: 1\n              }),\n              _createVNode(_component_IonTitle, null, {\n                default: _withCtx(() => [\n                  _createTextVNode(_toDisplayString(_ctx.title), 1)\n                ]),\n                _: 1\n              })\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      }),\n      _createVNode(_component_IonContent, null, {\n        default: _withCtx(() => [\n          _createVNode(_component_data_table, {\n            rows: _ctx.rows,\n            \"async-rows\": _ctx.asyncRows,\n            columns: _ctx.columns,\n            \"row-actions-buttons\": _ctx.rowActionButtons,\n            \"actions-buttons\": _ctx.actionBtns,\n            color: \"custom\"\n          }, null, 8, [\"rows\", \"async-rows\", \"columns\", \"row-actions-buttons\", \"actions-buttons\"])\n        ]),\n        _: 1\n      })\n    ]),\n    _: 1\n  }))\n}","\nimport { computed, defineComponent, PropType } from \"vue\";\nimport { IonButton, IonPage, IonHeader, IonToolbar, IonContent, IonButtons, IonTitle, IonIcon } from \"@ionic/vue\";\nimport { DataTable, ActionButtonInterface, TableColumnInterface, RowActionButtonInterface } from \"@uniquedj95/vtable\";\nimport { close } from \"ionicons/icons\";\nimport { modal } from \"@/utils/modal\";\nimport dayjs from \"dayjs\";\nimport { exportToCSV } from \"../../utils/exports\";\n\nexport default defineComponent({\n  name: \"DrilldownTable\",\n  components: {\n    DataTable,\n    IonButton,\n    IonPage,\n    IonHeader,\n    IonContent,\n    IonToolbar,\n    IonButtons,\n    IonTitle,\n    IonIcon,\n  },\n  props: {\n    title: {\n      type: String,\n      default: \"Report\",\n    },\n    rows: {\n      type: Array as PropType<any[]>,\n      default: () => [],\n    },\n    asyncRows: {\n      type: Function as PropType<() => Promise<any[]>>,\n    },\n    columns: {\n      type: Array as PropType<TableColumnInterface[]>,\n      default: () => [],\n    },\n    rowActionButtons: {\n      type: Array as PropType<RowActionButtonInterface[]>,\n      default: () => [],\n    },\n    actionButtons: {\n      type: Array as PropType<ActionButtonInterface[]>,\n      default: () => [],\n    },\n    canExportCsv: {\n      type: Boolean,\n      default: true,\n    },\n    period: {\n      type: String,\n      default: \"\",\n    },\n  },\n  setup(props){\n    const actionBtns = computed<ActionButtonInterface[]>(() => {\n      const btns = [...props.actionButtons];\n      if (props.canExportCsv) {\n        btns.push({\n          label: \"CSV\",\n          color: \"primary\",\n          action: async (_a, rows, filters, columns) => exportToCSV({\n            rows, \n            filters,\n            columns, \n            period: props.period.includes('Custom') ? props.period.substring(6) : props.period,\n            filename: `${props.title}-${dayjs().format('DD-MMM-YYYY')}`\n          })\n        })\n      }\n      return btns;\n    })\n\n    return {\n      close,\n      modal,\n      actionBtns,\n    }\n  }\n})\n","import { render } from \"./DrilldownTable.vue?vue&type=template&id=63bf706e&ts=true\"\nimport script from \"./DrilldownTable.vue?vue&type=script&lang=ts\"\nexport * from \"./DrilldownTable.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/andrew-dev/Projects/HIS-Core/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, normalizeStyle as _normalizeStyle, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ion_input = _resolveComponent(\"ion-input\")!\n  const _component_ion_col = _resolveComponent(\"ion-col\")!\n  const _component_ion_icon = _resolveComponent(\"ion-icon\")!\n  const _component_ion_row = _resolveComponent(\"ion-row\")!\n  const _component_ion_grid = _resolveComponent(\"ion-grid\")!\n\n  return (_openBlock(), _createBlock(_component_ion_grid, {\n    class: \"ion-no-padding ion-no-margin\",\n    style: {height: '100%'}\n  }, {\n    default: _withCtx(() => [\n      _createVNode(_component_ion_row, null, {\n        default: _withCtx(() => [\n          _createVNode(_component_ion_col, { size: \"6\" }, {\n            default: _withCtx(() => [\n              _createVNode(_component_ion_input, {\n                modelValue: _ctx.start,\n                \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.start) = $event)),\n                type: \"date\",\n                class: \"box\",\n                style: { width: '100%', height: '100%'}\n              }, null, 8, [\"modelValue\"])\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_ion_col, {\n            size: \"1\",\n            style: {\"display\":\"flex\",\"justify-content\":\"center\"}\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_component_ion_icon, {\n                icon: _ctx.arrowForward,\n                style: _normalizeStyle({ fontSize: '24px', padding: '.5rem'})\n              }, null, 8, [\"icon\", \"style\"])\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_ion_col, { size: \"5\" }, {\n            default: _withCtx(() => [\n              _createVNode(_component_ion_input, {\n                modelValue: _ctx.end,\n                \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_ctx.end) = $event)),\n                type: \"date\",\n                class: \"box\",\n                style: { width: '100%', height: '100%'}\n              }, null, 8, [\"modelValue\"])\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      })\n    ]),\n    _: 1\n  }))\n}","\nimport { computed, defineComponent, PropType, ref, watch } from \"vue\";\nimport { IonGrid, IonInput, IonRow, IonCol, IonIcon } from \"@ionic/vue\";\nimport { arrowForward } from \"ionicons/icons\";\nimport dayjs from \"dayjs\";\nimport { toastWarning } from \"@/utils/Alerts\";\n\nexport interface DateRange {\n  startDate: string;\n  endDate: string;\n}\n\nexport default defineComponent({\n  name: \"DateRangePicker\",\n  components: {\n    IonInput,\n    IonGrid,\n    IonRow,\n    IonCol,\n    IonIcon,\n  },\n  props: {\n    range: {\n      type: Object as PropType<DateRange>,\n      default: () => ({ startDate: \"\", endDate: \"\" }),\n    }\n  },\n  emits: [\"rangeChange\"],\n  setup (props, { emit }) {\n    const start = ref(props.range.startDate);\n    const end = ref(props.range.endDate);\n\n    const isValidRange = (start: string, end: string) => {\n      if(dayjs(start).isSame(end) || dayjs(start).isBefore(end)){\n        return true;\n      }\n      toastWarning(\"Start date must be before or equal to end date\");\n      return false;\n    }\n    const cRange = computed(() => {\n      if(start.value && end.value && isValidRange(start.value, end.value)) {\n        return { startDate: start.value, endDate: end.value };\n      }\n    })\n\n    watch(cRange, (newVal) => {\n      if(newVal) {\n        emit(\"rangeChange\", newVal);\n      }\n    })\n\n    return {\n      arrowForward,\n      start,\n      end,\n    };\n  },\n})\n","import { render } from \"./DateRangePicker.vue?vue&type=template&id=5ffdcc9b&ts=true\"\nimport script from \"./DateRangePicker.vue?vue&type=script&lang=ts\"\nexport * from \"./DateRangePicker.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/andrew-dev/Projects/HIS-Core/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_apex_chart = _resolveComponent(\"apex-chart\")!\n  const _component_ion_card_content = _resolveComponent(\"ion-card-content\")!\n  const _component_ion_card = _resolveComponent(\"ion-card\")!\n\n  return (_openBlock(), _createBlock(_component_ion_card, {\n    class: \"his-card\",\n    style: {\"height\":\"100%\"}\n  }, {\n    default: _withCtx(() => [\n      _createVNode(_component_ion_card_content, null, {\n        default: _withCtx(() => [\n          _createVNode(_component_apex_chart, {\n            width: \"100%\",\n            height: _ctx.height,\n            type: \"line\",\n            options: _ctx.chartOptions,\n            series: _ctx.series,\n            onMarkerClick: _ctx.onPointSelection\n          }, null, 8, [\"height\", \"options\", \"series\", \"onMarkerClick\"])\n        ]),\n        _: 1\n      })\n    ]),\n    _: 1\n  }))\n}","\nimport { computed, defineComponent, PropType } from \"vue\";\nimport { IonCard, IonCardContent } from \"@ionic/vue\";\nimport ApexChart from \"vue3-apexcharts\"\n\nexport default defineComponent({\n  name: \"LineChart\",\n  props: {\n    series: {\n      type: Array as PropType<any[]>,\n      default: () => []\n    },\n    options: {\n      type: Object as PropType<Record<string, any>>,\n      default: () => ({})\n    },\n    height: {\n      type: [String, Number],\n      default: 560\n    },\n    placeholder: {\n      type: String,\n      default: \"Loading data...\"\n    }\n  },\n  components: { IonCard, IonCardContent, ApexChart },\n  emits: [\"pointSelection\"],\n  setup(props, { emit }) {\n    const chartOptions = computed(() => {\n      const defaults: Record<string, any> = {\n        chart: {\n          id: \"line-chart\",\n          type: 'line',\n        },\n        xaxis: {\n          type: 'datetime',\n          tickAmount: 2,\n          labels: {\n            show: true,\n            rotate: -75,\n          }\n        },\n        markers: {\n          size: 8,\n          hover: {\n            sizeOffset: 3\n          }\n        },\n        tooltip: {\n          x: {\n            format: 'dd/MMM/yyyy'\n          }\n        },\n        title: {\n          text: 'Line Chart',\n          align: 'left'\n        },\n        noData: {\n          text: props.placeholder,\n          align: \"center\",\n          verticalAlign: \"middle\",\n          offsetX: 0,\n          offsetY: 0,\n          style: {\n            color: \"#a7a7a7\",\n            fontSize: \"25px\",\n            fontFamily: \"Helvetica\",\n          },\n        },\n      }\n\n      for (const key in props.options) {\n        defaults[key] = { ...defaults[key], ...props.options[key] };\n      }\n      \n      return defaults;\n    });\n\n    const onPointSelection = (e: any, c: any, { dataPointIndex, seriesIndex }: any) => {\n      console.log(e, c)\n      emit(\"pointSelection\", dataPointIndex, seriesIndex <= 0 ? 0 : seriesIndex)\n    }\n    return {\n      chartOptions,\n      onPointSelection,\n    };\n  },\n});\n","import { render } from \"./LineChart.vue?vue&type=template&id=ead7d7b6&ts=true\"\nimport script from \"./LineChart.vue?vue&type=script&lang=ts\"\nexport * from \"./LineChart.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/andrew-dev/Projects/HIS-Core/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { modalController } from \"@ionic/vue\";\n\nexport const modal = {\n  async show(component: any, componentProps?: Record<string, any>, cssClass = 'custom-modal', backdropDismiss = true) {\n    const m = await modalController.create({\n      component,\n      cssClass,\n      backdropDismiss,\n      componentProps,\n    });\n    m.present();\n    const { data } = await m.onWillDismiss();\n    if(data) return data;\n  },\n  async hide(data?: Record<string, any>) {\n    await modalController.dismiss(data);\n  }\n}"],"sourceRoot":""}