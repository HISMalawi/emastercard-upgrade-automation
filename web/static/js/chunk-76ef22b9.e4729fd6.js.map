{"version":3,"sources":["webpack:///./src/apps/CxCa/views/reports/pepfar/CXCA_TX_Report.vue?9fbf","webpack:///./src/apps/CxCa/views/reports/pepfar/CXCA_TX_Report.vue","webpack:///./src/apps/CxCa/views/reports/pepfar/CXCA_TX_Report.vue?2f65"],"names":["render","_ctx","_cache","$props","$setup","$data","$options","_component_ion_loading","_resolveComponent","_component_v2Datatable","_component_ion_page","_openBlock","_createBlock","default","_withCtx","_createVNode","isLoading","message","title","subtitle","period","columns","columnData","reportData","rowsPerPage","onConfigure","configure","csvQuarter","onRefresh","generate","_","ref","startDate","endDate","defineComponent","components","IonPage","IonLoading","v2Datatable","setup","drilldown","async","patientIdentifiers","modalController","create","component","DrillPatientIds","backdropDismiss","cssClass","componentProps","onFinish","getTop","then","v","dismiss","present","label","span","thRowspan","exportable","thColspan","secondaryLabel","value","data","first_time_screened","cryotherapy","length","tdClick","column","age_group","thermocoagulation","leep","post_treatment_followup","rescreened_after_prev_visit","toastWarning","report","CxCaReportService","getClinicReport","slice","map","index","gender","e","toastDanger","DateSelection","sDate","eDate","periodstr","toDate","onMounted","__exports__"],"mappings":"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","file":"js/chunk-76ef22b9.e4729fd6.js","sourcesContent":["import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ion_loading = _resolveComponent(\"ion-loading\")!\n  const _component_v2Datatable = _resolveComponent(\"v2Datatable\")!\n  const _component_ion_page = _resolveComponent(\"ion-page\")!\n\n  return (_openBlock(), _createBlock(_component_ion_page, null, {\n    default: _withCtx(() => [\n      _createVNode(_component_ion_loading, {\n        \"is-open\": _ctx.isLoading,\n        message: \"Please wait...\"\n      }, null, 8, [\"is-open\"]),\n      _createVNode(_component_v2Datatable, {\n        title: \"CXCA TX Report\",\n        subtitle: _ctx.period,\n        columns: _ctx.columns,\n        columnData: _ctx.reportData,\n        rowsPerPage: 25,\n        onConfigure: _ctx.configure,\n        csvQuarter: _ctx.csvQuarter,\n        onRefresh: () => _ctx.generate()\n      }, null, 8, [\"subtitle\", \"columns\", \"columnData\", \"onConfigure\", \"csvQuarter\", \"onRefresh\"])\n    ]),\n    _: 1\n  }))\n}","\nimport { defineComponent, ref, onMounted } from 'vue';\nimport { IonPage, IonLoading, modalController } from \"@ionic/vue\"\nimport  v2Datatable from \"@/components/DataViews/tables/v2PocDatatable/TableView.vue\"\nimport { v2ColumnDataInterface, v2ColumnInterface } from '@/components/DataViews/tables/v2PocDatatable/types';\nimport { CxCaReportService } from \"@/apps/CxCa/services/reports/cxca_report_service\"\nimport { DateSelection } from \"@/utils/ReportDateSelectionPrompt\"\nimport { toastDanger, toastWarning } from '@/utils/Alerts';\nimport DrillPatientIds from '../../../../../components/DrillPatientIds.vue';\nimport { toDate } from '@/utils/Strs';\n\nconst reportData = ref<any>([])\nconst startDate = ref('')\nconst endDate = ref('')\nconst period = ref('')\nconst isLoading = ref(false)\nconst csvQuarter = ref('')\nexport default defineComponent({ \n    components: { \n        IonPage,\n        IonLoading,\n        v2Datatable,\n    },\n    setup() {\n        const drilldown = async (title: string, patientIdentifiers: number[]) => {\n            (await modalController.create({\n                component: DrillPatientIds,\n                backdropDismiss: false,\n                cssClass: 'large-modal',\n                componentProps: {\n                    title,\n                    subtitle: period,\n                    patientIdentifiers,\n                    onFinish: () => modalController.getTop().then(v => v && modalController.dismiss())\n                }\n            })).present()\n        }\n        /**\n         * Table column definition and value mapping\n         */\n        const columns: Array<v2ColumnInterface[]> = [\n            [\n                {\n                    label: \"#\",\n                    ref: \"index\",\n                    span: {\n                        thRowspan: 2\n                    }\n                },\n                {\n                    label: \"Age group\",\n                    ref: \"age_group\",\n                    span: {\n                        thRowspan: 2,\n                    }\n                },\n                {\n                    label: \"Gender\",\n                    ref: \"gender\",\n                    exportable: false,\n                    span: {\n                        thRowspan: 2\n                    }\n                }, \n                {\n                    label: \"1st time screened\",\n                    ref: \"\",\n                    span: {\n                        thColspan: 3\n                    }\n                },\n                {\n                    label: \"Rescreened after previous negative\",\n                    ref: \"\",\n                    span: {\n                        thColspan: 3\n                    }\n                },\n                {\n                    label: \"Post-treatment follow-up\",\n                    ref: \"\",\n                    span: {\n                        thColspan: 3\n                    }\n                }\n            ],\n            [\n                {\n                    label: \"Cryotherapy\",\n                    ref: 'first_time_screened_cryotherapy',\n                    secondaryLabel: \"1st screened (cryotherapy)\",\n                    value: (data: any) => data.first_time_screened.cryotherapy.length,\n                    tdClick: ({ column, data }: v2ColumnDataInterface) => drilldown(\n                        `${data.age_group} ${column.secondaryLabel}`, data.first_time_screened.cryotherapy\n                    )\n                },\n                {\n                    label: \"Thermocoagulation\",\n                    ref: 'first_time_screened_thermocoagulation',\n                    secondaryLabel:  \"1st time screened (Thermocoagulation)\",\n                    value: (data: any) => data.first_time_screened.thermocoagulation.length,\n                    tdClick: ({ column,data }: v2ColumnDataInterface) => drilldown(\n                        `${data.age_group} ${column.secondaryLabel}`, data.first_time_screened.thermocoagulation\n                    )\n                },\n                {\n                    label: \"LEEP\",\n                    ref: 'first_time_screened_leep',\n                    secondaryLabel: \"1st screened(leep)\",\n                    value: (data: any) => data.first_time_screened.leep.length,\n                    tdClick: ({ column, data }: v2ColumnDataInterface) => drilldown(\n                        `${data.age_group} ${column.secondaryLabel}`, data.first_time_screened.leep\n                    )\n                },\n                {\n                    label: \"Cryotherapy\",\n                    ref: 'post_treatment_followup_cryotherapy',\n                    secondaryLabel: \"Post-treatment followup(Cryotherapy)\",\n                    value: (data: any) => data.post_treatment_followup.cryotherapy.length,\n                    tdClick: ({column, data}: v2ColumnDataInterface) => drilldown(\n                        `${data.age_group} ${column.secondaryLabel}`, data.post_treatment_followup.cryotherapy\n                    )\n                },\n                {\n                    label: \"Thermocoagulation\",\n                    ref: \"post_treatment_followup_thermocoagulation\",\n                    secondaryLabel: \"Post-treatment followup (Thermocoagulation)\",\n                    value: (data: any) => data.post_treatment_followup.thermocoagulation.length,\n                    tdClick: ({column, data}: v2ColumnDataInterface) => drilldown(\n                        `${data.age_group} ${column.secondaryLabel}`, data.post_treatment_followup.thermocoagulation\n                    )\n                },\n                {\n                    label: \"LEEP\",\n                    ref: \"post_treatment_followup_leep\",\n                    secondaryLabel: \"Post-treatment followup (leep)\",\n                    value: (data: any) => data.post_treatment_followup.leep.length,\n                    tdClick: ({ column, data}: v2ColumnDataInterface) => drilldown(\n                        `${data.age_group} ${column.secondaryLabel}`, data.post_treatment_followup.leep\n                    )\n                },\n                {\n                    label: \"Cryotherapy\",\n                    ref: 'rescreened_after_prev_visit_cryotherapy',\n                    secondaryLabel: \"Rescreen after prev visit (Cryotherapy)\",\n                    value: (data: any) => data.rescreened_after_prev_visit.cryotherapy.length,\n                    tdClick: ({column, data}: v2ColumnDataInterface) => drilldown(\n                        `${data.age_group} ${column.secondaryLabel}`, data.rescreened_after_prev_visit.cryotherapy\n                    )\n                },\n                {\n                    label: \"Thermocoagulation\",\n                    ref: 'rescreened_after_prev_visit_thermocoagulation',\n                    secondaryLabel: \"Rescreen after prev visit (Thermocoagulation)\",\n                    value: (data: any) => data.rescreened_after_prev_visit.thermocoagulation.length,\n                    tdClick: ({column, data}: v2ColumnDataInterface) => drilldown(\n                        `${data.age_group} ${column.secondaryLabel}`, data.rescreened_after_prev_visit.thermocoagulation\n                    )\n                },\n                {\n                    label: \"LEEP\",\n                    ref: 'rescreened_after_prev_visit_leep',\n                    secondaryLabel: \"Rescreen after prev visit (leep)\",\n                    value: (data: any) => data.rescreened_after_prev_visit.leep.length,\n                    tdClick: ({column, data}: v2ColumnDataInterface) => drilldown(\n                       `${data.age_group} ${column.secondaryLabel}`, data.rescreened_after_prev_visit.leep\n                    )\n                }\n            ]\n        ]\n        \n        /**\n         * Generates report by start date and end date\n         */\n        const generate = async () => {\n            if (!(startDate.value && endDate.value))  {\n                return toastWarning('Start date and end date required!')\n            }\n            isLoading.value = true\n            reportData.value = []\n            const report = new CxCaReportService()\n            report.startDate = startDate.value\n            report.endDate = endDate.value\n            try {\n                reportData.value = (await report.getClinicReport('CXCA TX'))\n                    .slice(5)\n                    .map((data: any, index: any) => {\n                        data.index = index + 1\n                        data.gender = \"Female\"\n                        return data\n                    })\n            } catch (e) {\n                toastDanger(\"Unable to generate report!\")\n            }\n            isLoading.value = false\n        }\n\n        /**\n         * Loads a dialogue to allow users to configure start and end date\n         */\n        const configure = () => DateSelection({\n            onFinish: (sDate: string, eDate: string, periodstr: string) => {\n                startDate.value = sDate\n                endDate.value = eDate\n                period.value = `Period (${periodstr})`\n                csvQuarter.value = `${toDate(startDate.value)} to ${toDate(endDate.value)}`\n                generate()\n            }\n        })\n\n        /**\n         * Initialization code when the report is empty!\n         */\n        onMounted(() => !reportData.value.length && configure())\n\n        return  {\n            columns,\n            isLoading,\n            reportData,\n            period,\n            csvQuarter,\n            generate,\n            configure\n        }\n    }\n})\n","import { render } from \"./CXCA_TX_Report.vue?vue&type=template&id=ef03bb7a&ts=true\"\nimport script from \"./CXCA_TX_Report.vue?vue&type=script&lang=ts\"\nexport * from \"./CXCA_TX_Report.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/daniel/local-repos/HIS-Core/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}