(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fc65ab3e"],{"1d25":function(e,t,o){"use strict";o.r(t);var a=o("7a23");const n={class:"his-lg-text ion-padding-start"};function c(e,t,o,c,r,l){const i=Object(a["resolveComponent"])("ion-button"),d=Object(a["resolveComponent"])("dashboard-card"),s=Object(a["resolveComponent"])("ion-col"),u=Object(a["resolveComponent"])("ion-row"),b=Object(a["resolveComponent"])("line-chart"),p=Object(a["resolveComponent"])("ion-grid"),O=Object(a["resolveComponent"])("layout");return Object(a["openBlock"])(),Object(a["createBlock"])(O,null,{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("h1",n,[Object(a["createTextVNode"])(" Dashboard "),Object(a["createVNode"])(i,{class:"ion-margin-end ion-float-right",onClick:t[0]||(t[0]=()=>e.loadData(!0))},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(" Refresh ")]),_:1})]),Object(a["createVNode"])(p,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(u,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(s,{"size-lg":"3"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(d,{value:e.missedAppointments,label:"Missed Appointments",color:"primary",icon:e.calendar},null,8,["value","icon"])]),_:1}),Object(a["createVNode"])(s,{"size-lg":"3"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(d,{value:e.appointmentsDue,label:"Appointments Due",color:"success",icon:e.alarm},null,8,["value","icon"])]),_:1}),Object(a["createVNode"])(s,{"size-lg":"3"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(d,{value:e.dueForVL,label:"Due for Viral Load",color:"secondary",icon:e.time},null,8,["value","icon"])]),_:1}),Object(a["createVNode"])(s,{"size-lg":"3"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(d,{value:e.defaulters,label:"Defaulters (this Quarter)",color:"danger",icon:e.people},null,8,["value","icon"])]),_:1})]),_:1}),Object(a["createVNode"])(u,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(s,{"size-lg":"3"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(d,{label:"Patients on DTG",value:e.patientsOnDTG,class:"his-card"},null,8,["value"]),Object(a["createVNode"])(d,{label:"TX Current (30 Days)",value:e.txCurrent30,class:"his-card"},null,8,["value"]),Object(a["createVNode"])(d,{label:"TX Current (60 Days)",value:e.txCurrent60,class:"his-card"},null,8,["value"])]),_:1}),Object(a["createVNode"])(s,{"size-lg":"9"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(b,{options:e.chartOptions,series:e.chartSeries},null,8,["options","series"])]),_:1})]),_:1})]),_:1})]),_:1})}o("14d9");var r=o("8d56"),l=o("d867");function i(e,t,o,n,c,r){const l=Object(a["resolveComponent"])("ion-card-title"),i=Object(a["resolveComponent"])("ion-spinner"),d=Object(a["resolveComponent"])("ion-card-subtitle"),s=Object(a["resolveComponent"])("ion-icon"),u=Object(a["resolveComponent"])("ion-card-content"),b=Object(a["resolveComponent"])("ion-card");return Object(a["openBlock"])(),Object(a["createBlock"])(b,{color:e.color},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(u,{class:"ion-padding"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(l,{class:"ion-padding"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.label),1)]),_:1}),e.isLoading?(Object(a["openBlock"])(),Object(a["createBlock"])(d,{key:0,class:"ion-padding"},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(i,{name:"bubbles",color:e.loaderColor},null,8,["color"])]),_:1})):(Object(a["openBlock"])(),Object(a["createBlock"])(d,{key:1,class:"ion-padding"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.value),1)]),_:1})),e.canShowIcon?(Object(a["openBlock"])(),Object(a["createBlock"])(s,{key:2,icon:e.icon,class:"ion-float-right"},null,8,["icon"])):Object(a["createCommentVNode"])("",!0)]),_:1})]),_:1},8,["color"])}var d=Object(a["defineComponent"])({name:"DashboardCard",props:{value:{type:Number,default:-1},label:{type:String,required:!0},icon:{type:String},color:{type:String,default:"light"}},components:{IonCard:l["IonCard"],IonCardContent:l["IonCardContent"],IonCardTitle:l["IonCardTitle"],IonCardSubtitle:l["IonCardSubtitle"],IonSpinner:l["IonSpinner"],IonIcon:l["IonIcon"]},setup(e){const t=Object(a["computed"])(()=>-1===e.value),o=Object(a["computed"])(()=>{var t;return!(null===(t=e.icon)||void 0===t||!t.length)}),n=Object(a["computed"])(()=>"light"===e.color?"primary":"light");return{isLoading:t,canShowIcon:o,loaderColor:n}}}),s=(o("7d1e"),o("d959")),u=o.n(s);const b=u()(d,[["render",i],["__scopeId","data-v-4e012de6"]]);var p=b,O=o("ff79"),j=o("9283"),h=o("8e8b"),C=o("2845"),m=o("c5be"),f=o("2ef0"),g=Object(a["defineComponent"])({name:"Dashboard",inheritAttrs:!1,components:{Layout:r["a"],IonGrid:l["IonGrid"],IonRow:l["IonRow"],IonCol:l["IonCol"],DashboardCard:p,LineChart:m["a"],IonButton:l["IonButton"]},setup(){const e=j["c"].toStandardHisFormat(new Date),t=j["c"].getDateQuarter(e),o=j["c"].add(e,"day",1).format(j["b"]),n=Object(a["ref"])(),c=Object(a["ref"])(),r=Object(a["ref"])(),l=Object(a["ref"])(),i=Object(a["ref"])(),d=Object(a["ref"])(),s=Object(a["ref"])(),u=Object(a["ref"])([]),b=Object(a["ref"])({}),p=e=>{if(Object(f["isEmpty"])(e))return;const t=Object.keys(e),o=[],a=[],n=[];t.forEach(t=>{n.push(j["c"].toStandardHisDisplayFormat(t)),o.push(e[t].complete),a.push(e[t].incomplete)}),b.value={title:{text:"Complete / incomplete visits",align:"left"},xaxis:{categories:n,tickAmount:30,labels:{show:!0,rotate:-75}}},u.value=[{name:"Complete Visits",data:o},{name:"Incomplete Visits",data:a}]},m=async(a=!1)=>{i.value=(await h["a"].get(C["a"].PATIENT_ON_DTG,{quarter:t,reload:a})).length,p(await h["a"].get(C["a"].PATIENT_VISITS,{quarter:t,reload:a})),c.value=(await h["a"].get(C["a"].APPOINTMENTS_DUE,{date:o,reload:a})).length,n.value=(await h["a"].get(C["a"].MISSED_APPOINTMENTS,{date:e,quarter:t,reload:a})).length,d.value=(await h["a"].get(C["a"].TX_CURRENT_30,{quarter:t,reload:a})).length,s.value=(await h["a"].get(C["a"].TX_CURRENT_60,{quarter:t,reload:a})).length,r.value=(await h["a"].get(C["a"].DUE_FOR_VL,{quarter:t,reload:a})).length,l.value=(await h["a"].get(C["a"].DEFAULTERS,{date:e,quarter:{...t,end:e},reload:a})).length};return Object(a["onMounted"])(async()=>m()),{people:O["people"],calendar:O["calendar"],alarm:O["alarm"],time:O["time"],missedAppointments:n,appointmentsDue:c,dueForVL:r,defaulters:l,patientsOnDTG:i,txCurrent30:d,txCurrent60:s,chartOptions:b,chartSeries:u,loadData:m}}});const v=u()(g,[["render",c]]);t["default"]=v},"4e17":function(e,t,o){},"7d1e":function(e,t,o){"use strict";o("4e17")},c5be:function(e,t,o){"use strict";var a=o("7a23");function n(e,t,o,n,c,r){const l=Object(a["resolveComponent"])("apex-chart"),i=Object(a["resolveComponent"])("ion-card-content"),d=Object(a["resolveComponent"])("ion-card");return Object(a["openBlock"])(),Object(a["createBlock"])(d,{class:"his-card",style:{height:"100%"}},{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(i,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(l,{width:"100%",height:e.height,type:"line",options:e.chartOptions,series:e.series,onMarkerClick:e.onPointSelection},null,8,["height","options","series","onMarkerClick"])]),_:1})]),_:1})}var c=o("d867"),r=o("ae27"),l=o.n(r),i=Object(a["defineComponent"])({name:"LineChart",props:{series:{type:Array,default:()=>[]},options:{type:Object,default:()=>({})},height:{type:[String,Number],default:560},placeholder:{type:String,default:"Loading data..."}},components:{IonCard:c["IonCard"],IonCardContent:c["IonCardContent"],ApexChart:l.a},emits:["pointSelection"],setup(e,{emit:t}){const o=Object(a["computed"])(()=>{const t={chart:{id:"line-chart",type:"line"},xaxis:{type:"datetime",tickAmount:2,labels:{show:!0,rotate:-75}},markers:{size:8,hover:{sizeOffset:3}},tooltip:{x:{format:"dd/MMM/yyyy"}},title:{text:"Line Chart",align:"left"},noData:{text:e.placeholder,align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:"#a7a7a7",fontSize:"25px",fontFamily:"Helvetica"}}};for(const o in e.options)t[o]={...t[o],...e.options[o]};return t}),n=(e,o,{dataPointIndex:a,seriesIndex:n})=>{console.log(e,o),t("pointSelection",a,n<=0?0:n)};return{chartOptions:o,onPointSelection:n}}}),d=o("d959"),s=o.n(d);const u=s()(i,[["render",n]]);t["a"]=u}}]);
//# sourceMappingURL=chunk-fc65ab3e.411a06e4.js.map