{"version":3,"sources":["webpack:///./src/apps/ART/views/reports/clinic/ClinicAppointments.vue?d8a0","webpack:///./src/apps/ART/views/reports/clinic/ClinicAppointments.vue","webpack:///./src/apps/ART/views/reports/clinic/ClinicAppointments.vue?dfa5","webpack:///./src/apps/ART/services/reports/patient_report_service.ts"],"names":["render","_ctx","_cache","$props","$setup","$data","$options","_component_report_template","_resolveComponent","_component_ion_page","_openBlock","_createBlock","default","_withCtx","_createVNode","title","period","rows","fields","columns","showtitleOnly","config","showIndex","encryptPDF","onReportConfiguration","onPeriod","_","defineComponent","mixins","ReportMixin","components","ReportTemplate","IonPage","data","date","appointments","table","thTxt","csvExportable","pdfExportable","created","this","report","PatientReportService","id","helpText","type","FieldType","TT_DATE_PICKER","defaultValue","getSessionDate","validation","val","Validation","required","onValue","async","setStartDate","getBookedAppointments","infoItems","label","value","length","methods","form","HisDate","toStandardHisDisplayFormat","setRows","sort","asc","d","given_name","forEach","push","tdARV","arv_number","td","family_name","formatGender","gender","tdDate","birthdate","district","village","land_mark","cell_phone","tdBtn","confirmPatient","person_id","__exports__","AGE_GROUPS","ArtReportService","constructor","super","getJson","programID","getViralLoadResults","range","getReport","getOtherOutcome","outcome","getPatientVisitTypes","getClientsDueForVl","getClientRentention","getExternalConsultationClients","getMissedAppointments","getPregnantWomen","getArchivingCandidates","getIncompleteVisits"],"mappings":"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","file":"js/chunk-a0c215ba.75184c43.js","sourcesContent":["import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_report_template = _resolveComponent(\"report-template\")!\n  const _component_ion_page = _resolveComponent(\"ion-page\")!\n\n  return (_openBlock(), _createBlock(_component_ion_page, null, {\n    default: _withCtx(() => [\n      _createVNode(_component_report_template, {\n        title: _ctx.title,\n        period: _ctx.period,\n        rows: _ctx.rows,\n        fields: _ctx.fields,\n        columns: _ctx.columns,\n        showtitleOnly: true,\n        config: {\n                showIndex: false\n            },\n        encryptPDF: true,\n        onReportConfiguration: _ctx.onPeriod\n      }, null, 8, [\"title\", \"period\", \"rows\", \"fields\", \"columns\", \"onReportConfiguration\"])\n    ]),\n    _: 1\n  }))\n}","\nimport { defineComponent } from 'vue'\nimport { PatientReportService } from \"@/apps/ART/services/reports/patient_report_service\"\nimport ReportMixin from \"@/apps/ART/views/reports/ReportMixin.vue\"\nimport ReportTemplate from \"@/views/reports/BaseTableReport.vue\"\nimport { FieldType } from '@/components/Forms/BaseFormElements'\nimport Validation from \"@/components/Forms/validations/StandardValidations\"\nimport HisDate from \"@/utils/Date\"\nimport table from \"@/components/DataViews/tables/ReportDataTable\"\nimport { IonPage } from \"@ionic/vue\"\nimport { sort } from 'fast-sort'\n\nexport default defineComponent({\n    mixins: [ReportMixin],\n    components: { ReportTemplate, IonPage },\n    data: () => ({\n        title: 'Booked clients',\n        date: '' as string,\n        rows: [] as Array<any>,\n        appointments: {} as Record<string, any>,\n        columns: [\n            [\n                table.thTxt('ARV#'),\n                table.thTxt('First name', { csvExportable: false, pdfExportable: true }),\n                table.thTxt('Last name', { csvExportable: false, pdfExportable: true }) ,\n                table.thTxt('Gender'),\n                table.thTxt('birthdate'),\n                table.thTxt('Current Address', { csvExportable: false, pdfExportable: true }),\n                table.thTxt('Actions')\n            ]\n        ]\n    }),\n    created() {\n        this.report = new PatientReportService()\n        this.fields = [\n            {\n                id: 'date',\n                helpText: 'Select date',\n                type: FieldType.TT_DATE_PICKER,\n                defaultValue: () => PatientReportService.getSessionDate(),\n                validation: (val: any) => Validation.required(val),\n                onValue: async (date: string) => {\n                    this.report.setStartDate(date)\n                    if (!this.appointments[date]) {\n                        this.appointments[date] = (await this.report.getBookedAppointments(date)) || []\n                    }\n                    return true\n                },\n                config: {\n                    infoItems: (date: string) => {\n                        return [{\n                            label: 'Appointments',\n                            value: this.appointments[date]?.length || 0\n                        }]\n                   } \n                }\n            }\n        ]\n    },\n    methods: {\n        onPeriod(form: any) {\n            this.rows = []\n            this.period = HisDate.toStandardHisDisplayFormat(form.date)\n            this.setRows(this.appointments[form.date])\n        },\n        setRows(data: Array<any>) {\n            sort(data).asc((d: any) => d.given_name).forEach((data: any) => {\n                this.rows.push([\n                    this.tdARV(data.arv_number || 'N/A'),\n                    table.td(data.given_name),\n                    table.td(data.family_name),\n                    table.td(this.formatGender(data.gender)),\n                    table.tdDate(data.birthdate),\n                    table.td(\n                       `District: <br/> <b>${data.district}</b><br/>\n                        Village: <br/> <b>${data.village}</b><br/>\n                        Land-mark: <br/> <b>${data.land_mark}</b><br/>\n                        Cellphone: <br/> <b>${data.cell_phone}</b>`\n                    ),\n                    table.tdBtn('Select', () => this.confirmPatient(data.person_id))\n                ])\n            })\n        }\n    }\n})\n","import { render } from \"./ClinicAppointments.vue?vue&type=template&id=5a34bf81&ts=true\"\nimport script from \"./ClinicAppointments.vue?vue&type=script&lang=ts\"\nexport * from \"./ClinicAppointments.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/daniel/local-repos/HIS-Core/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { ArtReportService } from \"./art_report_service\";\n\nexport const AGE_GROUPS = [\n    '<1 year',\n    '1-4 years', \n    '5-9 years', \n    '10-14 years', \n    '15-19 years', \n    '20-24 years', \n    '25-29 years', \n    '30-34 years', \n    '35-39 years', \n    '40-44 years', \n    '45-49 years', \n    '50-54 years',\n    '55-59 years',\n    '60-64 years',\n    '65-69 years',\n    '70-74 years',\n    '75-79 years',\n    '80-84 years',\n    '85-89 years',\n    '90 plus years'\n]\n\nexport class PatientReportService extends ArtReportService {\n    constructor() {\n        super()\n    }\n    \n    getBookedAppointments(date: string) {\n        return ArtReportService.getJson(`programs/${this.programID}/scheduled_appointments`, { date })\n    }\n\n    getViralLoadResults(range: string) {\n        return this.getReport(`/programs/${this.programID}/reports/high_vl_patients`, { range })\n    }\n\n    getOtherOutcome(outcome: string) {\n        return this.getReport('patient_outcome_list', { outcome })\n    }\n\n    getPatientVisitTypes() {\n        return this.getReport('patient_visit_types')\n    }\n\n    getClientsDueForVl() {\n        return this.getReport('clients_due_vl')\n    }\n\n    getClientRentention() {\n        return this.getReport(`/programs/${this.programID}/reports/retention`)\n    }\n\n    getExternalConsultationClients() {\n        return this.getReport(`${this.programID}/external_consultation_clients`)\n    }\n\n    getMissedAppointments() {\n        return this.getReport('missed_appointments')\n    }\n\n    getPregnantWomen() {\n        return this.getReport(`/programs/${this.programID}/reports/pregnant_patients`)\n    }\n\n    getArchivingCandidates() {\n        return ArtReportService.getJson(`programs/${this.programID}/reports/archiving_candidates`, { \n            'start_date': this.date\n        })\n    }\n\n    getIncompleteVisits() {\n        return this.getReport('incomplete_visits', {\n            \"tool_name\": \"INCOMPLETE VISITS\",\n        })\n    }\n}\n"],"sourceRoot":""}