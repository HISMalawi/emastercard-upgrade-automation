(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-610c8173"],{"29bc":function(e,t,a){"use strict";var n=a("be43"),r=a.n(n);r.a},"2cb4":function(e,t,a){},"445f":function(e,t,a){"use strict";var n=a("740b"),r=a.n(n);r.a},"498a":function(e,t,a){"use strict";var n=a("23e7"),r=a("58a8").trim,i=a("c8d2");n({target:"String",proto:!0,forced:i("trim")},{trim:function(){return r(this)}})},5319:function(e,t,a){"use strict";var n=a("d784"),r=a("825a"),i=a("7b0b"),s=a("50c4"),o=a("a691"),c=a("1d80"),u=a("8aa5"),l=a("14c3"),d=Math.max,m=Math.min,p=Math.floor,h=/\$([$&'`]|\d\d?|<[^>]*>)/g,v=/\$([$&'`]|\d\d?)/g,f=function(e){return void 0===e?e:String(e)};n("replace",2,(function(e,t,a,n){var g=n.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,b=n.REPLACE_KEEPS_$0,_=g?"$":"$0";return[function(a,n){var r=c(this),i=void 0==a?void 0:a[e];return void 0!==i?i.call(a,r,n):t.call(String(r),a,n)},function(e,n){if(!g&&b||"string"===typeof n&&-1===n.indexOf(_)){var i=a(t,e,this,n);if(i.done)return i.value}var c=r(e),p=String(this),h="function"===typeof n;h||(n=String(n));var v=c.global;if(v){var x=c.unicode;c.lastIndex=0}var w=[];while(1){var C=l(c,p);if(null===C)break;if(w.push(C),!v)break;var k=String(C[0]);""===k&&(c.lastIndex=u(p,s(c.lastIndex),x))}for(var O="",N=0,D=0;D<w.length;D++){C=w[D];for(var $=String(C[0]),P=d(m(o(C.index),p.length),0),R=[],j=1;j<C.length;j++)R.push(f(C[j]));var E=C.groups;if(h){var T=[$].concat(R,P,p);void 0!==E&&T.push(E);var S=String(n.apply(void 0,T))}else S=y($,p,P,R,E,n);P>=N&&(O+=p.slice(N,P)+S,N=P+$.length)}return O+p.slice(N)}];function y(e,a,n,r,s,o){var c=n+e.length,u=r.length,l=v;return void 0!==s&&(s=i(s),l=h),t.call(o,l,(function(t,i){var o;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return a.slice(0,n);case"'":return a.slice(c);case"<":o=s[i.slice(1,-1)];break;default:var l=+i;if(0===l)return t;if(l>u){var d=p(l/10);return 0===d?t:d<=u?void 0===r[d-1]?i.charAt(1):r[d-1]+i.charAt(1):t}o=r[l-1]}return void 0===o?"":o}))}}))},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,a){var n=a("1d80"),r=a("5899"),i="["+r+"]",s=RegExp("^"+i+i+"*"),o=RegExp(i+i+"*$"),c=function(e){return function(t){var a=String(n(t));return 1&e&&(a=a.replace(s,"")),2&e&&(a=a.replace(o,"")),a}};e.exports={start:c(1),end:c(2),trim:c(3)}},7181:function(e,t,a){},"740b":function(e,t,a){},"7c67":function(e,t,a){"use strict";a.r(t);var n,r,i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"d-flex",attrs:{id:"wrapper"}},[a("side-bar"),a("div",{attrs:{id:"page-content-wrapper"}},[a("top-nav"),a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("patient-information")],1),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){return e.$bvModal.show("encounter-modal")}}},[e._v("Add Visit")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){return e.$bvModal.show("outcome-modal")}}},[e._v("Update Outcome")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){return e.$bvModal.show("viral-load-modal")}}},[e._v("Viral Load")]),a("div",{staticClass:"row",staticStyle:{margin:"10px","margin-top":"5px"}},[a("visit-data")],1),a("encounter"),a("b-modal",{attrs:{id:"outcome-modal",title:"outcome",size:"xl"},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"})]},proxy:!0}])},[a("outcome")],1),a("b-modal",{attrs:{id:"viral-load-modal",title:"encounter",size:"xl"},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"})]},proxy:!0}])},[a("viral-load",{ref:"viral-load"})],1)],1)],1)],1)])},s=[],o=a("ebd8"),c=a("7c08"),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-fluid card",staticStyle:{"margin-top":"35px"}},[a("button",{staticClass:"btn btn-info",staticStyle:{"z-index":"1",position:"absolute",left:"47.5%",bottom:"99%","font-size":"13px"},on:{click:function(t){return e.voidEditRedict()}}},[e._v("Edit/Void")]),a("div",{staticClass:"container-fluid",staticStyle:{"margin-top":"8px"}},[a("table",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row"},[e._m(0),a("div",{staticClass:"col-md-6 information editable",attrs:{"data-toggle":"modal"},on:{click:function(t){return e.$bvModal.show("arv-number-modal")}}},[a("p",[e._v(e._s(e.arvNumber))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row",on:{click:function(t){return e.$bvModal.show("patient-info-modal")}}},[e._m(1),a("div",{staticClass:"col-md-6 information editable"},[a("p",[e._v(e._s(e.name))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row",on:{click:function(t){return e.$bvModal.show("patient-info-modal")}}},[e._m(2),a("div",{staticClass:"col-md-6 information editable"},[a("p",[e._v(e._s(e.age)+" ("+e._s(e.initialAge)+")")])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row",on:{click:function(t){return e.$bvModal.show("patient-info-modal")}}},[e._m(3),a("div",{staticClass:"col-md-6 information editable"},[a("p",[e._v(e._s(e.sex))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row"},[e._m(4),a("div",{staticClass:"col-md-6 information"},[a("p",[e._v(e._s(e.initialWeight))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row"},[e._m(5),a("div",{staticClass:"col-md-6 information"},[a("p",[e._v(e._s(e.initialHeight))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row"},[e._m(6),a("div",{staticClass:"col-md-6 information"},[a("p",[e._v(e._s(e.bmi))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row"},[e._m(7),a("div",{staticClass:"col-md-6 information"},[a("p",[e._v(e._s(e.ti))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row",on:{click:function(t){return e.$bvModal.show("patient-info-modal")}}},[e._m(8),a("div",{staticClass:"col-md-6 information editable"},[a("p",[e._v(e._s(e.landmark))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row",on:{click:function(t){return e.$bvModal.show("patient-info-modal")}}},[e._m(9),a("div",{staticClass:"col-md-6 information editable"},[a("p",[e._v(e._s(e.phoneNumber))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row",on:{click:function(t){return e.$bvModal.show("guardian-info-modal")}}},[e._m(10),e.guardianFirstName?a("div",{staticClass:"col-md-6 information editable"},[a("p",[e._v(e._s(e.guardianFirstName+" "+e.guardianLastName+" ("+e.guardianRelation+") ("+e.guardianNumber+")"))])]):e._e()])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row"},[e._m(11),a("div",{staticClass:"col-md-6 information"},[a("p",[e._v(e._s(e.dateOfHIVTest)+" "+e._s(e.placeOfHIVTest))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row"},[e._m(12),a("div",{staticClass:"col-md-6 information"},[a("p",[e._v(e._s(e.followUp))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row"},[e._m(13),a("div",{staticClass:"col-md-6 information"},[a("p",[e._v(e._s(e.parseStartDate))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row"},[e._m(14),a("div",{staticClass:"col-md-6 information"},[a("p",[e._v(e._s(e.startReason))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row"},[e._m(15),a("div",{staticClass:"col-md-6 information"},[a("p",[e._v(e._s(e.pregnant))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row"},[e._m(16),a("div",{staticClass:"col-md-6 information"},[a("p",[e._v(e._s(e.breastfeeding))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row"},[e._m(17),a("div",{staticClass:"col-md-6 information"},[a("p",[e._v(e._s(e.tbLastTwoYears))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row"},[e._m(18),a("div",{staticClass:"col-md-6 information"},[a("p",[e._v(e._s(e.whoStage))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("p",[e._v("Staging conditions")]),e._v(" "+e._s(e.stagingConditions.length>0?e.stagingConditions[0]:"")+" ")])])])])]),a("b-modal",{attrs:{id:"arv-number-modal",title:"Edit ARV number",size:"xl"},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"})]},proxy:!0}])},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("label",{attrs:{for:"exampleFormControlSelect1"}},[e._v(e._s(e.arvNumber)+" ->")]),e._v(" "),a("button",{staticClass:"btn btn-danger",on:{click:e.voidARVNumber}},[e._v("X")])]),a("div",{staticClass:"col"},[a("b-input-group",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{prepend:e.sitePrefix+"-ARV-"}},[a("b-input",{attrs:{id:"inline-form-input-username",type:"number"},model:{value:e.arv_num,callback:function(t){e.arv_num=t},expression:"arv_num"}})],1)],1),a("div",{staticClass:"col"},[a("button",{staticClass:"btn btn-primary",on:{click:e.saveARVNumber}},[e._v("Submit")])])])]),a("b-modal",{attrs:{id:"patient-info-modal",title:"patient detials",size:"xl"},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"})]},proxy:!0}])},[a("div",[a("b-form",[a("label",{attrs:{for:"text-name"}},[e._v("First Name")]),a("b-input",{attrs:{type:"text",id:"text-name"},model:{value:e.firstName,callback:function(t){e.firstName=t},expression:"firstName"}}),a("label",{attrs:{for:"text-last-name"}},[e._v("Last Name")]),a("b-input",{attrs:{type:"text",id:"text-last-name"},model:{value:e.lastName,callback:function(t){e.lastName=t},expression:"lastName"}}),a("label",{attrs:{for:"text-phone-number"}},[e._v("Phone Number")]),a("b-input-group",{staticClass:"mb-2"},[a("b-input-group-prepend",{attrs:{"is-text":""}},[a("b-form-checkbox",{attrs:{name:"check-button",switch:""},model:{value:e.phoneNumberUnknown,callback:function(t){e.phoneNumberUnknown=t},expression:"phoneNumberUnknown"}},[e._v("Unknown ")])],1),a("b-input",{attrs:{type:e.inputType,id:"text-phone-number",state:e.numberState,disabled:e.phoneNumberUnknown},model:{value:e.updatedPhoneNumber,callback:function(t){e.updatedPhoneNumber=t},expression:"updatedPhoneNumber"}})],1),a("label",{attrs:{for:"text-address"}},[e._v("Physical Address")]),a("b-input",{attrs:{type:"text",id:"text-address"},model:{value:e.updatedAddress,callback:function(t){e.updatedAddress=t},expression:"updatedAddress"}}),a("label",{attrs:{for:"input-sex"}},[e._v("Sex")]),a("b-form-select",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"inline-form-custom-select-pref",options:[{text:"Male",value:"M"},{text:"Female",value:"F"}]},model:{value:e.updatedSex,callback:function(t){e.updatedSex=t},expression:"updatedSex"}}),a("label",{attrs:{for:"example-datepicker"}},[e._v("Date of birth")]),a("b-form-datepicker",{staticClass:"mb-2",attrs:{id:"example-datepicker"},model:{value:e.updatedDOB,callback:function(t){e.updatedDOB=t},expression:"updatedDOB"}}),a("div",{staticClass:"row justify-content-center"},[a("b-button",{attrs:{variant:"primary"},on:{click:e.updateDetails}},[e._v("Save")])],1)],1)],1)]),a("b-modal",{attrs:{id:"guardian-info-modal",title:"guardian detials",size:"xl"},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"})]},proxy:!0}])},[a("div",[a("b-form",[a("label",{attrs:{for:"text-name"}},[e._v("First Name")]),a("b-input",{attrs:{type:"text",id:"text-name"},model:{value:e.updatedguardianFirstName,callback:function(t){e.updatedguardianFirstName=t},expression:"updatedguardianFirstName"}}),a("label",{attrs:{for:"text-last-name"}},[e._v("Last Name")]),a("b-input",{attrs:{type:"text",id:"text-last-name"},model:{value:e.updatedguardianLastName,callback:function(t){e.updatedguardianLastName=t},expression:"updatedguardianLastName"}}),a("label",{attrs:{for:"text-phone-number"}},[e._v("Phone Number")]),a("b-input-group",{staticClass:"mb-2"},[a("b-input-group-prepend",{attrs:{"is-text":""}},[a("b-form-checkbox",{attrs:{name:"guardian-check",switch:""},model:{value:e.guardianphoneNumberUnknown,callback:function(t){e.guardianphoneNumberUnknown=t},expression:"guardianphoneNumberUnknown"}},[e._v("Unknown ")])],1),a("b-input",{attrs:{type:e.guardianinputType,id:"guardian-phone-number",state:e.guardianNumberState,disabled:e.guardianphoneNumberUnknown},model:{value:e.updatedguardianNumber,callback:function(t){e.updatedguardianNumber=t},expression:"updatedguardianNumber"}})],1),a("div",{staticClass:"row justify-content-center"},[a("b-button",{attrs:{variant:"primary"},on:{click:e.updateGuardianDetails}},[e._v("Save")])],1)],1)],1)])],1)},l=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-md-6"},[a("p",[e._v("ARV #")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-md-6"},[a("p",[e._v("Name")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-md-6"},[a("p",[e._v("DOB and Age at initiation")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-md-6"},[a("p",[e._v("Sex")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-md-6"},[a("p",[e._v("Initial Weight")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-md-6"},[a("p",[e._v("Initial Height")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-md-6"},[a("p",[e._v("BMI")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-md-6"},[a("p",[e._v("TI")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-md-6"},[a("p",[e._v("Physical Address")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-md-6"},[a("p",[e._v("Phone Number")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-md-6"},[a("p",[e._v("Name of Guardian")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-md-6"},[a("p",[e._v("Date and Place of HIV Test")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-md-6"},[a("p",[e._v("Agrees to follow up")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-md-6"},[a("p",[e._v("Date of starting first line ARV Regimen")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-md-6"},[a("p",[e._v("Reason for Starting ART")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-md-6"},[a("p",[e._v("Pregnant at initiation")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-md-6"},[a("p",[e._v("Breastfeeding at initiation")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-md-6"},[a("p",[e._v("TB Status at initiation")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-md-6"},[a("p",[e._v("WHO Stage")])])}],d=(a("99af"),a("4de4"),a("4160"),a("b0c0"),a("b64b"),a("ac1f"),a("466d"),a("159b"),a("ade3")),m=(a("96cf"),a("1da1")),p=a("8051"),h=a("24ca"),v=a("7833"),f=(n={1:"id",836:"Herpes zoster",1210:"Parotid enlargement, persistent unexplained",2575:"Angular cheilitis",2576:"Oral ulcerations, recurrent",2891:"Lineal gingival erythema",5012:"Respiratory tract infections, recurrent (sinusitis, tonsilitus, otitis media, pharyngitis)",5327:"Asymptomatic HIV infection",5328:"Persistent generalized lymphadenopathy",6775:"Wart virus infection, extensive",6776:"Molluscum contagiosum, extensive",7536:"Papular pruritic eruptions / Fungal nail infections",7537:"Hepatosplenomegaly, persistent unexplained"},Object(d["a"])(n,"836","Herpes zoster"),Object(d["a"])(n,"1215","Bacterial pneumonia, severe recurrent"),Object(d["a"])(n,"2575","Angular cheilitis"),Object(d["a"])(n,"2576","Oral ulcerations, recurrent"),Object(d["a"])(n,"2578","Seborrhoeic dermatitis"),Object(d["a"])(n,"2582","Anaemia, unexplained < 8 g/dl"),Object(d["a"])(n,"2889","Chronic HIV-associated lung disease, including bronchiectasis"),Object(d["a"])(n,"5012","Respiratory tract infections, recurrent (sinusitis, tonsilitus, otitis media, pharyngitis)"),Object(d["a"])(n,"5024","Symptomatic lymphoid interstitial pneumonia"),Object(d["a"])(n,"5027","Fever, persistent unexplained, intermittent or constant, >1 month"),Object(d["a"])(n,"5332","Moderate weight loss less than or equal to 10 percent, unexplained"),Object(d["a"])(n,"5337","Oral hairy leukoplakia"),Object(d["a"])(n,"7038","Unspecified stage 2 condition"),Object(d["a"])(n,"7536","Papular pruritic eruptions / Fungal nail infections"),Object(d["a"])(n,"7539","Tuberculosis (PTB or EPTB) within the last 2 years"),Object(d["a"])(n,"7543","Moderate unexplained wasting/malnutrition not responding to treatment (weight-for-height/ -age 70-79% or muac 11-12 cm)"),Object(d["a"])(n,"7544","Diarrhoea, persistent unexplained (14 days or more)"),Object(d["a"])(n,"7545","Oral candidiasis (from age 2 months)"),Object(d["a"])(n,"7546","Acute necrotizing ulcerative gingivitis or periodontitis"),Object(d["a"])(n,"7547","Lymph node tuberculosis"),Object(d["a"])(n,"7954","Neutropaenia, unexplained < 500 /mm(cubed)"),Object(d["a"])(n,"7955","Thrombocytopaenia, chronic < 50,000 /mm(cubed)"),Object(d["a"])(n,"8206","Pulmonary tuberculosis (current)"),Object(d["a"])(n,"507","Kaposis sarcoma"),Object(d["a"])(n,"882","Pneumocystis pneumonia"),Object(d["a"])(n,"1362","HIV encephalopathy"),Object(d["a"])(n,"1547","Extrapulmonary tuberculosis (EPTB)"),Object(d["a"])(n,"2582","Anaemia, unexplained < 8 g/dl"),Object(d["a"])(n,"2585","Disseminated non-tuberculosis mycobacterial infection"),Object(d["a"])(n,"2587","Cerebral or B-cell non Hodgkin lymphoma"),Object(d["a"])(n,"2894","Bacterial infections, severe recurrent  (empyema, pyomyositis, meningitis, bone/joint infections but EXCLUDING pneumonia)"),Object(d["a"])(n,"3068","Severe unexplained wasting or malnutrition not responding to treatment (weight-for-height/ -age <70% or MUAC less than 11cm or oedema)"),Object(d["a"])(n,"5018","Diarrhoea, chronic (>1 month) unexplained"),Object(d["a"])(n,"5027","Fever, persistent unexplained, intermittent or constant, >1 month"),Object(d["a"])(n,"5046","Progressive multifocal leukoencephalopathy"),Object(d["a"])(n,"5048","Toxoplasmosis of the brain (from age 1 month)"),Object(d["a"])(n,"5334","Oral candidiasis"),Object(d["a"])(n,"5337","Oral hairy leukoplakia"),Object(d["a"])(n,"5340","Candidiasis of oseophagus, trachea and bronchi or lungs"),Object(d["a"])(n,"6408","Other"),Object(d["a"])(n,"7039","Unspecified stage 3 condition"),Object(d["a"])(n,"7539","Tuberculosis (PTB or EPTB) within the last 2 years"),Object(d["a"])(n,"7540","Severe weight loss >10% and/or BMI <18.5kg/m^2, unexplained"),Object(d["a"])(n,"7541","Severe bacterial infections (pneumonia, empyema, pyomyositis, bone/joint, meningitis, bacteraemia)"),Object(d["a"])(n,"7548","Cryptococcal meningitis or other extrapulmonary cryptococcosis"),Object(d["a"])(n,"7549","Cryptosporidiosis, chronic with diarroea"),Object(d["a"])(n,"7550","Disseminated mycosis (coccidiomycosis or histoplasmosis)"),Object(d["a"])(n,"7552","Cytomegalovirus infection: rentinitis or other organ (from age 1 month)"),Object(d["a"])(n,"7954","Neutropaenia, unexplained < 500 /mm(cubed)"),Object(d["a"])(n,"7955","Thrombocytopaenia, chronic < 50,000 /mm(cubed)"),Object(d["a"])(n,"7956","Isosporiasis >1 month"),Object(d["a"])(n,"7957","Symptomatic HIV-associated nephropathy or cardiomyopathy"),Object(d["a"])(n,"7960","Chronic herpes simplex infection (orolabial or cutaneous >1 month or visceral at any site)"),Object(d["a"])(n,"7961","Recto-vaginal fistula, HIV-associated"),Object(d["a"])(n,"8205","Hepatitis B or C infection"),Object(d["a"])(n,"8206","Pulmonary tuberculosis (current)"),Object(d["a"])(n,"507","Kaposis sarcoma"),Object(d["a"])(n,"882","Pneumocystis pneumonia"),Object(d["a"])(n,"1215","Bacterial pneumonia, severe recurrent"),Object(d["a"])(n,"1547","Extrapulmonary tuberculosis (EPTB)"),Object(d["a"])(n,"2583","Toxoplasmosis of the brain"),Object(d["a"])(n,"2587","Cerebral or B-cell non Hodgkin lymphoma"),Object(d["a"])(n,"2588","Invasive cancer of cervix"),Object(d["a"])(n,"5340","Candidiasis of oseophagus, trachea and bronchi or lungs"),Object(d["a"])(n,"5344","Chronic herpes simplex infection (orolabial, gential / anorectal >1 month or visceral at any site)"),Object(d["a"])(n,"6408","Other"),Object(d["a"])(n,"7040","Unspecified stage 4 condition"),Object(d["a"])(n,"7548","Cryptococcal meningitis or other extrapulmonary cryptococcosis"),Object(d["a"])(n,"7551","Cytomegalovirus infection (retinitis or infection or other organs)"),Object(d["a"])(n,"7957","Symptomatic HIV-associated nephropathy or cardiomyopathy"),Object(d["a"])(n,"7959","Non-typhoidal Salmonella bacteraemia, recurrent"),n),g=a("c1df"),b=a.n(g),_=/^(\+?265|0)(((88|9[89])\d{7})|(1\d{6})|(2\d{8})|(31\d{8}))$/,y=(r={data:function(){return{arvNumber:null,arv_num:null,name:null,firstName:null,lastName:null,age:null,sex:null,updatedDOB:null,updatedSex:null,dob:null,initialWeight:null,initialHeight:null,updatedAddress:null,pregnant:null,breastfeeding:null,bmi:null,ti:null,location:null,landmark:null,occupation:null,nameOfGuardian:null,dateOfHIVTest:null,placeOfHIVTest:null,whoStage:null,followUp:null,startDate:null,startReason:null,EPTB:null,PTB:null,kaposisSarcoma:null,tbLastTwoYears:null,patientID:null,sitePrefix:null,showARVNumber:!1,phoneNumber:null,updatedPhoneNumber:null,guardianID:null,guardianFirstName:null,guardianLastName:null,guardianRelation:null,guardianNumber:null,updatedguardianFirstName:null,updatedguardianLastName:null,updatedguardianRelation:null,updatedguardianNumber:null,phoneNumberUnknown:!1,guardianphoneNumberUnknown:!1,stagingConditions:[],obs:[{conceptID:2552},{conceptID:5089,variableName:"initialWeight",valueType:"value_numeric",secondType:"value_text"},{conceptID:5090,variableName:"initialHeight",valueType:"value_numeric",secondType:"value_text"},{conceptID:2137,variableName:"bmi",valueType:"value_numeric",secondType:"value_text"},{conceptID:7881,variableName:"placeOfHIVTest",valueType:"value_text"},{conceptID:7882,variableName:"dateOfHIVTest",valueType:"value_datetime",secondType:"value_text"},{conceptID:7754,variableName:"ti",valueType:"value_coded",secondType:"value_text",returnValue:"Yes",default:"No",params:"value_coded=1065",backupConcept:{conceptID:7751,variableName:"ti",valueType:"value_datetime",secondType:"value_text",returnValue:"Yes",default:"No"}},{conceptID:6131,variableName:"pregnant",valueType:"value_coded",secondType:"value_text",returnValue:"Yes",default:"No",params:"value_coded=1065"},{conceptID:7965,variableName:"breastfeeding",valueType:"value_coded",secondType:"value_text",returnValue:"Yes",default:"No",params:"value_coded=1065"},{conceptID:2552,variableName:"followUp",valueType:"value_coded",secondType:"value_text",returnValue:"Yes",default:"No",params:"value_coded=1065",backupConcept:{conceptID:9685,variableName:"followUp",valueType:"value_datetime",secondType:"value_text",returnValue:"Yes",default:"No",backupConcept:{conceptID:9686,variableName:"followUp",valueType:"value_datetime",secondType:"value_text",returnValue:"Yes",default:"No"}}},{conceptID:7459,variableName:"tbLastTwoYears",valueType:"value_coded",secondType:"value_text",conceptNames:{7454:"TB NOT suspected",7455:"TB suspected",7456:"Confirmed TB NOT on treatment",7458:"Confirmed TB on treatment"}},{conceptID:7563,variableName:"startReason",valueType:"value_coded",secondType:"value_text"},{conceptID:7562,variableName:"whoStage",valueType:"value_text",secondType:"value_coded"},{conceptID:2743,subConcepts:[]}],initialObs:[]}},computed:{},methods:{voidEditRedict:function(){this.setPersonObject(),this.redirect("/registration/".concat(this.patientID,"/false"))},setPersonObject:function(){var e={name:this.name,dob:"",age:"",arvNumber:this.arvNumber,sex:this.sex};this.$store.commit("setPatient",e)},getPatient:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p["a"].get("/patients/".concat(this.patientID));case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getGuardian:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p["a"].get("/people/".concat(this.patientID,"/relationships")).then((function(e){e.json().then((function(e){if(e.length>0){t.guardianID=e[0].person_b;var a=e[0]["relation"]["names"][0],n=e[0]["type"]["b_is_to_a"];t.guardianFirstName=a["given_name"],t.guardianLastName=a["family_name"],t.guardianRelation=n,t.updatedguardianFirstName=a["given_name"],t.updatedguardianLastName=a["family_name"],t.updatedguardianRelation=n,t.guardianNumber=t.getAtribute(e[0].relation.person_attributes,12),t.updatedguardianNumber=t.getAtribute(e[0].relation.person_attributes,12),"Unknown"===t.guardianphoneNumber&&(t.guardianphoneNumberUnknown=!0),t.nameOfGuardian=a["given_name"]+" "+a["family_name"]+" ("+n+")"}}))}));case 2:e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getObs:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,a){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="/observations?person_id=".concat(this.patientID,"&&concept_id=").concat(t.conceptID),n=t.params?n+"&&"+t.params:n,n=a?n+"&&obs_datetime="+a:n,e.next=5,p["a"].get(n);case 5:return r=e.sent,e.next=8,r.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}(),getConcept:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,a,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p["a"].get("/concepts/".concat(a)).then((function(e){e.json().then((function(e){n[t.variableName]=e.concept_names[0].name}))}));case 2:case"end":return e.stop()}}),e)})));function t(t,a,n){return e.apply(this,arguments)}return t}(),createOb:function(e,t,a){var n=this;this.$store.state.currentHeight=null,this.getObs(e).then((function(a){if(a.length>0){if(e.returnValue)t[e.variableName]=e.returnValue;else if(e.subConcepts)t.stagingConditions=[],a.forEach((function(e){t.stagingConditions.push(f[e.value_coded])}));else{var r=a[a.length-1][e.valueType]?a[a.length-1][e.valueType]:a[a.length-1][e.secondType];if(t[e.variableName]="value_datetime"===e.valueType&&!1!==e.format?b()(r).format("DD-MMM-YYYY"):r,"value_coded"===e.valueType&&(e.conceptNames?t[e.variableName]=e.conceptNames[r]:n.getConcept(e,r,t)),5089===e.conceptID){var i=a[0][e.valueType]?a[0][e.valueType]:a[0][e.secondType];h["a"].$emit("set-initial-weight",i),n.$store.commit("setWeight",i)}if(5090===e.conceptID){var s=a[0][e.valueType]?a[0][e.valueType]:a[0][e.secondType];h["a"].$emit("set-previous-height",s),n.$store.commit("setHeight",s)}}2552===e.conceptID&&n.$store.commit("setInitialRegistration",a[a.length-1]),5089===e.conceptID&&n.$store.commit("setInitialVitals",a[a.length-1]),7563===e.conceptID&&n.$store.commit("setInitialStaging",a[a.length-1])}else e.backupConcept&&n.createOb(e.backupConcept,t),e.default?t[e.variableName]=e.default:t[e.variableName]="N/A"}))},obsService:function(e){switch(key){case value:break;default:break}},getAtribute:function(e,t){var a=e.filter((function(e){return e.person_attribute_type_id==t}));return a.length>0?a[0].value:""},getPrefix:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,v["a"].getSitePrefix();case 2:this.sitePrefix=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),saveARVNumber:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="".concat(this.sitePrefix,"-ARV-").concat(this.arv_num),a={identifier:t,identifier_type:4,patient_id:this.$route.params.id},e.next=4,p["a"].post("/patient_identifiers/",a);case 4:n=e.sent,201===n.status||200===n.status?(this.showMessage("ARV number updated"),this.arvNumber=t,this.$root.$emit("bv::hide::modal","arv-number-modal","#btnShow")):400===n.status&&this.showMessage("ARV number already in use");case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),voidARVNumber:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p["a"].post("/programs/1/void_arv_number/".concat(this.arvNumber));case 2:t=e.sent,201===t.status||200===t.status?(this.showMessage("ARV number voided"),this.arvNumber="N/A",this.$root.$emit("bv::hide::modal","arv-number-modal","#btnShow")):400===t.status&&this.showMessage("ARV number already in use");case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),showMessage:function(e){this.$toasted.show(e,{theme:"toasted-primary",position:"top-right",duration:5e3})},updateDetails:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,a,n,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t={},a=[],"".concat(this.firstName," ").concat(this.lastName)!==this.name&&(t.given_name=this.firstName,t.family_name=this.lastName),this.updatedDOB!==this.dob&&(t.birthdate=this.updatedDOB,t.birthdate_estimated=0),this.updatedSex!==this.sex&&(t.gender=this.updatedSex),this.updatedPhoneNumber!==this.phoneNumber&&(this.numberState||a.push("fix phone number"),this.phoneNumberUnknown&&(t.cell_phone_number="Unknown"),t.cell_phone_number=this.updatedPhoneNumber),this.updatedAddress!==this.landmark&&(t.landmark=this.updatedAddress),!(Object.keys(t).length>0&&0===a.length)){e.next=14;break}return e.next=10,p["a"].put("/people/".concat(this.$route.params.id),t);case 10:n=e.sent,201===n.status||200===n.status?(this.showMessage("Successfully saved"),"".concat(this.firstName," ").concat(this.lastName)!==this.name&&(this.name="".concat(this.firstName," ").concat(this.lastName)),this.updatedDOB!==this.dob&&(this.dob=this.updatedDOB,this.age=" ".concat(b()(this.dob).format("DD-MMM-YYYY"))),this.updatedSex!==this.sex&&(this.sex=this.updatedSex),this.updatedPhoneNumber!==this.phoneNumber&&(this.phoneNumber=this.updatedPhoneNumber),this.updatedAddress!==this.landmark&&(this.landmark=this.updatedAddress),this.$root.$emit("bv::hide::modal","patient-info-modal","#btnShow")):console.log("Failed to update"),e.next=15;break;case 14:a.forEach((function(e){r.showMessage(e)}));case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getBaseGuardian:function(){return{given_name:"",middle_name:"",family_name:"",gender:"N/A",birthdate:b()(new Date("1970-01-01")).format("YYYY-MM-DD"),birthdate_estimated:"N/A",home_district:"N/A",home_traditional_authority:"N/A",home_village:"N/A",current_district:"N/A",current_traditional_authority:"N/A",current_village:"N/A",landmark:"N/A",cell_phone_number:"",occupation:null,relationship:"N/A",patient_type:"",facility_name:null}},updateGuardianDetails:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,a,n,r,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t={},a=[],this.guardianFirstName!==this.updatedguardianFirstName&&(t.given_name=this.updatedguardianFirstName),this.guardianLastName!==this.updatedguardianLastName&&(t.family_name=this.updatedguardianLastName),this.updatedguardianNumber!==this.guardianNumber&&(this.guardianNumberState||a.push("fix phone number"),this.guardianphoneNumberUnknown&&(t.cell_phone_number="Unknown"),t.cell_phone_number=this.updatedguardianNumber),!(Object.keys(t).length>0)){e.next=23;break}if(this.guardianID){e.next=17;break}return r=this.getBaseGuardian(),r.given_name=t.given_name,r.family_name=t.family_name,r.cell_phone_number=t.cell_phone_number,e.next=13,p["a"].post("/people",r);case 13:n=e.sent,201===n.status||200===n.status?n.json().then((function(e){var t={relationship_type_id:13,relation_id:e.person_id};p["a"].post("/people/".concat(i.patientID,"/relationships"),t).then((function(e){i.closeGuardianModal()}))})):console.log("Failed to update"),e.next=21;break;case 17:return e.next=19,p["a"].put("/people/".concat(this.guardianID),t);case 19:n=e.sent,201===n.status||200===n.status?this.closeGuardianModal():console.log("Failed to update");case 21:e.next=24;break;case 23:this.$root.$emit("bv::hide::modal","guardian-info-modal","#btnShow");case 24:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),closeGuardianModal:function(){this.showMessage("Successfully saved"),this.guardianFirstName!==this.updatedguardianFirstName&&(this.guardianFirstName=this.updatedguardianFirstName),this.guardianLastName!==this.updatedguardianLastName&&(this.guardianLastName=this.updatedguardianLastName),this.updatedguardianNumber!==this.guardianNumber&&(this.guardianNumber=this.updatedguardianNumber),this.$root.$emit("bv::hide::modal","guardian-info-modal","#btnShow")},redirect:function(e){this.$router.push(e)},parseObs:function(e){var t=this;this.obs.forEach((function(a){t.createOb(a,t,e)}))},getStartDate:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$store.state.currentHeight=null,t={conceptID:2516,variableName:"startDate",valueType:"value_datetime",secondType:"value_text",format:!1},this.getObs(t).then((function(e){e.length>0?(a[t.variableName]=e[e.length-1][t.valueType]?e[e.length-1][t.valueType]:e[e.length-1][t.secondType],a.parseObs(a[t.variableName])):a.retrieveStarDate().then((function(e){e.length>0?(a[t.variableName]=e[e.length-1].order.start_date,a.parseObs(a[t.variableName])):(a[t.variableName]="N/A",a.parseObs(null))}))}));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),retrieveStarDate:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="/patients/".concat(this.$route.params.id,"/drugs_orders_by_program?program_id=1"),e.next=3,p["a"].get(t);case 3:return a=e.sent,e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),clearStore:function(){this.$store.commit("setInitialRegistration",{}),this.$store.commit("setInitialVitals",{}),this.$store.commit("setInitialStaging",{})}},mounted:function(){var e=this;this.getPrefix(),this.clearStore(),this.patientID=this.$route.params.id,this.getPatient().then((function(t){e.name="".concat(t["person"].names[0].given_name," ").concat(t.person.names[0].family_name),e.firstName=t["person"].names[0].given_name,e.lastName=t["person"].names[0].family_name,e.dob=t.person.birthdate,e.updatedDOB=t.person.birthdate,e.age=" ".concat(b()(t.person.birthdate).format("DD-MMM-YYYY"));var a=t.patient_identifiers.filter((function(e){return"ARV Number"===e.type.name}));e.arvNumber=a.length>0?a[0].identifier:"N/A",e.sex=t.person.gender,e.updatedSex=t.person.gender,e.location=t.person.addresses.length>0?t.person.addresses[0].city_village:"",e.landmark=e.getAtribute(t.person.person_attributes,19),e.updatedAddress=e.getAtribute(t.person.person_attributes,19),e.occupation=e.getAtribute(t.person.person_attributes,13),e.phoneNumber=e.getAtribute(t.person.person_attributes,12),e.updatedPhoneNumber=e.getAtribute(t.person.person_attributes,12),"Unknown"===e.phoneNumber&&(e.phoneNumberUnknown=!0);var n={name:e.name,dob:t.person.birthdate,age:b()().diff(t.person.birthdate,"years",!1),arvNumber:e.arvNumber,sex:e.sex};e.$store.commit("setPatient",n)})),this.getGuardian(),this.getStartDate(),h["a"].$on("reload-first-visits",(function(t){e.getStartDate()}))}},Object(d["a"])(r,"computed",{initialAge:function(){var e="N/A";return"N/A"!==this.startDate&&(e=b()(this.startDate).diff(this.dob,"years",!1)),e},parseStartDate:function(){var e=null;return e="N/A"!==this.startDate&&null!==this.startDate?b()(this.startDate).format("DD-MMM-YYYY"):"N/A",e},numberState:function(){var e=!0;return this.phoneNumberUnknown||(e=null!=="".concat(this.updatedPhoneNumber).match(_)),e},inputType:function(){var e="number";return this.phoneNumberUnknown?(e="text",this.updatedPhoneNumber="Unknown"):"Unknown"===this.phoneNumber?this.updatedPhoneNumber=null:this.updatedPhoneNumber=this.phoneNumber,e},guardianNumberState:function(){var e=!0;return this.guardianphoneNumberUnknown||(e=null!=="".concat(this.updatedguardianNumber).match(_)),e},guardianinputType:function(){var e="number";return this.guardianphoneNumberUnknown?(e="text",this.updatedguardianNumber="Unknown"):"Unknown"===this.guardianphoneNumber?this.updatedguardianNumber=null:this.updatedguardianNumber=this.guardianNumber,e}}),Object(d["a"])(r,"watch",{startDate:{handler:function(e){h["a"].$emit("set-start-date",this.startDate)},deep:!0}}),r),x=y,w=(a("445f"),a("2877")),C=Object(w["a"])(x,u,l,!1,null,"6c5838c8",null),k=C.exports,O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"100%"}},[a("table",{staticClass:"table table-dark"},[e._m(0),a("tbody",e._l(e.patientVisits,(function(t,n){return a("tr",{key:n},[a("td",[e._v(e._s(e.moment(t.visitDate).format("DD-MMM-YYYY"))+" ("+e._s(Math.round(e.moment(t.visitDate).diff(e.moment(e.startDate),"months",!0)))+"M)")]),a("td",[e._v(e._s(t.givenTo))]),a("td",[e._v(e._s(t.weight))]),a("td",[e._v(e._s(t.height))]),a("td",[e._v(e._s(t.pregnant))]),a("td",[e._v(e._s(t.breastfeeding))]),a("td",[e._v(e._s(t.tbStatus))]),a("td",[e._v(e._s(t.sideEffects))]),a("td",[a("button",{staticClass:"btn btn-primary",staticStyle:{width:"100%"},on:{click:function(a){return e.loadVisitDrugs(t)}}},[e._v(" "+e._s(t.ARTRegimen)+" ("+e._s(t.dispensed)+") ")])]),a("td",[e._v(e._s(t.nextAppointment))]),a("td",[e._v(e._s(t.outcome))]),a("td",[e._v(e._s(t.viralLoad))]),a("td",[a("click-confirm",{attrs:{disabled:0===t.encounters.length}},[a("button",{staticClass:"btn btn-danger",attrs:{disabled:0===t.encounters.length},on:{click:function(a){return e.deleteVisit(n,t.encounters)}}},["deleting"===t.state?[a("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}),a("span",{staticClass:"sr-only"},[e._v("Loading...")])]:[a("span",[e._v("X")])]],2)])],1)])})),0)]),a("b-modal",{attrs:{id:"visit-drugs",title:"Drugs dispensed on "+e.moment(e.selectedVisit.visitDate).format("DD/MMM/YYYY"),size:"xl"}},[e.isLoadingDrugs?a("center",[e._v(" Please wait...")]):e._e(),e.isLoadingDrugs?e._e():a("table",{staticClass:"table"},[a("tr",[a("th",[e._v("Drug")]),a("th",[e._v("Quantity")]),a("th",[e._v("Units")])]),e._l(e.visitDrugs,(function(t,n){return a("tr",{key:n},[a("td",[e._v(" "+e._s(t.drug.name)+" ")]),a("td",[e._v(" "+e._s(t.quantity))]),a("td",[e._v(" "+e._s(t.units))])])}))],2)],1)],1)},N=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",[e._v("Visit Date")]),a("th",[e._v("Given To")]),a("th",[e._v("Weight")]),a("th",[e._v("Height")]),a("th",[e._v("Preg")]),a("th",[e._v("B/F")]),a("th",[e._v("TB status")]),a("th",[e._v("Side Effects")]),a("th",[e._v("ART Regimen")]),a("th",[e._v("Next Appointment")]),a("th",[e._v("Outcome")]),a("th",[e._v("Viral Load")])])])}];a("a4d3"),a("a434"),a("e439"),a("dbb4"),a("5319");function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function $(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){Object(d["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var P={data:function(){return{isLoadingDrugs:!1,selectedVisit:"",patientVisits:[],startDate:null,visitDrugs:[],mockOBJ:{visitDate:null,givenTo:null,weight:null,height:null,sideEffects:null,ARTRegimen:null,nextAppointment:null,viralLoad:null,outcoume:null,encounters:[],state:null,tbStatus:null,pregnant:null,breastfeeding:null,dispensed:null,adherence:null},encountersToDelete:[],obs:[{conceptID:5089,variableName:"weight",valueType:"value_numeric",secondType:"value_text"},{conceptID:5090,variableName:"height",valueType:"value_numeric",secondType:"value_text"},{conceptID:5096,variableName:"nextAppointment",valueType:"value_datetime",secondType:"value_text"},{conceptID:7459,variableName:"tbStatus",valueType:"value_coded",secondType:"value_text",conceptNames:{7454:"TB NOT suspected",7455:"TB suspected",7456:"Confirmed TB NOT on treatment",7458:"Confirmed TB on treatment"}},{conceptID:856,variableName:"viralLoad",valueType:"value_numeric",secondType:"value_text",prepend:"value_text"},{conceptID:2540,variableName:"adherence",valueType:"value_numeric",secondType:"value_text"}]}},methods:{getVisits:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p["a"].get("/patients/".concat(this.$route.params.id,"/visits?program_id=1&include_defaulter_dates=true")).then((function(e){e.json().then((function(e){t.setVisits(e)}))}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),loadVisitDrugs:function(e){var t=this;this.isLoadingDrugs=!0,this.selectedVisit=e,this.$bvModal.show("visit-drugs"),p["a"].get("/drug_orders?patient_id=".concat(this.$route.params.id,"&program_id=1&start_date=").concat(this.selectedVisit.visitDate)).then((function(e){return e.json().then((function(e){t.isLoadingDrugs=!1,t.visitDrugs=e}))})).catch((function(e){alert(e),t.isLoadingDrugs=!1}))},deleteVisit:function(e,t){var a=this,n=t.length;this.patientVisits[e].state="deleting",t.forEach((function(t){a.removeEncounter(t).then((function(t){204==t.status?(n-=1,0===n&&(a.patientVisits.splice(e,1),h["a"].$emit("reload-first-visits",""))):console.log("not deleted")}))}))},getLastOrder:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=this.$route.params.id,e.next=3,p["a"].get("/programs/1/patients/".concat(a,"/last_drugs_received?date=")+t);case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),removeEncounter:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p["a"].remove("encounters/"+t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),setVisits:function(e){var t=this,a=[];e.forEach((function(e){a.push({visitDate:e,encounters:t})})),this.createOb(a)},getObs:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,a){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="/observations?person_id=".concat(this.$route.params.id,"&&concept_id=").concat(t.conceptID,"&&obs_datetime=").concat(a.visitDate),n=t.params?n+"&&"+t.params:n,e.next=4,p["a"].get(n);case 4:return r=e.sent,e.next=7,r.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}(),getEncounters:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="/encounters?patient_id=".concat(this.$route.params.id,"&&date=").concat(t),e.next=3,p["a"].get(a);case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getCurrentPatientInfo:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="programs/1/patients/".concat(this.$route.params.id,"/visit?date=").concat(t.visitDate),e.next=3,p["a"].get(a);case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getNextAppointMent:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="programs/1/patients/".concat(this.$route.params.id,"/next_appointment_date"),e.next=3,p["a"].get(t);case 3:return a=e.sent,e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getConcept:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p["a"].get("/concepts/".concat(t));case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),createOb:function(e){var t=this;e.forEach((function(e){var a=$({},t.mockOBJ);a.visitDate=e.visitDate,t.obs.forEach((function(n){t.getObs(n,e).then((function(r){if(r.length>0)if(n.returnValue)e.variableName=n.returnValue;else if(n.subConcepts)r.forEach((function(t){try{e.subConcepts[t.value_coded].variableName=e.subConcepts[t.value_coded].returnValue}catch(a){}}));else{var i=r[r.length-1][n.valueType]?r[r.length-1][n.valueType]:r[r.length-1][n.secondType];a[n.variableName]="value_datetime"===n.valueType?b()(i).format("DD-MMM-YYYY"):i,"value_coded"===n.valueType&&(n.conceptNames?a[n.variableName]=n.conceptNames[i]:t.getConcept(i).then((function(e){a[n.variableName]=e.concept_names[0].name}))),n.prepend&&(a[n.variableName]=856===n.conceptID&&1===i?"LDL":r[r.length-1][n.prepend]+" "+i)}else n.backupConcept,n.default?e.variableName=n.default:e[n.variableName]="N/A"}))})),t.getCurrentPatientInfo(e).then((function(t){e.ARTRegimen=t.regimen,e.outcome=t.outcome,a.ARTRegimen=t.regimen,a.outcome=t.outcome,t.visit_by=t.visit_by.replace(/Unk/gi,""),e.givenTo=t.visit_by,a.givenTo=t.visit_by,a.viralLoad=t.viral_load,t.pills_dispensed.length>0&&(e.dispensed=t.pills_dispensed[0][1],a.dispensed=t.pills_dispensed[0][1])})),t.getObs({conceptID:7755},e).then((function(t){var n=t.filter((function(e,a){return 1065==t[a].children[0].value_coded})).length;n=0===n?"No":"Yes",e.sideEffects=n,a.sideEffects=n})),t.getObs({conceptID:6131,params:"value_coded=1065"},e).then((function(t){t.length>0?(e.pregnant="Yes",a.pregnant="Yes"):(e.pregnant="",a.pregnant="")})),t.getObs({conceptID:7965,params:"value_coded=1065"},e).then((function(t){t.length>0?(e.breastfeeding="Yes",a.breastfeeding="Yes"):(a.breastfeeding="",e.breastfeeding="")})),t.getEncounters(e.visitDate).then((function(e){var t=[];e.forEach((function(e){t.push(e.encounter_id)})),a.encounters=[].concat(t)})),t.patientVisits.push(a)}))},returnConcept:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){var e=this;this.getVisits(),h["a"].$on("reload-visits",(function(t){e.patientVisits=[],e.encountersToDelete=[],e.getVisits()})),h["a"].$on("set-start-date",(function(t){e.startDate=t}))}},R=P,j=(a("f3ad"),Object(w["a"])(R,O,N,!1,null,"89871b68",null)),E=j.exports,T=a("8740"),S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-modal",{attrs:{id:"encounter-modal",title:"encounter",size:"xl","no-close-on-backdrop":""},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("button",{staticClass:"btn btn-primary",on:{click:e.createEncounters}},[!0===e.posting?[a("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}),a("span",{staticClass:"sr-only"},[e._v("Loading...")])]:[a("span",[e._v("Save")])]],2)]},proxy:!0},{key:"modal-header",fn:function(t){var n=t.close;return[a("b-col",[a("p",[e._v(" New visit ")])]),a("b-col",{attrs:{cols:"9"}},[a("b-form-datepicker",{staticClass:"mb-2",attrs:{id:"encounter-datepicker"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1),a("b-col",{attrs:{cols:"1"}},[a("b-button",{on:{click:function(e){return n()}}},[e._v(" X ")])],1)]}}])},[a("vitals",{ref:"vitals",on:{addEncounter:e.addEncounter}}),a("consultation",{ref:"consultation",on:{addEncounter:e.addEncounter}}),a("prescription",{ref:"prescription",attrs:{date:e.date},on:{addEncounter:e.addEncounter}}),a("reception",{ref:"reception",on:{addEncounter:e.addEncounter}}),a("adherence",{ref:"adherence",attrs:{date:e.date},on:{addEncounter:e.addEncounter}}),a("appointment",{ref:"appointment",attrs:{date:e.date},on:{addEncounter:e.addEncounter}})],1)},I=[],A=(a("caad"),a("2532"),a("53ba")),q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-col",[a("div",[a("div",{staticClass:"row "},[a("div",{staticClass:"col d-flex justify-content-start"},[a("p",[e._v("Drugs given to patient")])]),a("div",{staticClass:"col"},[a("fieldset",[a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.patient.value_coded,expression:"patient.value_coded"}],staticClass:"form-check-input",attrs:{type:"radio",value:"1065",name:"patient",disabled:e.hasWeight},domProps:{checked:e._q(e.patient.value_coded,"1065")},on:{change:function(t){return e.$set(e.patient,"value_coded","1065")}}}),a("label",{staticClass:"form-check-label",attrs:{for:"inlineRadio1"}},[e._v("Yes")])]),a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.patient.value_coded,expression:"patient.value_coded"}],staticClass:"form-check-input",attrs:{type:"radio",value:"1066",name:"patient",disabled:e.hasWeight},domProps:{checked:e._q(e.patient.value_coded,"1066")},on:{change:function(t){return e.$set(e.patient,"value_coded","1066")}}}),a("label",{staticClass:"form-check-label",attrs:{for:"inlineRadio2"}},[e._v("No")])])])]),a("div",{staticClass:"col d-flex justify-content-start"},[a("p",[e._v("Drugs given to guardian")])]),a("div",{staticClass:"col"},[a("fieldset",[a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.guardian.value_coded,expression:"guardian.value_coded"}],staticClass:"form-check-input",attrs:{type:"radio",value:"1065",name:"guardian",disabled:e.hasWeight},domProps:{checked:e._q(e.guardian.value_coded,"1065")},on:{change:function(t){return e.$set(e.guardian,"value_coded","1065")}}}),a("label",{staticClass:"form-check-label",attrs:{for:"inlineRadio1"}},[e._v("Yes")])]),a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.guardian.value_coded,expression:"guardian.value_coded"}],staticClass:"form-check-input",attrs:{type:"radio",value:"1066",name:"guardian",disabled:e.hasWeight},domProps:{checked:e._q(e.guardian.value_coded,"1066")},on:{change:function(t){return e.$set(e.guardian,"value_coded","1066")}}}),a("label",{staticClass:"form-check-label",attrs:{for:"inlineRadio2"}},[e._v("No")])])])])])])])},M=[],V={data:function(){return{patient:{value_coded:null,concept_id:1805},guardian:{value_coded:null,concept_id:2122},hasWeight:!1}},methods:{saveEncounter:function(){var e={reception:{encounter_id:51,obs:{patient:this.patient,guardian:this.guardian}}};this.$emit("addEncounter",e)},setPresent:function(){"1066"===this.patient.value_coded?this.guardian.value_coded="1065":"1065"===this.patient.value_coded?this.guardian.value_coded="1066":"1066"===this.guardian.value_coded?this.patient.value_coded="1065":"1065"===this.guardian.value_coded&&(this.patient.value_coded="1066"),h["a"].$emit("set-present",this.patient.value_coded)}},watch:{patient:{handler:function(e){this.setPresent()},deep:!0},guardian:{handler:function(e){this.setPresent()},deep:!0}},mounted:function(){var e=this;h["a"].$on("set-weight",(function(t){null!==t&&""!==t&&0!==t?(e.patient.value_coded="1065",e.guardian.value_coded="1066",e.hasWeight=!0):(e.patient.value_coded=null,e.guardian.value_coded=null,e.hasWeight=!1)}))}},F=V,Y=Object(w["a"])(F,q,M,!1,null,null,null),H=Y.exports,L=a("f91c"),B=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-row",[a("b-col",[a("label",{attrs:{for:"appointment-datepicker"}},[e._v("Choose an appointment date")]),a("b-form-datepicker",{staticClass:"mb-2",attrs:{id:"appointment-datepicker",min:e.date,max:e.earliestExpiry},model:{value:e.appointmentdate.value_datetime,callback:function(t){e.$set(e.appointmentdate,"value_datetime",t)},expression:"appointmentdate.value_datetime"}})],1)],1)},U=[],W={props:["date"],data:function(){return{appointmentdate:{value_datetime:null,concept_id:5096},prescribed_drugs:0,remaining_drugs:0}},methods:{saveEncounter:function(){var e={hiv_staging:{encounter_id:7,obs:{date:this.appointmentdate}}};this.$emit("addEncounter",e)}},mounted:function(){var e=this;h["a"].$on("earliest-expiry-date",(function(t){e.prescribed_drugs=t})),h["a"].$on("drugs-remaining",(function(t){e.remaining_drugs=t}))},computed:{earliestExpiry:function(){var e=b()(this.date).add(this.prescribed_drugs+this.remaining_drugs,"days").format("YYYY-MM-DD");return e}}},G=W,z=Object(w["a"])(G,B,U,!1,null,null,null),Q=z.exports,X=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("b-row",[e.isFemale?a("b-col",[a("b-form-group",{attrs:{label:"Pregnant"}},[a("b-form-radio",{attrs:{name:"pregnant-radios",value:"1065",inline:""},model:{value:e.pregnant.value_coded,callback:function(t){e.$set(e.pregnant,"value_coded",t)},expression:"pregnant.value_coded"}},[e._v("Yes")]),a("b-form-radio",{attrs:{name:"pregnant-radios",value:"1066",inline:""},model:{value:e.pregnant.value_coded,callback:function(t){e.$set(e.pregnant,"value_coded",t)},expression:"pregnant.value_coded"}},[e._v("No")])],1)],1):e._e(),e.isFemale?a("b-col",[a("b-form-group",{attrs:{label:"Breastfeeding"}},[a("b-form-radio",{attrs:{name:"breastfeeding-radios",value:"1065",inline:""},model:{value:e.breastFeeding.value_coded,callback:function(t){e.$set(e.breastFeeding,"value_coded",t)},expression:"breastFeeding.value_coded"}},[e._v("Yes")]),a("b-form-radio",{attrs:{name:"breastfeeding-radios",value:"1066",inline:""},model:{value:e.breastFeeding.value_coded,callback:function(t){e.$set(e.breastFeeding,"value_coded",t)},expression:"breastFeeding.value_coded"}},[e._v("No")])],1)],1):e._e(),a("b-col",[a("b-form-select",{attrs:{options:e.tb_status},model:{value:e.currentStatus,callback:function(t){e.currentStatus=t},expression:"currentStatus"}})],1),a("b-col",[a("b-form-checkbox",{attrs:{name:"check-button",switch:""},model:{value:e.hasSE,callback:function(t){e.hasSE=t},expression:"hasSE"}},[e._v("Has Side Effects / Contraindications?")]),a("b-collapse",{staticClass:"mt-2",attrs:{id:"collapse-1"},model:{value:e.hasSE,callback:function(t){e.hasSE=t},expression:"hasSE"}},[a("b-card",[a("b-form-group",{attrs:{label:"Side Effects:"}},[a("b-form-checkbox-group",{attrs:{id:"checkbox-group-1",options:e.sideEffects,name:"flavour-1"},model:{value:e.sides,callback:function(t){e.sides=t},expression:"sides"}})],1),a("b-form-checkbox",{attrs:{name:"check-button",switch:""},model:{value:e.otherSE,callback:function(t){e.otherSE=t},expression:"otherSE"}},[e._v("Other")]),a("b-collapse",{staticClass:"mt-2",attrs:{id:"collapse-1-inner"},model:{value:e.otherSE,callback:function(t){e.otherSE=t},expression:"otherSE"}},[a("b-card",[a("b-form-checkbox-group",{attrs:{options:e.otherSideEffects},model:{value:e.otherSides,callback:function(t){e.otherSides=t},expression:"otherSides"}})],1)],1)],1)],1)],1)],1)],1)])},J=[],K={data:function(){return{gender:null,pregnant:{value_coded:null,concept_id:6131},breastFeeding:{value_coded:null,concept_id:7965},onTb:{value_coded:null,concept_id:2690},currentStatus:null,fpm:{"Oral contraceptive pills":780,"Depo-Provera":907,"Intrauterine device/loop":5275,Implant:7857,"Male condoms":7858,"Female condoms":7859,"Tubal ligation":1719,"None of the above":1107},tb_status:[{value:null,text:"TB Status"},{value:7454,text:"TB Not Suspected"},{value:7455,text:"TB Suspected"},{value:7456,text:"Confirmed TB Not on treatment"},{value:7458,text:"Confirmed TB on treatment"}],drugs:{ARVs:1085,CPT:916,IPT:656},tbSymptoms:{"cough of any duration":8261,fever:5945,"night sweats":6029,"Weight loss / Failure to thrive / malnutritionweight loss":8260},sideEffects:[{text:"peripheral neuropaphy",value:821},{text:"jaundince",value:215},{text:"lipodostrophy",value:2148},{text:"kidney failure",value:9242},{text:"psychosis",value:219},{text:"gynaecomastia",value:9440},{text:"anemia",value:3},{text:"skin rash",value:512},{text:"insomnia",value:867}],otherSideEffects:[{text:"fever",value:5945},{text:"vomiting",value:5980},{text:"dizziness",value:877},{text:"headache",value:620},{text:"nausea",value:5978},{text:"weight loss",value:8260},{text:"lactic acidosis",value:1458},{text:"cough",value:107}],prescribedFPM:[],currentFPM:[],sides:[],otherSides:[],tbSymps:[],drugsToPrescribe:[],onFP:!1,prescribeFP:!1,hasSE:!1,otherSE:!1,hasTBSymps:!1,statusTB:null}},computed:{isFemale:function(){return"F"===this.$store.state.patient.sex}},methods:{saveEncounter:function(){var e=this,t={consultation:{encounter_id:53,obs:{tb:{value_coded:this.currentStatus,concept_id:7459}}}};this.isFemale&&(t.consultation.obs.pregnant=this.pregnant,t.consultation.obs.breastFeeding=this.breastFeeding,t.consultation.obs.onFP={concept_id:1717,value_coded:1066},Object.keys(this.fpm).forEach((function(a){t.consultation.obs["pres"+a]={concept_id:e.fpm[a],value_coded:e.getCoded(e.prescribedFPM,e.fpm[a])}})),Object.keys(this.fpm).forEach((function(a){t.consultation.obs["curr"+a]={concept_id:e.fpm[a],value_coded:e.getCoded(e.currentFPM,e.fpm[a])}})),this.onFP&&(t.consultation.obs.onFP.value_coded=1065)),this.sideEffects.forEach((function(a){t.consultation.obs[a.text]={concept_id:7755,value_coded:a.value,child:{concept_id:a.value,value_coded:e.getCoded(e.sides,a.value)}}})),this.otherSE&&this.otherSideEffects.forEach((function(a){t.consultation.obs[a.text]={concept_id:7951,value_coded:a.value,child:{concept_id:a.value,value_coded:e.getCoded(e.otherSides,a.value)}}})),Object.keys(this.tbSymptoms).forEach((function(a){t.consultation.obs[a]={concept_id:e.tbSymptoms[a],value_coded:e.tbSymptoms[a],child:{concept_id:e.tbSymptoms[a],value_coded:e.getCoded(e.tbSymps,e.tbSymptoms[a])}}})),this.drugsToPrescribe.forEach((function(e){t.consultation.obs[e]={concept_id:1282,value_coded:e}})),this.$emit("addEncounter",t)},getCoded:function(e,t){return e.includes(t)?1065:1066}},watch:{currentStatus:{handler:function(e){[7455,7456,7458].includes(e)?h["a"].$emit("set-tb",!0):h["a"].$emit("set-tb",!1)},deep:!0}}},Z=K,ee=(a("e153"),Object(w["a"])(Z,X,J,!1,null,"06aa17ed",null)),te=ee.exports,ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-row",[a("b-col",{attrs:{cols:"6"}},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"inputState"}},[e._v("Regimen")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedRegimen,expression:"selectedRegimen"}],staticClass:"form-control",attrs:{id:"inputState"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedRegimen=t.target.multiple?a:a[0]}}},e._l(e.regimens,(function(t,n){return a("option",{key:n},[e._v(e._s(n))])})),0)]),a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"ARV-quantity"}},[e._v("Quantity")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.ARVquantity,expression:"ARVquantity"}],staticClass:"form-control",attrs:{type:"number",id:"ARV-quantity"},domProps:{value:e.ARVquantity},on:{input:function(t){t.target.composing||(e.ARVquantity=t.target.value)}}})])])]),a("b-col",[a("label",{attrs:{for:"CPT-quantity"}},[e._v("CPT Quantity")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.CPTquantity,expression:"CPTquantity"}],staticClass:"form-control",attrs:{type:"number",id:"CPT-quantity"},domProps:{value:e.CPTquantity},on:{input:function(t){t.target.composing||(e.CPTquantity=t.target.value)}}})]),a("b-col",[a("label",[e._v("TB Meds")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.selected3HPOption,expression:"selected3HPOption"}],staticClass:"form-control",attrs:{id:"inputState"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selected3HPOption=t.target.multiple?a:a[0]}}},[a("option",[e._v("6H")]),a("option",[e._v("3HP (RFP + INH)")]),a("option",[e._v("3HP (INH 300 / RFP 300)")])])])],1),a("b-row",[["6H","3HP (RFP + INH)"].includes(e.selected3HPOption)?a("b-col",[a("label",{attrs:{for:"IPT-quantity"}},[e._v("IPT Quantity")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.IPTquantity,expression:"IPTquantity"}],staticClass:"form-control",attrs:{type:"number",id:"IPT-quantity"},domProps:{value:e.IPTquantity},on:{input:function(t){t.target.composing||(e.IPTquantity=t.target.value)}}})]):e._e(),"3HP (RFP + INH)"===e.selected3HPOption?a("b-col",[a("label",[e._v("RFP Quantity")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.RFPquantity,expression:"RFPquantity"}],staticClass:"form-control",attrs:{type:"number",id:"IPT-quantity"},domProps:{value:e.RFPquantity},on:{input:function(t){t.target.composing||(e.RFPquantity=t.target.value)}}})]):e._e(),"3HP (INH 300 / RFP 300)"===e.selected3HPOption?a("b-col",[a("label",{attrs:{for:"3HP-quantity"}},[e._v("3HP Quantity")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.threeHPquantity,expression:"threeHPquantity"}],staticClass:"form-control",attrs:{type:"number",id:"IPT-quantity"},domProps:{value:e.threeHPquantity},on:{input:function(t){t.target.composing||(e.threeHPquantity=t.target.value)}}})]):e._e()],1),a("p")],1)},ne=[],re=(a("498a"),{props:["date"],data:function(){return{regimens:[],selected3HPOption:"",selectedRegimen:null,selectedDrugs:[],drugOrder:[],nextAppointment:null,RFPquantity:null,ARVquantity:null,CPTquantity:null,IPTquantity:null,threeHPquantity:null,prescribeARVs:!1,prescribeCPT:!1,prescribeIPT:!1,prescribeThreeHP:!1,weight:null,latestWeight:null,RFPRegimens:[],CPTRegimens:[],IPTRegimens:[],RFPplusINHRegimens:[],rifapepentineRegimens:[],rfpinhregimens:[],onTb:!1,"Unknown Regimen":[{drug_id:1046,name:"Unknown ARV",combination:0,am:1,pm:0}]}},methods:{getRegimens:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p["a"].get("/programs/1/regimens?weight=".concat(this.weight,"&tb_dosage=").concat(this.onTb)).then((function(e){e.json().then((function(e){a.regimens=e,a.regimens["Unknown"]=a["Unknown Regimen"]}))}));case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getCPT:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p["a"].get("/programs/1/regimen_extras?weight=".concat(this.weight,"&name=Cotrimoxazole")).then((function(e){e.json().then((function(e){t.CPTRegimens=e}))}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getRFP:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p["a"].get("/programs/1/regimen_extras?weight=".concat(this.weight,"&name=Rifapentine")).then((function(e){e.json().then((function(e){t.RFPRegimens=e}))}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getIPT:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p["a"].get("/programs/1/regimen_extras?weight=".concat(this.weight,"&name=INH")).then((function(e){e.json().then((function(e){t.IPTRegimens=e}))}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getThreeHp:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p["a"].get("/programs/1/regimen_extras?weight=".concat(this.weight,"&name=INH / RFP")).then((function(e){e.json().then((function(e){console.log(e),t.RFPplusINHRegimens=e}))}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getAutoExpireDate:function(){var e=this;if(this.ARVquantity&&this.selectedRegimen){var t=[];this.regimens[this.selectedRegimen].forEach((function(a){var n=parseFloat(a.am)+parseFloat(a.pm),r=e.ARVquantity/n+2;t.push(r)})),h["a"].$emit("earliest-expiry-date",Math.min.apply(Math,t))}},saveEncounter:function(){var e=this,t=[];this.selectedDrugs=[];var a=this.regimens[this.selectedRegimen],n={};this.ARVquantity&&this.selectedRegimen&&(a.forEach((function(t){e.selectedDrugs.push({drug_name:t.drug_name,drug_id:t.drug_id,units:t.units,am:t.am,pm:t.pm,quantity:e.ARVquantity,frequency:t.frequency})})),n.prescribeARV={concept_id:1282,value_coded:1085}),this.CPTquantity&&(this.CPTRegimens.filter((function(e){return"Daily (QOD)"===e.frequency})).forEach((function(t){e.selectedDrugs.push({drug_name:t.drug_name,drug_id:t.drug_id,units:t.units,am:t.am,pm:t.pm,quantity:e.CPTquantity,frequency:t.frequency})})),n.prescribeCPT={concept_id:1282,value_coded:916}),this.IPTquantity&&(this.IPTRegimens.filter((function(t){return"Daily (QOD)"===t.frequency&&"6H"===e.selected3HPOption||"3HP (RFP + INH)"===e.selected3HPOption&&"Weekly (QW)"===t.frequency})).forEach((function(t){e.selectedDrugs.push({drug_name:t.drug_name,drug_id:t.drug_id,units:t.units,am:t.am,pm:t.pm,quantity:e.IPTquantity,frequency:t.frequency})})),n.prescribeIPT={concept_id:1282,value_coded:656}),this.RFPquantity&&"3HP (RFP + INH)"===this.selected3HPOption&&(this.RFPRegimens.filter((function(e){return"Weekly (QW)"===e.frequency})).forEach((function(t){e.selectedDrugs.push({drug_name:t.drug_name,drug_id:t.drug_id,units:t.units,am:t.am,pm:t.pm,quantity:e.RFPquantity,frequency:t.frequency})})),n.prescribeRFP={concept_id:1282,value_coded:9974}),this.threeHPquantity&&"3HP (INH 300 / RFP 300)"===this.selected3HPOption&&(this.RFPplusINHRegimens.filter((function(e){return"Weekly (QW)"===e.frequency})).forEach((function(t){e.selectedDrugs.push({drug_name:t.drug_name,drug_id:t.drug_id,units:t.units,am:t.am,pm:t.pm,quantity:e.threeHPquantity,frequency:t.frequency})})),n.prescribeThreeHP={concept_id:1282,value_coded:10565});for(var r=0;r<this.selectedDrugs.length;r++){var i=parseFloat(this.selectedDrugs[r]["am"]),s=parseFloat(this.selectedDrugs[r]["pm"]),o=this.selectedDrugs[r]["frequency"],c=i+s,u=this.selectedDrugs[r].drug_name+":- Morning: "+i+" tab(s), Evening: "+s+" tabs",l=0;0==s&&(l=i),0==i&&(l=s),i>0&&s>0&&(l=(i+s)/2);var d={drug_inventory_id:this.selectedDrugs[r].drug_id,dose:l,equivalent_daily_dose:c,frequency:o,start_date:b()(this.date).format("YYYY-MM-DD"),auto_expire_date:b()(this.date).add(this.selectedDrugs[r].quantity/c+2,"days").format("YYYY-MM-DD"),instructions:u,units:this.selectedDrugs[r].units,qty:this.selectedDrugs[r].quantity};"Cotrimoxazole (480mg tablet)"===this.selectedDrugs[r].drug_name||t.push(d)}var m={prescription:{encounter_id:25,drug_orders:t}},p={consultation2:{encounter_id:53,obs:n}};this.$emit("addEncounter",m),this.$emit("addEncounter",p)}},mounted:function(){var e=this;this.latestWeight=this.$store.state.currentWeight,this.weight=this.latestWeight,this.getRegimens(),this.getCPT(),this.getIPT(),this.getRFP(),this.getThreeHp(),h["a"].$on("set-weight",(function(t){e.selectedRegimen=null,e.ARVquantity=null,""===t.trim()?e.weight=e.latestWeight:e.weight=t,e.getRegimens(),e.getCPT(),e.getIPT(),e.getRFP(),e.getThreeHp()})),h["a"].$on("set-initial-weight",(function(t){e.latestWeight=t,e.weight=t,e.getRegimens(),e.getCPT(),e.getIPT(),e.getRFP(),e.getThreeHp()})),h["a"].$on("set-tb",(function(t){e.onTb=t}))},watch:{ARVquantity:{handler:function(){this.getAutoExpireDate()},deep:!0},selectedRegimen:{handler:function(){this.getAutoExpireDate()},deep:!0}}}),ie=re,se=Object(w["a"])(ie,ae,ne,!1,null,null,null),oe=se.exports,ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"inputState"}},[e._v("Pill Count: Last dispensation("+e._s(e.previousDispensation)+")")])]),a("div",{staticClass:"form-group col-md-6"},[e.previousDispensation>0?a("input",{directives:[{name:"model",rawName:"v-model",value:e.pillCount,expression:"pillCount"}],staticClass:"form-control",attrs:{type:"number",id:"pill-count"},domProps:{value:e.pillCount},on:{input:function(t){t.target.composing||(e.pillCount=t.target.value)}}}):e._e()])])])},ue=[];function le(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function de(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?le(Object(a),!0).forEach((function(t){Object(d["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):le(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var me={props:["date"],data:function(){return{pillCount:null,lastDrugs:[],adherence:0}},methods:{saveEncounter:function(){var e=this,t={},a=6987,n=2540;this.lastDrugs.forEach((function(r){var i=e.calculateExpected(r.quantity,r.equivalent_daily_dose,r.order.start_date),s=e.calculateAdherence(r.quantity,e.pillCount,i);t["adherence"+r.order_id]={concept_id:a,value_drug:r.drug_inventory_id,order_id:r.order_id,value_numeric:s,value_modifier:"%",person_id:e.$route.params.id},t["amount"+r.order_id]={concept_id:n,order_id:r.order_id,value_numeric:e.pillCount,person_id:e.$route.params.id}}));var r={adherence:{encounter_id:68,obs:de({},t)}};this.$emit("addEncounter",r)},calculateExpected:function(e,t,a){var n=new Date(this.date),r=new Date(a),i=this.dateDiffInDays(r,n);return e-i*parseFloat(t)},calculateAdherence:function(e,t,a){return Math.round(100*(e-t)/(e-a))},getLastOrder:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var a,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.lastDrugs=[],a=this.$route.params.id,e.next=4,p["a"].get("/programs/1/patients/".concat(a,"/last_drugs_received?date=")+t).then((function(e){e.json().then((function(e){e.length>0&&(n.lastDrugs=e)}))}));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),dateDiffInDays:function(e,t){var a=Math.abs(t.getTime()-e.getTime()),n=Math.ceil(a/864e5);return n}},mounted:function(){this.getLastOrder(this.date),h["a"].$on("change-date",(function(e){}))},watch:{date:function(e,t){this.getLastOrder(e)},pillCount:function(e,t){h["a"].$emit("drugs-remaining",parseInt(e)||0)}},computed:{previousDispensation:function(){return this.lastDrugs.length>0?this.lastDrugs[0].quantity:0}}},pe=me,he=Object(w["a"])(pe,ce,ue,!1,null,null,null),ve=he.exports,fe=a("cf40"),ge={data:function(){return{encounters:{},numEnc:0,patientPresent:!1,posting:!1,verifiedEnc:[],date:b()().format("YYYY-MM-DD")}},components:{vitals:A["a"],"clinic-registration":T["a"],reception:H,appointment:Q,staging:L["a"],consultation:te,prescription:oe,adherence:ve},methods:{addEncounter:function(e){var t=Object.keys(e)[0];this.encounters[t]=e[t]},saveEncounter:function(e){var t=this,a=[],n={url:"observations"};Object.keys(e).includes("obs")?(Object.keys(e.obs).forEach((function(n){var r=e.obs[n][t.getExpected(e.obs[n])];null!==r&&""!==r&&a.push(e.obs[n])})),n.observations=a,a.length>0&&(this.verifiedEnc.push(e.encounter_id),this.postEncounter(n,e.encounter_id))):Object.keys(e).includes("drug_orders")&&(n.drug_orders=e.drug_orders,n.url="drug_orders",n.drug_orders.length>0&&(this.verifiedEnc.push(e.encounter_id),this.postEncounter(n,e.encounter_id)))},postEncounter:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,a){var n,r,i,s,o,c,u=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.$route.params.id,e.next=3,fe["a"].createEncounter(n,a,this.date);case 3:if(r=e.sent,this.successfulOperation=!0,201!==r.status&&200!==r.status){e.next=33;break}return i=r.encounter_id,t.encounter_id=i,e.next=10,p["a"].post(t.url,t);case 10:if(s=e.sent,201!==s.status&&200!==s.status){e.next=28;break}if("drug_orders"!==t.url){e.next=21;break}return e.next=15,s.json();case 15:return o=e.sent,c=[],o.forEach((function(e){var a=t.drug_orders.filter((function(t){return t.drug_inventory_id===e.drug_inventory_id}));c.push({date:u.date,drug_order_id:e.order_id,quantity:a[0]["qty"]})})),e.next=20,p["a"].post("/dispensations",{dispensations:c,program_id:1});case 20:e.sent;case 21:this.numEnc++,this.numEnc===this.verifiedEnc.length&&(this.posting=!1,h["a"].$emit("reload-visits",""),h["a"].$emit("reload-first-visits",""),this.$toasted.show("Encounter Saved",{theme:"toasted-primary",position:"top-right",duration:2e3}),this.$root.$emit("bv::hide::modal","encounter-modal","#btnShow")),this.success=!0,this.fail=!1,this.postResponse="Appointment has been set.",e.next=31;break;case 28:this.$toasted.show("Some Observations failed to save !!",{theme:"toasted-primary",position:"top-right",duration:5e3}),this.fail=!0,this.postResponse="Appointment could not be set.";case 31:e.next=36;break;case 33:this.success=!1,this.fail=!0,this.postResponse="Appointment could not be set.";case 36:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}(),createEncounters:function(){var e=this;this.posting=!0;var t=Object.keys(this.$refs);t.forEach((function(t){e.$refs[t].saveEncounter()}));var a=Object.keys(this.encounters);a.forEach((function(t){e.saveEncounter(e.encounters[t])}))},getExpected:function(e){var t=["value_group_id","value_boolean","value_coded","value_coded_name_id","value_drug","value_datetime","value_numeric","value_modifier","value_text"],a="";return Object.keys(e).filter((function(e){t.includes(e)&&(a=e)})),a},removeModal:function(){var e=document.getElementById("exampleModalCenter");e.classList.remove("show"),e.setAttribute("aria-hidden","true"),e.setAttribute("style","display: none");var t=document.getElementsByClassName("modal-backdrop");document.body.removeChild(t[0])}},mounted:function(){var e=this;h["a"].$on("set-present",(function(t){e.patientPresent="1066"!==t}))}},be=ge,_e=Object(w["a"])(be,S,I,!1,null,null,null),ye=_e.exports,xe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"alert alert-dark"},[e._v(" Patient is "),e.isEnrolled?e._e():a("strong",[e._v(" not ")]),e._v(" enrolled in porgram. "),e.enrollDate?a("span",[e._v("Date enrolled is "+e._s(e.moment(e.enrollDate).format("DD-MMM-YYYY")))]):e._e()]),a("programs"),a("br"),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"input-group mb-3"},[e._m(0),e.states.length>0?a("select",{directives:[{name:"model",rawName:"v-model",value:e.state,expression:"state"}],staticClass:"form-control",attrs:{name:"",id:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.state=t.target.multiple?a:a[0]}}},e._l(e.states,(function(t,n){return a("option",{key:n,domProps:{value:{state_id:t.program_workflow_state_id,name:t.name}}},[e._v(" "+e._s(t.name)+" ")])})),0):e._e()])]),a("div",{staticClass:"col"},[a("div",{staticClass:"input-group mb-3"},[e._m(1),a("b-form-datepicker",{attrs:{id:"encounter-datepicker",min:e.moment(e.enrollDate).format("YYYY-MM-DD")},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)]),"Patient transferred out"===e.state.name?a("div",{staticClass:"col"},[a("div",{staticClass:"form-group"},[a("v-select",{attrs:{options:e.locations,placeholder:"Next facility"},on:{search:e.getlocations,input:e.getVal}})],1)]):e._e(),a("div",{staticClass:"col"},[a("button",{staticClass:"btn btn-primary",on:{click:e.postOutcome}},[e._v("Submit")])])]),a("div",{staticClass:"text-center"},e._l(e.errors,(function(t,n){return a("p",{key:n,staticStyle:{color:"red"}},[e._v(" "+e._s(t)+" ")])})),0),a("table",{staticClass:"table table-bordered"},[e._m(2),a("tbody",e._l(e.outcomes,(function(t,n){return a("tr",{key:n},[a("td",[e._v(e._s(t.name))]),a("td",[e._v(e._s(e.moment(t.start_date).format("DD-MMM-YYYY")))]),t.end_date?a("td",[e._v(" "+e._s(e.moment(t.end_date).format("DD-MMM-YYYY"))+" ")]):a("td"),a("td",[a("click-confirm",[a("button",{staticClass:"btn btn-danger",on:{click:function(a){return e.voidState(t.patient_state_id,n)}}},[e.voiding?[a("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}),a("span",{staticClass:"sr-only"},[e._v("Loading...")])]:[a("span",[e._v("X")])]],2)])],1)])})),0)])],1)},we=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text",attrs:{id:"height"}},[e._v("Outcome ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text"},[e._v("Outcome Date")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",{staticClass:"thead-dark"},[a("tr",[a("th",[e._v("Outcome")]),a("th",[e._v("Start Date")]),a("th",[e._v("End Date")])])])}],Ce=(a("6dfc"),a("4a7a")),ke=a.n(Ce),Oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("b-form-datepicker",{attrs:{disabled:e.isEnrolled},model:{value:e.visit_date,callback:function(t){e.visit_date=t},expression:"visit_date"}})],1),a("div",{staticClass:"col"},[a("button",{staticClass:"btn btn-success",attrs:{disabled:e.isEnrolled},on:{click:e.enroll}},[e._v(" Enroll in program ")])]),a("div",{staticClass:"col"},[a("button",{staticClass:"btn btn-danger",attrs:{disabled:0===e.patient_programs.length},on:{click:e.voidProgram}},[e._v(" Void program ")])])])},Ne=[],De={data:function(){return{visit_date:null,patient_programs:[]}},methods:{voidProgram:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,a){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.patient_programs.filter((function(e){return"HIV PROGRAM"===e.program.name}))[0].patient_program_id,r="/patient_programs/".concat(n,"?reason='duplicate / system error'"),e.next=4,p["a"].remove(r);case 4:i=e.sent,201===i.status||204===i.status?(this.$toasted.show("Program voided",{theme:"toasted-primary",position:"top-right",duration:2e3}),this.$root.$emit("bv::hide::modal","outcome-modal","#btnShow")):(console.log(i.status),console.log("Failed to update"));case 6:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}(),enroll:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.visit_date){e.next=4;break}this.$toasted.show("No date selected",{theme:"toasted-primary",position:"top-right",duration:2e3}),e.next=10;break;case 4:return t={program_id:1,date_enrolled:this.visit_date},a=this.$route.params.id,e.next=8,p["a"].post("/patients/".concat(a,"/programs"),t);case 8:n=e.sent,201===n.status||200===n.status?(this.$toasted.show("Patient Enrolled",{theme:"toasted-primary",position:"top-right",duration:2e3}),this.$root.$emit("bv::hide::modal","outcome-modal","#btnShow")):409===n.status?this.$toasted.show("Patient already enrolled in program",{theme:"toasted-primary",position:"top-right",duration:2e3}):console.log("Failed to update");case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getPrograms:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.patient_programs=[],t=this,e.next=4,p["a"].get("/patients/".concat(this.$route.params.id,"/programs")).then((function(e){e.json().then((function(e){t.patient_programs=e}))}));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){this.getPrograms()},computed:{isEnrolled:function(){return this.patient_programs.filter((function(e){return"HIV PROGRAM"===e.program.name})).length>0}}},$e=De,Pe=Object(w["a"])($e,Oe,Ne,!1,null,null,null),Re=Pe.exports,je={components:{"v-select":ke.a,programs:Re},data:function(){return{states:[],errors:[],state:{},outcomes:[],date:null,locations:[],location:null,location_name:null,voiding:!1,enrollDate:null,programs:[]}},methods:{getOutcomes:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p["a"].get("/programs/1/workflows").then((function(e){e.json().then((function(e){t.states=e[0].states}))}));case 2:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),getPatientOutcomes:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p["a"].get("/patients/".concat(this.$route.params.id,"/programs")).then((function(e){e.json().then((function(e){e.length>0&&(t.programs=e,t.outcomes=e.filter((function(e){return 1===e.program_id}))[0]["patient_states"],t.enrollDate=e[0].date_enrolled)}))}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),voidState:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,a){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.voiding=!0,n="/programs/1/patients/".concat(this.$route.params.id,"/states/").concat(t,"?reason='duplicate / system error'"),e.next=4,p["a"].remove(n);case 4:r=e.sent,201===r.status||204===r.status?(h["a"].$emit("reload-visits",""),this.$toasted.show("Outcome deleted",{theme:"toasted-primary",position:"top-right",duration:2e3}),this.voiding=!1,this.outcomes.splice(a,1)):(console.log(r.status),console.log("Failed to update"));case 6:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}(),postOutcome:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,a,n,r,i,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.errors=[],0===Object.keys(this.state).length&&this.errors.push("Outcome is required"),null!==this.date&&""!==this.date||this.errors.push("Date is required"),t={state:this.state.state_id,date:b()(this.date).format("YYYY-MM-DD")},"Patient transferred out"!==this.state.name){e.next=20;break}if(t.location_id=this.location,null!=this.location){e.next=10;break}this.errors.push("Location is required"),e.next=20;break;case 10:return a=this.$route.params.id,e.next=13,fe["a"].createEncounter(a,119,this.date);case 13:if(n=e.sent,201!==n.status&&200!==n.status){e.next=20;break}return r=n.encounter_id,i={encounter_id:r,observations:[{value_text:this.location_name,value_coded:this.location,concept_id:3003}]},e.next=19,p["a"].post("observations",i);case 19:e.sent;case 20:if(0!==this.errors.length){e.next=26;break}return s=this.$route.params.id,e.next=24,p["a"].post("programs/1/patients/".concat(s,"/states"),t);case 24:o=e.sent,201===o.status||200===o.status?(h["a"].$emit("reload-visits",""),this.$toasted.show("Outcome Saved",{theme:"toasted-primary",position:"top-right",duration:2e3}),this.$root.$emit("bv::hide::modal","outcome-modal","#btnShow")):console.log("Failed to update");case 26:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getlocations:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.locations=[],e.next=3,p["a"].get("/locations?name="+t).then((function(e){e.json().then((function(e){e.forEach((function(e){a.locations.push({label:e.name,code:e.name,location_id:e.location_id})}))}))}));case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getVal:function(e){this.location=e.location_id,this.location_name=e.label}},mounted:function(){this.getOutcomes(),this.getlocations(""),this.getPatientOutcomes()},computed:{isEnrolled:function(){return this.programs.filter((function(e){return"HIV PROGRAM"===e.program.name})).length>0}}},Ee=je,Te=Object(w["a"])(Ee,xe,we,!1,null,null,null),Se=Te.exports,Ie=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.errorMessage?a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"alert alert-warning"},[e._v(" "+e._s(e.errorMessage)+" ")])])]):e._e(),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"form",attrs:{id:"form"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[e._v("Date Ordered: ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.$v.form.orderDate.$model,expression:"$v.form.orderDate.$model"}],staticClass:"form-control",style:e.$v.form.orderDate.required&&e.$v.form.orderDate.isValidDate||!e.$v.form.orderDate.$dirty?"":"border: 1.5px solid red;",attrs:{type:"date",name:"",id:"date",placeholder:"","aria-describedby":"helpId"},domProps:{value:e.$v.form.orderDate.$model},on:{input:function(t){t.target.composing||e.$set(e.$v.form.orderDate,"$model",t.target.value)}}})])]),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[e._v("Reason: ")]),a("v-select",{style:!e.$v.form.reason.required&&e.$v.form.reason.$dirty?"border: 1.5px solid red;":"",attrs:{options:Object.keys(e.reasons),placeholder:"select reason"},model:{value:e.$v.form.reason.$model,callback:function(t){e.$set(e.$v.form.reason,"$model",t)},expression:"$v.form.reason.$model"}})],1)])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[e._v("Specimen: ")]),a("v-select",{style:!e.$v.form.specimen.required&&e.$v.form.specimen.$dirty?"border: 1.5px solid red;":"",attrs:{options:Object.keys(e.specimens),placeholder:"specimen"},model:{value:e.$v.form.specimen.$model,callback:function(t){e.$set(e.$v.form.specimen,"$model",t)},expression:"$v.form.specimen.$model"}})],1)]),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[e._v("Result Date: ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.$v.form.resultDate.$model,expression:"$v.form.resultDate.$model"}],staticClass:"form-control",style:e.$v.form.resultDate.required&&e.$v.form.resultDate.isValidDate||!e.$v.form.resultDate.$dirty?"":"border: 1.5px solid red;",attrs:{type:"date",name:"",id:"date","aria-describedby":"helpId"},domProps:{value:e.$v.form.resultDate.$model},on:{input:function(t){t.target.composing||e.$set(e.$v.form.resultDate,"$model",t.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[e._v("Result Modifier: ")]),a("v-select",{style:!e.$v.form.modifier.required&&e.$v.form.modifier.$dirty?"border: 1.5px solid red;":"",attrs:{options:e.modifiers,placeholder:"modifier",disabled:e.ldl},model:{value:e.$v.form.modifier.$model,callback:function(t){e.$set(e.$v.form.modifier,"$model",t)},expression:"$v.form.modifier.$model"}})],1)]),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[e._v("Result Value: ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.$v.form.viralLoad.$model,expression:"$v.form.viralLoad.$model"}],staticClass:"form-control",style:!e.$v.form.viralLoad.required&&e.$v.form.viralLoad.$dirty?"border: 1.5px solid red;":"",attrs:{type:"number",placeholder:"","aria-describedby":"helpId",disabled:e.ldl},domProps:{value:e.$v.form.viralLoad.$model},on:{input:function(t){t.target.composing||e.$set(e.$v.form.viralLoad,"$model",t.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 my-2"},[a("div",{staticClass:"form-group form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.ldl,expression:"ldl"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"exampleCheck1"},domProps:{checked:Array.isArray(e.ldl)?e._i(e.ldl,null)>-1:e.ldl},on:{change:function(t){var a=e.ldl,n=t.target,r=!!n.checked;if(Array.isArray(a)){var i=null,s=e._i(a,i);n.checked?s<0&&(e.ldl=a.concat([i])):s>-1&&(e.ldl=a.slice(0,s).concat(a.slice(s+1)))}else e.ldl=r}}}),a("label",{staticClass:"form-check-label",attrs:{for:"exampleCheck1"}},[e._v("LDL")])])])])])])]),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col-md-12"},[a("button",{staticClass:"btn btn-primary btn-lg",attrs:{type:"submit",form:"form"},on:{click:e.saveEncounter}},[e._v("Save")])])])])},Ae=[],qe=a("b5ae"),Me=a("1dce"),Ve={components:{"v-select":ke.a},mixins:[Me["validationMixin"]],validations:function(){var e=this;return{form:{orderDate:{required:qe["required"],isValidDate:function(e){var t=b()(e);return t.isValid()&&t.isSameOrBefore(b()())}},reason:{required:qe["required"]},specimen:{required:qe["required"]},resultDate:{required:qe["required"],isValidDate:function(e){var t=b()(e);return t.isValid()&&t.isSameOrAfter(b()(this.form.orderDate))&&t.isSameOrBefore(b()())}},modifier:{required:Object(qe["requiredIf"])((function(){return!e.ldl}))},viralLoad:{required:Object(qe["requiredIf"])((function(){return!e.ldl}))}}}},data:function(){return{location:sessionStorage.location||"",user:sessionStorage.username||"",modifiers:["=",">","<","=>","=<"],reasons:{Routine:432,Targeted:3280,Confirmatory:1345,Stat:6368,"Repeat / Missing":9144},specimens:{Blood:8612,"DBS (Free drop to DBS card)":10095,"DBS (Using capillary tube)":10096},form:{modifier:null,viralLoad:null,resultDate:null,orderDate:null,specimen:null,reason:null},ldl:!1,errorMessage:null}},methods:{validateForm:function(){return this.$v.$touch(),!this.$v.$invalid},createLabOrder:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var a,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fe["a"].createEncounter(t,13,this.form.orderDate);case 2:if(a=e.sent,200!==a.status&&201!==a.status){e.next=12;break}return e.next=6,p["a"].post("/lab/orders",{encounter_id:a.encounter_id,orders:[{encounter_id:a.encounter_id,tests:[{concept_id:856}],reason_for_test_id:this.reasons[this.form.reason],target_lab:this.location,requesting_clinician:this.user,date:this.form.orderDate,specimen:{concept_id:this.specimens[this.form.specimen]}}]});case 6:if(n=e.sent,200!==n.status&&201!==n.status){e.next=12;break}return e.next=10,n.json();case 10:return r=e.sent,e.abrupt("return",r[0].tests[0].id);case 12:return e.abrupt("return",-1);case 13:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),createLabResult:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,a){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fe["a"].createEncounter(t,57,this.form.resultDate);case 2:if(n=e.sent,200!==n.status&&201!==n.status){e.next=8;break}return e.next=6,p["a"].post("lab/tests/".concat(a,"/results"),{encounter_id:n.encounter_id,date:this.form.resultDate,measures:[{indicator:{concept_id:856},value:this.ldl?"LDL":parseInt(this.form.viralLoad),value_modifier:this.ldl?"=":this.form.modifier,value_type:this.ldl?"text":"numeric"}]});case 6:return r=e.sent,e.abrupt("return",200===r.status||201===r.status);case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}(),saveEncounter:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.validateForm()){e.next=2;break}return e.abrupt("return",this.errorMessage="Complete all required fields");case 2:return t=this.$route.params.id,e.next=5,this.createLabOrder(t);case 5:if(a=e.sent,!(a>0)){e.next=15;break}return e.next=9,this.createLabResult(t,a);case 9:if(!e.sent){e.next=15;break}return this.posting=!1,h["a"].$emit("reload-visits",""),this.$toasted.show("Viral Load Saved",{theme:"toasted-primary",position:"top-right",duration:2e3}),this.$root.$emit("bv::hide::modal","viral-load-modal","#btnShow"),e.abrupt("return");case 15:this.success=!1,this.fail=!0,this.postResponse="Viral load  could not be set.";case 18:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},Fe=Ve,Ye=Object(w["a"])(Fe,Ie,Ae,!1,null,null,null),He=Ye.exports,Le={name:"home",components:{"top-nav":o["a"],"side-bar":c["a"],"patient-information":k,"visit-data":E,"clinic-registration":T["a"],encounter:ye,outcome:Se,"viral-load":He},data:function(){return{date:b()().format("YYYY-MM-DD")}}},Be=Le,Ue=(a("29bc"),Object(w["a"])(Be,i,s,!1,null,null,null));t["default"]=Ue.exports},a434:function(e,t,a){"use strict";var n=a("23e7"),r=a("23cb"),i=a("a691"),s=a("50c4"),o=a("7b0b"),c=a("65f0"),u=a("8418"),l=a("1dde"),d=a("ae40"),m=l("splice"),p=d("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,v=Math.min,f=9007199254740991,g="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!m||!p},{splice:function(e,t){var a,n,l,d,m,p,b=o(this),_=s(b.length),y=r(e,_),x=arguments.length;if(0===x?a=n=0:1===x?(a=0,n=_-y):(a=x-2,n=v(h(i(t),0),_-y)),_+a-n>f)throw TypeError(g);for(l=c(b,n),d=0;d<n;d++)m=y+d,m in b&&u(l,d,b[m]);if(l.length=n,a<n){for(d=y;d<_-n;d++)m=d+n,p=d+a,m in b?b[p]=b[m]:delete b[p];for(d=_;d>_-n+a;d--)delete b[d-1]}else if(a>n)for(d=_-n;d>y;d--)m=d+n-1,p=d+a-1,m in b?b[p]=b[m]:delete b[p];for(d=0;d<a;d++)b[d+y]=arguments[d+2];return b.length=_-n+a,l}})},be43:function(e,t,a){},c8d2:function(e,t,a){var n=a("d039"),r=a("5899"),i="​᠎";e.exports=function(e){return n((function(){return!!r[e]()||i[e]()!=i||r[e].name!==e}))}},e153:function(e,t,a){"use strict";var n=a("2cb4"),r=a.n(n);r.a},f3ad:function(e,t,a){"use strict";var n=a("7181"),r=a.n(n);r.a}}]);
//# sourceMappingURL=chunk-610c8173.91380434.js.map