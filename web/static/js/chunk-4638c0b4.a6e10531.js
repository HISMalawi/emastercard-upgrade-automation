(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4638c0b4"],{7920:function(e,t,i){"use strict";var n=i("7a23");function r(e,t,i,r,s,a){return Object(n["openBlock"])(),Object(n["createBlock"])(Object(n["resolveDynamicComponent"])(e.formType),{fields:e.fields,skipSummary:e.skipSummary,activeField:e.activeField,cancelDestinationPath:e.cancelDestinationPath,onOnFinish:e.onFinish,onFinish:e.onFinishAction,onOnIndex:e.onIndex},null,40,["fields","skipSummary","activeField","cancelDestinationPath","onOnFinish","onFinish","onOnIndex"])}var s=i("9441"),a=Object(n["defineComponent"])({name:"HisStandardForm",components:{TouchScreenForm:s["a"]},emits:["onFinish","onIndex"],data:()=>({formType:"touch-screen-form"}),props:{onFinishAction:{type:Function},skipSummary:{type:Boolean,default:!1},activeField:{type:String},fields:{type:Object,required:!0},cancelDestinationPath:{type:String,required:!1}},methods:{onFinish(e,t){this.$emit("onFinish",e,t)},onIndex(e){this.$emit("onIndex",e)}}}),o=i("d959"),c=i.n(o);const l=c()(a,[["render",r]]);t["a"]=l},cb7c:function(e,t,i){"use strict";i.r(t);var n=i("7a23");function r(e,t,i,r,s,a){const o=Object(n["resolveComponent"])("his-standard-form");return Object(n["openBlock"])(),Object(n["createBlock"])(o,{fields:e.fields,onFinishAction:e.onFinish,skipSummary:!0,key:e.refreshKey},null,8,["fields","onFinishAction"])}i("14d9");var s=i("d95e"),a=i("7920"),o=i("b89f"),c=i("2ef0"),l=i("fe70"),h=i("b5e4"),d=Object(n["defineComponent"])({components:{HisStandardForm:a["a"]},data(){return{printFieldContext:null,printerService:{},defaultPrinter:{},refreshKey:0,fields:[],refreshInterval:null,isRefreshingDevices:!1}},async mounted(){this.printerService=new o["a"],this.defaultPrinter=await this.printerService.getDefaultPrinter()||{},this.fields=this.getFields()},unmounted(){this.refreshInterval&&clearInterval(this.refreshInterval)},methods:{async onFinish(){this.$router.back()},isDefaultPrinter(e){return e.name&&this.defaultPrinter.name?e.name===this.defaultPrinter.name:e.deviceID===this.defaultPrinter.deviceID},sortPrinters(e){return e.sort((e,t)=>this.isDefaultPrinter(e)&&!this.isDefaultPrinter(t)?-1:!this.isDefaultPrinter(e)&&this.isDefaultPrinter(t)?1:(e.name||e.deviceID).localeCompare(t.name||t.deviceID))},defaultPrinterStyle(){const e=[];return Object(c["isEmpty"])(this.defaultPrinter)||e.push({indexes:[0],class:"adherence-txt-good adherence-col-bg bold"}),e},getFields(){return[{id:"printer_settings",helpText:"Printer Settings",type:s["b"].TT_TABLE_VIEWER,config:{hiddenFooterBtns:["Clear"],footerBtns:[{name:"Refresh",size:"large",slot:"end",color:"warning",visible:!0,onClick:async()=>{if(this.isRefreshingDevices)return Object(h["e"])("Please wait...");if(this.printFieldContext){(await l["p"].create({backdropDismiss:!1,message:"Please wait..."})).present(),this.isRefreshingDevices=!0;try{await this.printFieldContext.init()}catch(e){Object(h["c"])(""+e)}this.isRefreshingDevices=!1,l["p"].dismiss()}}}]},init:()=>{this.refreshInterval=setInterval(async()=>{this.printFieldContext&&!this.isRefreshingDevices&&(this.isRefreshingDevices=!0,await this.printFieldContext.init(),this.isRefreshingDevices=!1)},5e3)},onload:e=>{this.printFieldContext=e},options:async()=>{const e=await this.printerService.getAllPrinters(),t=this.sortPrinters(e);return[{other:{rowColors:this.defaultPrinterStyle(),columns:["Available Devices"],rows:t.map(e=>[e.name||e.deviceID,{type:"button",name:"Test Printer",action:()=>this.printerService.printTestLbl(e)},this.isDefaultPrinter(e)?"Default Printer":{type:"button",name:"Set as Default",visible:!this.isDefaultPrinter(e),action:()=>{this.printerService.setDefaultPrinter(e),this.defaultPrinter=e,this.refreshKey=1e4*Math.random()}}])}}]}}]}}}),f=i("d959"),u=i.n(f);const p=u()(d,[["render",r]]);t["default"]=p}}]);
//# sourceMappingURL=chunk-4638c0b4.a6e10531.js.map