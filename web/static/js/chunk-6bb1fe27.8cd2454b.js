(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6bb1fe27"],{"1ef9":function(t,e,n){"use strict";var i=n("c314"),s=n.n(i);s.a},"3fd1":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"d-flex",attrs:{id:"wrapper"}},[n("side-bar"),n("div",{attrs:{id:"page-content-wrapper"}},[n("top-nav"),n("div",{staticClass:"container-fluid"},[n("Registration",{staticStyle:{"margin-top":"10px"}})],1)],1)],1)])},s=[],a=n("ebd8"),r=n("7c08"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container",staticStyle:{width:"100%",margin:"auto"}},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-12"},[n("form",{attrs:{id:"msform"}},[n("form",{staticClass:"content-tab tab-pane fade show active shadow-lg p-3 mb-5 bg-white rounded form-template tab",attrs:{id:"pDetails"}},[n("h5",{staticStyle:{"font-weight":"bold"}},[t._v("HIV Clinic Registration")]),n("clinic-registration",{ref:"clinicRegistration",attrs:{patientId:t.PATIENT_ID},on:{addEncounter:t.addEncounter}}),n("input",{staticClass:"btn btn-primary clinical action-button",staticStyle:{position:"absolute",bottom:"17px",right:"45%"},attrs:{type:"button",name:"next",value:"Next Step"},on:{click:t.registrationObject}}),n("div",{staticClass:"errorTxt",staticStyle:{"margin-top":"10px","text-align":"center","font-weight":"bold"}})],1),n("form",{staticClass:"content-tab tab-pane fade show active shadow-lg p-3 mb-5 bg-white rounded form-template tab",attrs:{id:"gDetails"}},[t._m(0),n("staging",{ref:"staging",attrs:{patientId:t.PATIENT_ID},on:{addEncounter:t.addEncounter}}),n("input",{staticClass:"btn btn-primary previous action-button-previous",staticStyle:{position:"absolute",bottom:"30px",right:"50%"},attrs:{type:"button",name:"previous",value:"Previous"}}),n("input",{staticClass:"btn btn-primary staging action-button",staticStyle:{position:"absolute",bottom:"30px",right:"40%"},attrs:{type:"button",name:"next",value:"Next Step"},on:{click:t.stagingObject}}),n("div",{staticClass:"guardianError",staticStyle:{"margin-top":"10px",height:"1px","text-align":"center","font-weight":"bold"}})],1),n("form",{staticClass:"content-tab tab-pane fade show active shadow-lg p-3 mb-5 bg-white rounded form-template"},[t._m(1),Object.entries(t.registrationEncounter).length>0&&Object.entries(t.stagingEncounter).length>0?n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-6",staticStyle:{"text-align":"left"}},[n("label",{staticStyle:{"font-weight":"bold"}},[t._v("HIV Clinic Registration")]),n("table",{staticClass:"table table-striped"},[t._m(2),n("tbody",[n("tr",[n("td",[t._v("Year Last Taken ARVs")]),n("td",[t._v(t._s("Invalid date"==t.registrationEncounter["encounter"]["obs"]["yearLastTakenARVs"]["value_datetime"]?"Unknown":t.registrationEncounter["encounter"]["obs"]["yearLastTakenARVs"]["value_datetime"]||"N/A"))])]),n("tr",[n("td",[t._v("Ever registered at a clinic")]),n("td",[t._v(t._s(t.CONCEPTS[t.registrationEncounter["encounter"]["obs"]["everRegisteredAtClinic"]["value_coded"]]||"N/A"))])]),n("tr",[n("td",[t._v("ART #")]),n("td",[t._v(t._s(t.registrationEncounter["encounter"]["obs"]["artNumberAtPreviousLocation"]["value_text"]||"N/A"))])]),n("tr",[n("td",[t._v("Confirmatory Test")]),n("td",[t._v(t._s(t.CONCEPTS[t.registrationEncounter["encounter"]["obs"]["confirmatoryTest"]["value_coded"]]||"N/A"))])]),n("tr",[n("td",[t._v("ART Start Location")]),n("td",[t._v(t._s(t.registrationEncounter["encounter"]["obs"]["ARTStartLocation"]["value_text"]||"N/A"))])]),n("tr",[n("td",[t._v("Date ART Started")]),n("td",[t._v(t._s(null==t.registrationEncounter["encounter"]["obs"]["dateARTStarted"]["value_datetime"]||"Invalid date"==t.registrationEncounter["encounter"]["obs"]["dateARTStarted"]["value_datetime"]?"N/A":t.registrationEncounter["encounter"]["obs"]["dateARTStarted"]["value_datetime"]))])]),n("tr",[n("td",[t._v("Test Location")]),n("td",[t._v(t._s(t.registrationEncounter["encounter"]["obs"]["testLocation"]["value_text"]||"N/A"))])]),n("tr",[n("td",[t._v("Date of Test")]),n("td",[t._v(t._s("Invalid date"==t.registrationEncounter["encounter"]["obs"]["testDate"]["value_datetime"]?"N/A":t.registrationEncounter["encounter"]["obs"]["testDate"]["value_datetime"]))])])])])]),n("div",{staticClass:"col-md-6",staticStyle:{"text-align":"left"}},[n("label",{staticStyle:{"font-weight":"bold"}},[t._v("Staging")]),n("table",{staticClass:"table table-striped"},[t._m(3),n("tbody",[n("tr",[n("td",[t._v("Reason for Starting")]),n("td",[t._v(t._s(t.stagingEncounter["encounter"]["obs"]["reason"]["value_text"]||"N/A"))])]),n("tr",[n("td",[t._v("Stage")]),n("td",[t._v(t._s(t.stagingEncounter["encounter"]["obs"]["stage"]["value_text"]||"N/A"))])]),n("tr",[n("td",[t._v("CD4 Count Date")]),n("td",[t._v(t._s(t.stagingEncounter["encounter"]["obs"]["cd4CountDate"]["value_datetime"]||"N/A"))])]),n("tr",[n("td",[t._v("CD4 Count")]),n("td",[t._v(t._s(Object.entries(t.stagingEncounter["encounter"]["obs"]["cd4Count"]["value_numeric"]).length>0?t.stagingEncounter["encounter"]["obs"]["cd4Count"]["value_modifier"]+""+t.stagingEncounter["encounter"]["obs"]["cd4Count"]["value_numeric"]:"N/A"))])]),n("tr",[n("td",[t._v("CD4 Count Location")]),n("td",[t._v(t._s(t.stagingEncounter["encounter"]["obs"]["cd4CountLocation"]["value_text"]||"N/A"))])]),n("tr",[n("td",[t._v("Condition(s)")]),n("td",[n("ul",{staticStyle:{height:"150px",overflow:"hidden","overflow-y":"scroll","list-style-type":"decimal"}},t._l(t.conditionList,(function(e){return n("li",{key:e,staticClass:"condtions"},[t._v(t._s(e||"NA"))])})),0)])])])])])]):t._e(),n("input",{staticClass:"btn btn-primary previous action-button-previous",staticStyle:{position:"absolute",bottom:"30px",right:"50%"},attrs:{type:"button",name:"previous",value:"Previous"}}),n("button",{staticClass:"btn btn-primary",staticStyle:{position:"absolute",bottom:"30px",right:"43%"},attrs:{type:"button"},on:{click:t.createEncounters}},[t._v("save")])]),t._m(4),t._m(5)])])])])},c=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row"},[n("h5",{staticStyle:{"font-weight":"bold",margin:"auto","margin-bottom":"10px"}},[t._v("Staging")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-12"},[n("h5",{staticStyle:{"font-weight":"bold",margin:"auto","margin-bottom":"10px"}},[t._v("Summary")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",{attrs:{scope:"col"}},[t._v("Name")]),n("th",{attrs:{scope:"col"}},[t._v("Value")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",{attrs:{scope:"col"}},[t._v("Name")]),n("th",{attrs:{scope:"col"}},[t._v("Value")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{staticClass:"content-tab tab-pane fade show active shadow-lg p-3 mb-5 bg-white rounded form-template"},[n("div",{staticClass:"form-card"},[n("h2",{staticClass:"fs-title text-center"},[t._v("Success !")]),n("br"),n("br"),n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"col-3"},[n("img",{staticClass:"fit-image",attrs:{src:"https://img.icons8.com/color/96/000000/ok--v2.png"}})])]),n("br"),n("br"),n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"col-7 text-center"},[n("h5",[t._v("Patient added")])])])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{attrs:{id:"progressbar"}},[n("li",{staticClass:"active",attrs:{id:"registration"}},[n("strong",[t._v("Clinical Registration")])]),n("li",{attrs:{id:"staging"}},[n("strong",[t._v("Staging")])]),n("li",{attrs:{id:"summary"}},[n("strong",[t._v("Summary")])])])}],u=(n("4de4"),n("7db0"),n("4160"),n("caad"),n("d81d"),n("b64b"),n("ac1f"),n("2532"),n("466d"),n("159b"),n("96cf"),n("1da1")),l=n("8740"),d=n("f91c"),g=n("8051"),v=n("cf40"),p=(n("c1df"),n("1157")),b=n.n(p),m=n("24ca"),f={data:function(){return{encounters:{},PATIENT_ID:this.$route.params.id,NEW_REGISTER:this.$route.params.new,registrationEncounter:{},stagingEncounter:{},CONCEPTS:{1065:"Yes",1066:"No",1040:"Rapid Antibody Test",844:"DNA PCR",1118:"Not Done"},clinicRegistrationFormValidations:[],stagingFormValidations:[]}},computed:{conditionList:function(){var t=this,e=Object.keys(this.stagingEncounter["encounter"]["obs"]).filter((function(t){return t.match(/condition/)})),n=e.map((function(e){return t.stagingEncounter["encounter"]["obs"][e]}));return n.map((function(t){return t["value_text"]}))}},components:{"clinic-registration":l["a"],staging:d["a"]},methods:{addEncounter:function(t){var e=Object.keys(t)[0];this.encounters[e]=t[e]},saveEncounter:function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(e){var n,i,s,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=[],i={url:"observations"},Object.keys(e).includes("obs")?(Object.keys(e.obs).forEach((function(t){n.push(e.obs[t])})),i.observations=n):Object.keys(e).includes("drug_orders")&&(i.drug_orders=e.drug_orders,i.url="drug_orders"),t.next=5,v["a"].createEncounter(this.PATIENT_ID,e.encounter_id,e.encounter_datetime);case 5:if(s=t.sent,this.successfulOperation=!0,201!==s.status&&200!==s.status){t.next=16;break}return a=s.encounter_id,i.encounter_id=a,t.next=12,g["a"].post(i.url,i);case 12:r=t.sent,201===r.status||200===r.status?(this.success=!0,this.fail=!1,this.postResponse="Appointment has been set."):(this.success=!1,this.fail=!0,this.postResponse="Appointment could not be set."),t.next=19;break;case 16:this.success=!1,this.fail=!0,this.postResponse="Appointment could not be set.";case 19:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),createEncounters:function(){var t=this;this.NEW_REGISTER&&"false"!=this.NEW_REGISTER||this.voidFirstVisitEncounters();var e=Object.keys(this.$refs);console.log(e),e.forEach((function(e){t.$refs[e].saveEncounter()}));var n=Object.keys(this.encounters);n.forEach((function(e){console.log(t.encounters[e]),t.saveEncounter(t.encounters[e])})),this.redirect("/patient/mastercard/".concat(this.PATIENT_ID))},redirect:function(t){this.$router.push(t)},getExpected:function(t){var e=["value_group_id","value_boolean","value_coded","value_coded_name_id","value_drug","value_datetime","value_numeric","value_modifier","value_text"],n="";return Object.keys(t).filter((function(t){e.includes(t)&&(n=t)})),n},initileWizard:function(t){var e=this;b()(document).ready((function(){var n,i,s,a;console.log(t["form_is_valid"]);b()("#pDetails");var r="<label style='color:red'> All required fields (*) must be completed before proceeding. </label>";b()(".clinical").click((function(){var t=e.registrationEncounter;t["form_is_valid"]?(b()(".errorTxt").html(""),n=b()(this).parent(),i=b()(this).parent().next(),b()("#progressbar li").eq(b()(".content-tab").index(i)).addClass("active"),i.show(),n.animate({opacity:0},{step:function(t){a=1-t,n.css({display:"none",position:"relative"}),i.css({opacity:a})},duration:600})):b()(".errorTxt").html(r)})),b()(".staging").click((function(){var t=e.stagingEncounter["form_is_valid"];t?(b()(".guardianError").html(""),n=b()(this).parent(),i=b()(this).parent().next(),b()("#progressbar li").eq(b()(".content-tab").index(i)).addClass("active"),i.show(),n.animate({opacity:0},{step:function(t){a=1-t,n.css({display:"none",position:"relative"}),i.css({opacity:a})},duration:600})):b()(".guardianError").html(r)})),b()(".previous").click((function(){n=b()(this).parent(),s=b()(this).parent().prev(),b()("#progressbar li").eq(b()(".content-tab").index(n)).removeClass("active"),s.show(),n.animate({opacity:0},{step:function(t){a=1-t,n.css({display:"none",position:"relative"}),s.css({opacity:a})},duration:600})})),b()(".confirm").click((function(){console.log("confirm clicked"),n=b()(this).parent(),i=b()(this).parent().next(),b()("#progressbar li").eq(b()(".content-tab").index(i)).addClass("active"),i.show(),n.animate({opacity:0},{step:function(t){a=1-t,n.css({display:"none",position:"relative"}),i.css({opacity:a})},duration:600})})),b()(".radio-group .radio").click((function(){b()(this).parent().find(".radio").removeClass("selected"),b()(this).addClass("selected")})),b()(".submit").click((function(){return console.log("Patient Details submitted!!!"),!1}))}))},registrationObject:function(){m["a"].$emit("validate-clinic-registration",""),this.registrationEncounter=this.$store.state.registration.registration,console.log(this.registrationEncounter),this.initileWizard(this.registrationEncounter)},stagingObject:function(){m["a"].$emit("validate-staging",""),this.stagingEncounter=this.$store.state.staging.staging,this.initileWizard(this.registrationEncounter),console.log(this.stagingEncounter)},removeEncounter:function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(){var e,n=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:"",t.next=3,g["a"].remove("encounters/".concat(e));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),voidEncounters:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.forEach((function(e){t.removeEncounter(e).then((function(t){console.log(t)}))}))},voidFirstVisitEncounters:function(){var t=[this.$store.state.initialRegistration,this.$store.state.initialVitals,this.$store.state.initialStaging],e=t.map((function(t){return null===t||void 0===t?void 0:t.encounter_id})).filter((function(t){return null!=t}));this.voidEncounters(e)}},mounted:function(){console.log(this.$route.params.id),this.initileWizard(this.$store.state.registration.registration),this.initileWizard(this.$store.state.staging.staging)}},h=f,_=(n("1ef9"),n("2877")),E=Object(_["a"])(h,o,c,!1,null,"cd9f2e28",null),y=E.exports,C={name:"home",components:{"top-nav":a["a"],"side-bar":r["a"],Registration:y}},x=C,w=Object(_["a"])(x,i,s,!1,null,null,null);e["default"]=w.exports},"7db0":function(t,e,n){"use strict";var i=n("23e7"),s=n("b727").find,a=n("44d2"),r=n("ae40"),o="find",c=!0,u=r(o);o in[]&&Array(1)[o]((function(){c=!1})),i({target:"Array",proto:!0,forced:c||!u},{find:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),a(o)},c314:function(t,e,n){}}]);
//# sourceMappingURL=chunk-6bb1fe27.8cd2454b.js.map